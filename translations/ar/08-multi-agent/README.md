[![تصميم الوكلاء المتعددين](../../../translated_images/ar/lesson-8-thumbnail.278a3e4a59137d62.webp)](https://youtu.be/V6HpE9hZEx0?si=A7K44uMCqgvLQVCa)

> _(انقر على الصورة أعلاه لمشاهدة فيديو هذا الدرس)_

# أنماط تصميم الوكلاء المتعددين

بمجرد أن تبدأ في العمل على مشروع يتضمن وكلاء متعددين، ستحتاج إلى التفكير في نمط تصميم الوكلاء المتعددين. ومع ذلك، قد لا يكون واضحًا على الفور متى يجب الانتقال إلى الوكلاء المتعددين وما هي المزايا.

## المقدمة

في هذا الدرس، نسعى للإجابة على الأسئلة التالية:

- ما هي السيناريوهات التي تنطبق عليها الوكلاء المتعددين؟
- ما هي مزايا استخدام الوكلاء المتعددين بدلاً من وجود وكيل واحد يقوم بعدة مهام؟
- ما هي اللبنات الأساسية لتنفيذ نمط تصميم الوكلاء المتعددين؟
- كيف نتحصل على رؤية لكيفية تفاعل الوكلاء المتعددين مع بعضهم البعض؟

## أهداف التعلم

بعد هذا الدرس، يجب أن تكون قادرًا على:

- تحديد السيناريوهات التي تنطبق عليها الوكلاء المتعددين
- التعرف على مزايا استخدام الوكلاء المتعددين بدلاً من وكيل واحد.
- فهم اللبنات الأساسية لتنفيذ نمط تصميم الوكلاء المتعددين.

ما هي الصورة الأكبر؟

*الوكلاء المتعددون هم نمط تصميم يسمح لعدة وكلاء بالعمل معًا لتحقيق هدف مشترك*.

يُستخدم هذا النمط على نطاق واسع في مجالات متنوعة، بما في ذلك الروبوتات، الأنظمة الذاتية، والحوسبة الموزعة.

## السيناريوهات التي تنطبق عليها الوكلاء المتعددين

فما هي السيناريوهات التي تعتبر حالة استخدام جيدة لاستخدام الوكلاء المتعددين؟ الجواب هو أن هناك العديد من السيناريوهات حيث يكون توظيف عدة وكلاء مفيدًا وخاصة في الحالات التالية:

- **أعباء عمل كبيرة**: يمكن تقسيم الأعباء الكبيرة إلى مهام أصغر وتكليف وكلاء مختلفين بها، مما يسمح بالمعالجة المتوازية وإنجاز أسرع. مثال على ذلك هو مهمة معالجة بيانات كبيرة.
- **مهام معقدة**: المهام المعقدة، مثل الأعباء الكبيرة، يمكن تفصيلها إلى مهام فرعية أصغر وتكليف وكلاء مختلفين بها، كل منهم يتخصص في جانب محدد من المهمة. مثال جيد على ذلك هو في حالة المركبات الذاتية القيادة حيث يتولى وكلاء مختلفون إدارة التنقل، واكتشاف العقبات، والتواصل مع المركبات الأخرى.
- **خبرات متنوعة**: يمكن أن يمتلك كل وكيل خبرة متنوعة، مما يتيح لهم التعامل مع جوانب مختلفة من المهمة بشكل أكثر فعالية من وكيل واحد. في هذه الحالة، مثال جيد هو في الرعاية الصحية حيث يمكن للوسطاء إدارة التشخيصات، خطط العلاج، ومراقبة المرضى.

## مزايا استخدام الوكلاء المتعددين بدلاً من وكيل واحد

يمكن أن يعمل نظام وكيل واحد بشكل جيد للمهام البسيطة، ولكن للمهام الأكثر تعقيدًا، يمكن أن يوفر استخدام عدة وكلاء عدة مزايا:

- **التخصص**: يمكن لكل وكيل أن يكون متخصصًا في مهمة محددة. نقص التخصص في وكيل واحد يعني أن هناك وكيل قادر على القيام بكل شيء ولكن قد يصاب بالارتباك فيما يجب فعله عند مواجهة مهمة معقدة. قد ينتهي به الأمر على سبيل المثال بأداء مهمة ليس هو الأنسب لها.
- **القابلية للتوسع**: من الأسهل توسيع الأنظمة بإضافة المزيد من الوكلاء بدلاً من تحميل وكيل واحد بأعباء ثقيلة.
- **تحمل الأخطاء**: إذا فشل وكيل واحد، يمكن للآخرين الاستمرار في العمل، مما يضمن موثوقية النظام.

لنأخذ مثالاً، دعنا نحجز رحلة لمستخدم. يجب على نظام الوكيل الواحد أن يتعامل مع جميع جوانب عملية حجز الرحلة، من العثور على الرحلات إلى حجز الفنادق وتأجير السيارات. لتحقيق هذا بنظام وكيل واحد، يجب أن يمتلك الوكيل أدوات للتعامل مع جميع هذه المهام. قد يؤدي ذلك إلى نظام معقد وموحد يصعب صيانته وتوسيعه. أما نظام الوكلاء المتعددين، فيمكن أن يحتوي على وكلاء مختلفين متخصصين في العثور على الرحلات، حجز الفنادق، وتأجير السيارات. هذا يجعل النظام أكثر تجزئة، وأسهل في الصيانة، وقابل للتوسع.

قارن هذا بوكالة سفر تُدار كمحل عائلي صغير مقابل وكالة سفر تُدار كامتياز فرعي. في المحل العائلي، سيكون هناك وكيل واحد يتعامل مع جميع جوانب عملية حجز الرحلة، بينما في الامتياز سيكون هناك وكلاء مختلفون يتعاملون مع جوانب مختلفة من العملية.

## اللبنات الأساسية لتنفيذ نمط تصميم الوكلاء المتعددين

قبل أن تتمكن من تنفيذ نمط تصميم الوكلاء المتعددين، تحتاج إلى فهم اللبنات الأساسية التي تُكوّن النمط.

لنُجعل هذا أكثر وضوحًا بالنظر مجددًا إلى مثال حجز رحلة لمستخدم. في هذه الحالة، تشمل اللبنات الأساسية:

- **اتصال الوكلاء**: يحتاج وكلاء العثور على الرحلات، حجز الفنادق، وتأجير السيارات إلى التواصل ومشاركة المعلومات حول تفضيلات المستخدم وقيوده. تحتاج إلى تحديد البروتوكولات والأساليب لهذا الاتصال. ما يعنيه هذا بوضوح هو أن وكيل العثور على الرحلات يحتاج للتواصل مع وكيل حجز الفنادق لضمان حجز الفندق لنفس تواريخ الرحلة. هذا يعني أن الوكلاء بحاجة إلى مشاركة معلومات حول تواريخ سفر المستخدم، لذا عليك أن تقرر *أي الوكلاء يشاركون المعلومات وكيفية مشاركة المعلومات*.
- **آليات التنسيق**: يحتاج الوكلاء إلى تنسيق أفعالهم لضمان تلبية تفضيلات وقيود المستخدم. قد يكون تفضيل المستخدم هو الحصول على فندق قريب من المطار بينما قد يكون القيد هو أن سيارات التأجير متوفرة فقط في المطار. هذا يعني أن وكيل حجز الفنادق يحتاج إلى التنسيق مع وكيل حجز سيارات الإيجار لضمان تلبية تفضيلات وقيود المستخدم. هذا يعني أنه عليك تحديد *كيف ينسق الوكلاء أفعالهم*.
- **هيكل الوكيل**: يحتاج الوكلاء إلى وجود هيكل داخلي لاتخاذ القرارات والتعلم من تفاعلاتهم مع المستخدم. هذا يعني أن وكيل العثور على الرحلات يحتاج إلى هيكل داخلي لاتخاذ قرارات حول الرحلات التي يتم التوصية بها للمستخدم. وهذا يعني أنه عليك تحديد *كيف يتخذ الوكلاء القرارات ويتعلمون من تفاعلاتهم مع المستخدم*. من الأمثلة على كيفية تعلم الوكيل وتحسنه هو أن وكيل العثور على الرحلات قد يستخدم نموذج تعلم آلة لتوصية الرحلات بناءً على تفضيلات المستخدم السابقة.
- **الرؤية في تفاعلات الوكلاء المتعددين**: تحتاج إلى رؤية كيف تتفاعل الوكلاء المتعددين مع بعضهم البعض. يعني هذا أنك بحاجة لأدوات وتقنيات لتتبع أنشطة وتفاعلات الوكلاء. يمكن أن يكون هذا في شكل أدوات تسجيل ومراقبة، أدوات تصور، وقياسات أداء.
- **أنماط الوكلاء المتعددين**: هناك أنماط مختلفة لتنفيذ أنظمة الوكلاء المتعددين، مثل الهياكل المركزية، اللامركزية، والهجينة. عليك الاختيار على النمط الذي يناسب حالة استخدامك.
- **الإنسان في الحلقة**: في معظم الحالات، سيكون لديك إنسان ضمن الحلقة وعليك أن توجه الوكلاء متى يطلبون تدخل الإنسان. قد يكون ذلك في شكل طلب المستخدم لفندق أو رحلة معينة لم يُوص بها الوكلاء أو طلب التأكيد قبل حجز الرحلة أو الفندق.

## الرؤية في تفاعلات الوكلاء المتعددين

من المهم أن يكون لديك رؤية لكيفية تفاعل الوكلاء المتعددين مع بعضهم البعض. هذه الرؤية ضرورية لتصحيح الأخطاء، تحسين الأداء، وضمان فعالية النظام ككل. لتحقيق ذلك، تحتاج إلى أدوات وتقنيات لتتبع أنشطة وتفاعلات الوكلاء. يمكن أن يكون هذا في شكل أدوات تسجيل ومراقبة، أدوات تصور، وقياسات أداء.

على سبيل المثال، في حالة حجز رحلة لمستخدم، يمكن أن يكون لديك لوحة تحكم تُظهر حالة كل وكيل، تفضيلات وقيود المستخدم، والتفاعلات بين الوكلاء. قد تعرض هذه اللوحة تواريخ سفر المستخدم، الرحلات التي أوصى بها وكيل الرحلات، الفنادق التي أوصى بها وكيل الفندق، وسيارات الإيجار التي أوصى بها وكيل تأجير السيارات. هذا يمنحك رؤية واضحة عن كيفية تفاعل الوكلاء مع بعضهم البعض وما إذا كانت تفضيلات وقيود المستخدم تُلبى.

لننظر إلى كل من هذه الجوانب بمزيد من التفصيل.

- **أدوات التسجيل والمراقبة**: تريد تسجيل كل إجراء يتخذه الوكيل. يمكن أن يخزن سجل الإدخال معلومات حول الوكيل الذي قام بالإجراء، الإجراء المتخذ، وقت اتخاذ الإجراء، ونتيجة الإجراء. يمكن بعد ذلك استخدام هذه المعلومات لتصحيح الأخطاء، التحسين، والمزيد.
- **أدوات التصور**: يمكن لأدوات التصور مساعدتك في رؤية التفاعلات بين الوكلاء بطريقة أكثر بديهية. على سبيل المثال، يمكن أن يكون لديك رسم يوضح تدفق المعلومات بين الوكلاء. هذا يمكن أن يساعدك في تحديد الاختناقات، عدم الكفاءة، وقضايا أخرى في النظام.
- **قياسات الأداء**: يمكن لقياسات الأداء أن تساعدك في تتبع فعالية نظام الوكلاء المتعددين. على سبيل المثال، يمكنك تتبع الوقت المستغرق لإكمال مهمة، عدد المهام المكتملة في وحدة زمنية، ودقة التوصيات التي يقدمها الوكلاء. تساعد هذه المعلومات في تحديد مجالات التحسين وتحسين النظام.

## أنماط الوكلاء المتعددين

لنغوص في بعض الأنماط المحددة التي يمكننا استخدامها لإنشاء تطبيقات متعددة الوكلاء. إليك بعض الأنماط المثيرة التي تستحق النظر فيها:

### الدردشة الجماعية

هذا النمط مفيد عندما تريد إنشاء تطبيق دردشة جماعية حيث يمكن لوكلاء متعددين التواصل مع بعضهم البعض. تشمل حالات الاستخدام النموذجية لهذا النمط التعاون بين الفرق، دعم العملاء، والشبكات الاجتماعية.

في هذا النمط، يمثل كل وكيل مستخدمًا في الدردشة الجماعية، ويتم تبادل الرسائل بين الوكلاء باستخدام بروتوكول مراسلة. يمكن للوكلاء إرسال رسائل إلى الدردشة الجماعية، استقبال الرسائل منها، والرد على رسائل وكلاء آخرين.

يمكن تنفيذ هذا النمط باستخدام هيكل مركزي حيث يتم توجيه جميع الرسائل عبر خادم مركزي، أو هيكل لامركزي حيث يتم تبادل الرسائل مباشرة.

![الدردشة الجماعية](../../../translated_images/ar/multi-agent-group-chat.ec10f4cde556babd.webp)

### التسليم التدريجي

هذا النمط مفيد عندما تريد إنشاء تطبيق يمكن لوكلاء متعددين تسليم المهام إلى بعضهم البعض.

تشمل حالات الاستخدام النموذجية لهذا النمط دعم العملاء، إدارة المهام، وأتمتة سير العمل.

في هذا النمط، يمثل كل وكيل مهمة أو خطوة في سير عمل، ويمكن للوكلاء تسليم المهام لوكلاء آخرين بناءً على قواعد محددة مسبقًا.

![التسليم التدريجي](../../../translated_images/ar/multi-agent-hand-off.4c5fb00ba6f8750a.webp)

### التصفية التعاونية

هذا النمط مفيد عندما تريد إنشاء تطبيق يمكن لوكلاء متعددين التعاون فيه لتقديم توصيات للمستخدمين.

سبب رغبتك في تعاون عدة وكلاء هو أن كل وكيل يمكن أن يمتلك خبرة مختلفة ويمكن أن يساهم في عملية التوصية بطرق مختلفة.

لنأخذ مثالًا حيث يريد مستخدم توصية بأفضل سهم للشراء في سوق الأسهم.

- **خبير الصناعة**: قد يكون وكيل واحد خبيرًا في صناعة معينة.
- **التحليل الفني**: قد يكون وكيل آخر خبيرًا في التحليل الفني.
- **التحليل الأساسي**: ووكيل آخر خبيرًا في التحليل الأساسي. من خلال التعاون، يمكن لهؤلاء الوكلاء تقديم توصية أكثر شمولًا للمستخدم.

![التوصية](../../../translated_images/ar/multi-agent-filtering.d959cb129dc9f608.webp)

## السيناريو: عملية استرداد الأموال

افترض سيناريو يحاول فيه عميل استرجاع أموال منتج، قد يكون هناك عدة وكلاء مشاركين في هذه العملية، لكن دعنا نقسمهم بين وكلاء متخصصين في هذه العملية وكلاء عامين يمكن استخدامهم في عمليات أخرى.

**وكلاء مختصون بعملية الاسترداد**:

فيما يلي بعض الوكلاء الذين يمكن أن يشاركوا في عملية الاسترداد:

- **وكيل العميل**: يمثل العميل ومسؤول عن بدء عملية الاسترداد.
- **وكيل البائع**: يمثل البائع ومسؤول عن معالجة الاسترداد.
- **وكيل الدفع**: يمثل عملية الدفع ومسؤول عن استرداد دفعة العميل.
- **وكيل الحلول**: يمثل عملية الحلول ومسؤول عن حل أي مشكلات تظهر أثناء عملية الاسترداد.
- **وكيل الامتثال**: يمثل عملية الامتثال ومسؤول عن التأكد من أن عملية الاسترداد تتوافق مع اللوائح والسياسات.

**وكلاء عامون**:

يمكن استخدام هؤلاء الوكلاء من قبل أجزاء أخرى من عملك.

- **وكيل الشحن**: يمثل عملية الشحن ومسؤول عن شحن المنتج مرة أخرى إلى البائع. يمكن استخدام هذا الوكيل عالميًا لكل من عملية الاسترداد والشحن العام للمنتجات مثلًا.
- **وكيل الملاحظات**: يمثل عملية جمع الملاحظات ومسؤول عن جمع ملاحظات العميل. يمكن جمع الملاحظات في أي وقت وليس فقط خلال عملية الاسترداد.
- **وكيل التصعيد**: يمثل عملية التصعيد ومسؤول عن تصعيد المشكلات إلى مستوى دعم أعلى. يمكنك استخدام هذا الوكيل لأي عملية تتطلب تصعيد قضية.
- **وكيل الإشعارات**: يمثل عملية الإشعارات ومسؤول عن إرسال الإشعارات إلى العميل في مراحل مختلفة من عملية الاسترداد.
- **وكيل التحليلات**: يمثل عملية التحليلات ومسؤول عن تحليل البيانات المتعلقة بعملية الاسترداد.
- **وكيل التدقيق**: يمثل عملية التدقيق ومسؤول عن تدقيق عملية الاسترداد لضمان تنفيذها بشكل صحيح.
- **وكيل التقارير**: يمثل عملية التقارير ومسؤول عن إنشاء تقارير عن عملية الاسترداد.
- **وكيل المعرفة**: يمثل عملية المعرفة ومسؤول عن صيانة قاعدة معارف تتعلق بعملية الاسترداد. يمكن أن يكون هذا الوكيل خبيرًا في كل من الاستردادات وأجزاء أخرى من عملك.
- **وكيل الأمن**: يمثل عملية الأمن ومسؤول عن ضمان أمان عملية الاسترداد.
- **وكيل الجودة**: يمثل عملية الجودة ومسؤول عن ضمان جودة عملية الاسترداد.

هناك عدد كبير من الوكلاء المذكورين سابقًا لكل من عملية الاسترداد المحددة وكذلك الوكلاء العامين الذين يمكن استخدامهم في أجزاء أخرى من عملك. نأمل أن يمنحك هذا فكرة عن كيفية اختيار الوكلاء لاستخدامهم في نظام الوكلاء المتعددين لديك.

## التعيين

صمم نظام وكلاء متعدد لعملية دعم العملاء. حدد الوكلاء المشاركين في العملية، أدوارهم ومسؤولياتهم، وكيفية تفاعلهم مع بعضهم البعض. ضع في اعتبارك الوكلاء المختصين بعملية دعم العملاء وكذلك الوكلاء العامين الذين يمكن استخدامهم في أجزاء أخرى من عملك.
> فكر قليلاً قبل أن تقرأ الحل التالي، قد تحتاج إلى وكلاء أكثر مما تعتقد.

> نصيحة: فكّر في المراحل المختلفة لعملية دعم العملاء واعتبر أيضًا الوكلاء اللازمين لأي نظام.

## الحل

[الحل](./solution/solution.md)

## فحوصات المعرفة

السؤال: متى يجب أن تفكر في استخدام وكلاء متعددين؟

- [ ] A1: عندما يكون لديك عبء عمل صغير ومهمة بسيطة.
- [ ] A2: عندما يكون لديك عبء عمل كبير.
- [ ] A3: عندما يكون لديك مهمة بسيطة.

[اختبار الحل](./solution/solution-quiz.md)

## الملخص

في هذا الدرس، نظرنا في نمط تصميم الوكلاء المتعددين، بما في ذلك السيناريوهات التي ينطبق فيها استخدام الوكلاء المتعددين، ومزايا استخدام الوكلاء المتعددين مقابل وكيل واحد، وعناصر بناء تنفيذ نمط تصميم الوكلاء المتعددين، وكيفية الحصول على رؤية لكيفية تفاعل الوكلاء المتعددين مع بعضهم البعض.

### هل لديك المزيد من الأسئلة حول نمط تصميم الوكلاء المتعددين؟

انضم إلى [Microsoft Foundry Discord](https://aka.ms/ai-agents/discord) للقاء متعلمين آخرين، وحضور ساعات العمل والحصول على إجابات لأسئلتك حول وكلاء الذكاء الاصطناعي.

## موارد إضافية

- <a href="https://microsoft.github.io/autogen/stable/user-guide/core-user-guide/design-patterns/intro.html" target="_blank">نماذج تصميم AutoGen</a>
- <a href="https://www.analyticsvidhya.com/blog/2024/10/agentic-design-patterns/" target="_blank">نماذج تصميم وكيلية</a>


## الدرس السابق

[تخطيط التصميم](../07-planning-design/README.md)

## الدرس التالي

[الوعي الميتاإدراكي في وكلاء الذكاء الاصطناعي](../09-metacognition/README.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**إخلاء المسؤولية**:
تمت ترجمة هذا المستند باستخدام خدمة الترجمة الآلية [Co-op Translator](https://github.com/Azure/co-op-translator). رغم سعينا لتحقيق الدقة، يرجى العلم أن الترجمات التلقائية قد تحتوي على أخطاء أو عدم دقة. يجب اعتبار المستند الأصلي بلغته الأصلية المصدر المعتمد والموثوق. للمعلومات الهامة، يُنصح بالاستعانة بالترجمة البشرية المهنية. نحن غير مسؤولين عن أي سوء فهم أو تفسير ناتج عن استخدام هذه الترجمة.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->