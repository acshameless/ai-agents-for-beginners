# שימוש בפרוטוקולים אגנטיים (MCP, A2A ו-NLWeb)

[![פרוטוקולים אגנטיים](../../../translated_images/he/lesson-11-thumbnail.b6c742949cf1ce2a.webp)](https://youtu.be/X-Dh9R3Opn8)

> _(לחצו על התמונה שלמעלה כדי לצפות בסרטון של השיעור)_

ככל שהשימוש בסוכני בינה מלאכותית גדל, כך עולה הצורך בפרוטוקולים שמבטיחים תקינה, אבטחה ותומכים בחדשנות פתוחה. בשיעור זה, נכסה 3 פרוטוקולים שמטרתם לעמוד בצורך זה - פרוטוקול הקשר מודל (MCP), סוכן אל סוכן (A2A) ו-Natural Language Web (NLWeb).

## מבוא

בשיעור זה נכסה:

• כיצד **MCP** מאפשר לסוכני בינה מלאכותית לגשת לכלים ונתונים חיצוניים להשלמת משימות משתמש.

• כיצד **A2A** מאפשר תקשורת ושיתוף פעולה בין סוכני בינה מלאכותית שונים.

• כיצד **NLWeb** מביא ממשקי שפה טבעית לכל אתר אינטרנט ומאפשר לסוכנים לגלות ולהתקשר עם התוכן.

## מטרות הלמידה

• **לזהות** את המטרה המרכזית והתועלות של MCP, A2A ו-NLWeb בהקשר של סוכני בינה מלאכותית.

• **להסביר** כיצד כל פרוטוקול מקל על תקשורת ואינטראקציה בין LLMs, כלים וסוכנים אחרים.

• **להכיר** את התפקידים המובחנים שכל פרוטוקול משחק בבניית מערכות אגנטיות מורכבות.

## פרוטוקול הקשר מודל

**פרוטוקול הקשר מודל (MCP)** הוא תקן פתוח המאפשר אפליקציות לספק הקשר וכלים ל-LLM בצורה מתוקננת. זה מאפשר "מתאם אוניברסלי" למקורות נתונים וכלים שונים שסוכני בינה מלאכותית יכולים להתחבר אליהם באופן עקבי.

בואו נסתכל על מרכיבי MCP, היתרונות לעומת שימוש ישיר ב-API, ודוגמה לאופן שבו סוכני AI עשויים להשתמש בשרת MCP.

### מרכיבי ליבת MCP

MCP פועל על ארכיטקטורת **לקוח-שרת** והמרכיבים המרכזיים הם:

• **מארחים** הם אפליקציות LLM (למשל עורך קוד כמו VSCode) שמתחילים את ההתחברויות לשרת MCP.

• **לקוחות** הם רכיבים בתוך אפליקציית המארח ששומרים על חיבור אחד לאחד עם השרתים.

• **שרתים** הם תוכניות קלות המשקפות יכולות מסוימות.

בפרוטוקול יש שלושה פרימיטיבים מרכזיים שהם היכולות של שרת MCP:

• **כלים**: אלה פעולות או פונקציות נפרדות שסוכן בינה מלאכותית יכול לקרוא כדי לבצע פעולה. לדוגמה, שירות מזג אוויר עשוי להציע כלי "קבל מזג אוויר", או שרת מסחר אלקטרוני עשוי להציע כלי "רכישת מוצר". שרתי MCP מפרסמים את שם הכלי, תיאורו, וסכימת הקלט/פלט ברשימת היכולות.

• **משאבים**: אלו פריטי נתונים או מסמכים לקריאה בלבד ששרת MCP יכול לספק, ולקוחות יכולים לשלוף אותם לפי דרישה. דוגמאות כוללות תכני קבצים, רשומות מסד נתונים או קבצי לוג. משאבים יכולים להיות טקסט (כמו קוד או JSON) או בינאריים (כמו תמונות או PDF).

• **פרומפטים**: תבניות מוגדרות מראש המספקות פרומפטים מוצעים, ומאפשרות זרימות עבודה מורכבות יותר.

### יתרונות MCP

MCP מציע יתרונות משמעותיים לסוכני בינה מלאכותית:

• **גילוי דינמי של כלים**: סוכנים יכולים לקבל באופן דינמי רשימה של כלים זמינים משרת יחד עם תיאורים של מה שהם עושים. זאת בניגוד ל-APIs מסורתיים, שלעיתים דורשים קידוד סטטי לאינטגרציות, מה שדורש עדכוני קוד בכל שינוי. MCP מציע גישה של "שילוב פעם אחת", המובילה ליכולת הסתגלות רבה יותר.

• **אינטרופרביליות בין LLMs שונים**: MCP עובד על פני LLMs שונים, ומאפשר גמישות להחליף מודלים מרכזיים להערכה לטובת ביצועים טובים יותר.

• **אבטחה מתוקננת**: MCP כולל שיטת אימות סטנדרטית, שמשפרת את הסקלאביליות כשמוסיפים גישה לשרתי MCP נוספים. זה פשוט יותר מניהול מפתחות וסוגי אימות שונים עבור APIs מסורתיים.

### דוגמת MCP

![תרשים MCP](../../../translated_images/he/mcp-diagram.e4ca1cbd551444a1.webp)

דמיינו שמשתמש רוצה להזמין טיסה באמצעות עוזר בינה מלאכותית המופעל על ידי MCP.

1. **התחברות**: העוזר (לקוח MCP) מתחבר לשרת MCP של חברת תעופה.

2. **גילוי כלים**: הלקוח שואל את שרת MCP של חברת התעופה, "אילו כלים יש לכם זמינים?" השרת משיב עם כלים כמו "חפש טיסות" ו"הזמן טיסה".

3. **קריאת כלי**: המשתמש מבקש מהעוזר, "בבקשה חפש טיסה מפורטלנד להונולולו." העוזר, באמצעות ה-LLM שלו, מזהה שיש לקרוא לכלי "חפש טיסות" ומעביר את הפרמטרים המתאימים (מקור, יעד) לשרת MCP.

4. **ביצוע ומענה**: שרת MCP, המשמש כעטיפה, מבצע את הקריאה האמיתית ל-API ההזמנות הפנימי של חברת התעופה. הוא מקבל את פרטי הטיסה (למשל במבנה JSON) ושולח אותם חזרה לעוזר.

5. **אינטראקציה נוספת**: העוזר מציג את אפשרויות הטיסה. כאשר המשתמש בוחר טיסה, העוזר עשוי לקרוא לכלי "הזמן טיסה" על אותו שרת MCP, ומשלים את ההזמנה.

## פרוטוקול סוכן אל סוכן (A2A)

בעוד MCP מתמקד בחיבור LLMs לכלים, פרוטוקול **A2A** (סוכן אל סוכן) מקדם צעד נוסף על ידי מתן אפשרות לתקשורת ושיתוף פעולה בין סוכני בינה מלאכותית שונים. A2A מחבר סוכני AI מארגונים, סביבות וערכות טכנולוגיה שונות להשלים משימה משותפת.

נבחן את הרכיבים והיתרונות של A2A, יחד עם דוגמה לאופן שבו ניתן ליישמו באפליקציית הנסיעות שלנו.

### מרכיבי ליבת A2A

A2A מתמקד בהפעלת תקשורת בין סוכנים ובכך לאפשר להם לעבוד יחד להשלמת תת-משימה למשתמש. כל מרכיב בפרוטוקול תורם לכך:

#### כרטיס סוכן

בדומה לאופן שבו שרת MCP משתף רשימת כלים, כרטיס סוכן מכיל:
- שם הסוכן.
- **תיאור המשימות הכלליות** שהוא מבצע.
- **רשימת מיומנויות ספציפיות** עם תיאורים שעוזרים לסוכנים אחרים (או אפילו למשתמשים אנושיים) להבין מתי ולמה ירצו לקרוא לאותו סוכן.
- ה-URL הנוכחי של נקודת הקצה של הסוכן.
- **גרסה** ו**יכולת** של הסוכן כגון תגובות בזרם והתראות דחיפה.

#### מבצע סוכן

מבצע הסוכן אחראי על **העברת ההקשר של שיחת המשתמש לסוכן מרוחק**. הסוכן המרוחק צריך זאת כדי להבין את המשימה שצריך לבצע. בשרת A2A, סוכן משתמש במודל שפה גדול (LLM) משלו לניתוח בקשות נכנסות וביצוע משימות באמצעות הכלים הפנימיים שלו.

#### ארטיפקט

כאשר סוכן מרוחק מסיים את המשימה המבוקשת, תוצר עבודתו נוצר כארטיפקט. ארטיפקט **מכיל את תוצאת עבודת הסוכן**, **תיאור של מה שבוצע**, ו**הקשר טקסטואלי** שנשלח דרך הפרוטוקול. לאחר שליחת האריטפקט, החיבור עם הסוכן המרוחק נסגר עד שיוזמן שוב.

#### תור אירועים

מרכיב זה משמש ל**טיפול בעדכונים והעברת הודעות**. הוא חשוב במיוחד בסביבות הפקה עבור מערכות אגנטיות כדי למנוע סגירת חיבור בין סוכנים לפני סיום המשימה, במיוחד כאשר משך הביצוע יכול להיות ארוך.

### יתרונות A2A

• **שיתוף פעולה משופר**: מאפשר לסוכנים מספקים ופלטפורמות שונות לתקשר, לשתף הקשר ולעבוד יחד, ומקדם אוטומציה רציפה במערכות שלעיתים היו מנותקות.

• **גמישות בבחירת מודל**: כל סוכן A2A יכול לבחור את ה-LLM שבו ישתמש לשירות בקשותיו, מה שמאפשר אופטימיזציה או כוונון מדויק למודל סוכן ספציפי, בניגוד להתחברות יחידה ל-LLM כפי שקיים ב-MCP.

• **אימות מובנה**: האימות משולב ישירות בפרוטוקול A2A, ומספק מסגרת אבטחה חזקה לאינטראקציות בין סוכנים.

### דוגמת A2A

![תרשים A2A](../../../translated_images/he/A2A-Diagram.8666928d648acc26.webp)

נרחיב על תרחיש ההזמנות שלנו, אך הפעם עם A2A.

1. **בקשת משתמש לריבוי סוכנים**: משתמש מתקשר עם לקוח/סוכן A2A בשם "סוכן נסיעות", ואולי אומר: "בבקשה הזמינו טיול שלם להונולולו לשבוע הבא, כולל טיסות, מלון ורכב מושכר".

2. **ניהול על ידי סוכן הנסיעות**: סוכן הנסיעות מקבל את הבקשה המורכבת הזו. הוא משתמש ב-LLM שלו כדי לנתח את המשימה ולקבוע שעליו לתקשר עם סוכנים מקצועיים אחרים.

3. **תקשורת בין סוכנים**: סוכן הנסיעות משתמש בפרוטוקול A2A כדי להתחבר לסוכנים מטהירים, כמו "סוכן חברת תעופה", "סוכן מלונות" ו-"סוכן השכרת רכב" שנבנו על ידי חברות שונות.

4. **ביצוע משימות מיועדות**: סוכן הנסיעות שולח משימות ספציפיות לסוכנים המאומנים (למשל "מצא טיסות להונולולו", "הזמן מלון", "השכר רכב"). כל אחד מסוכנים אלה, שרצים עם ה-LLM שלהם ומשתמשים בכלים פנימיים (שיכולים להיות שרתי MCP בעצמם), מבצע את חלקו בהזמנה.

5. **תגובה מאוחדת**: כאשר כל הסוכנים מסיימים את המשימות, סוכן הנסיעות אוסף את התוצאות (פרטי טיסות, אישורי מלון, הזמנת רכב) ושולח תשובה כוללנית בסגנון שיחה למשתמש.

## Natural Language Web (NLWeb)

אתרי אינטרנט הם כבר זמן רב הדרך העיקרית עבור משתמשים לגשת למידע ולנתונים ברחבי האינטרנט.

בואו נבחן את הרכיבים השונים של NLWeb, יתרונותיה ודוגמה לעבודה של NLWeb באפליקציית הנסיעות שלנו.

### רכיבי NLWeb

- **אפליקציית NLWeb (קוד שירות ליבה)**: המערכת שמעבדת שאלות בשפה טבעית. היא מקשרת בין חלקי הפלטפורמה השונים ליצירת תגובות. ניתן לדמיין אותה כמנוע שמפעיל את תכונות השפה הטבעית של אתר אינטרנט.

- **פרוטוקול NLWeb**: זוהי מערכת כללים בסיסית לאינטראקציה בשפה טבעית עם אתר אינטרנט. היא מחזירה תגובות בפורמט JSON (לעיתים תוך שימוש ב-Schema.org). מטרתה ליצור בסיס פשוט ל"אתר AI", בדומה לאופן שבו HTML איפשר שיתוף מסמכים באינטרנט.

- **שרת MCP (נקודת הקצה של פרוטוקול הקשר מודל)**: כל התקנת NLWeb פועלת גם כשרת MCP. משמעות הדבר היא שהיא יכולה **לשתף כלים (כגון שיטת `ask`) ונתונים** עם מערכות AI אחרות. למעשה, זה הופך את תוכן האתר ויכולותיו לזמינות לסוכני AI, ומאפשר לאתר להפוך לחלק מהמארג האגנטי הרחב.

- **דגמי הטמעה (Embeddings)**: דגמים אלו משמשים ל**המרת תוכן האתר לייצוגים מספריים הנקראים וקטורים** (embeddings). וקטורים אלה לוכדים משמעות בצורה שמחשבים יכולים להשוות ולחפש בה. הם מאוחסנים במסד נתונים מיוחד, והמשתמשים יכולים לבחור איזה דגם הטמעה להפעיל.

- **מסד נתונים וקטורי (מנגנון אחזור)**: מסד זה **מאחסן את ההטמעות של תוכן האתר**. כאשר מישהו שואל שאלה, NLWeb בודק את מסד הנתונים הווקטורי כדי למצוא במהירות את המידע הרלוונטי ביותר. הוא מחזיר רשימה מהירה של תשובות אפשריות, מדורגות לפי דמיון. NLWeb תומך במערכות אחסון וקטוריות שונות כמו Qdrant, Snowflake, Milvus, Azure AI Search ו-Elasticsearch.

### NLWeb בדוגמה

![NLWeb](../../../translated_images/he/nlweb-diagram.c1e2390b310e5fe4.webp)

קחו לדוגמה שוב את אתר ההזמנות שלנו, הפעם מופעל על ידי NLWeb.

1. **טעינת נתונים**: קטלוגי המוצרים הקיימים באתר הנסיעות (למשל, רשימות טיסות, תיאורי מלונות, חבילות טיולים) מעוצבים באמצעות Schema.org או נטענים דרך Feeds כמו RSS. כלים של NLWeb טוענים את הנתונים המובנים, יוצרים הטמעות ושומרים אותם במסד נתונים וקטורי מקומי או מרוחק.

2. **שאילת שפה טבעית (אנושית)**: משתמש נכנס לאתר ומקליד בממשק צ'אט: "מצא לי מלון ידידותי למשפחות בהונולולו עם בריכה לשבוע הבא".

3. **עיבוד NLWeb**: אפליקציית NLWeb מקבלת את השאלה, שולחת אותה ל-LLM להבנה, ובמקביל מחפשת במסד הנתונים הווקטורי אחר רשימות מלונות רלוונטיות.

4. **תוצאות מדויקות**: ה-LLM מפרש את תוצאות החיפוש מתוך המסד, מזהה את ההתאמות הטובות ביותר לפי הקריטריונים "ידידותי למשפחות", "בריכה" ו"הונולולו", ואז מעצב תגובה בשפה טבעית. חשוב, התגובה מתבססת על מלונות אמיתיים מהקטלוג של האתר, ללא המצאות.

5. **אינטראקציית סוכן AI**: מאחר ש-NLWeb פועל כשרת MCP, סוכן נסיעות חיצוני יכול להתחבר למופע NLWeb של האתר. סוכן ה-AI יכול להשתמש בשיטת `ask` של MCP כדי לשאול את האתר ישירות: `ask("האם יש באזור הונולולו מסעדות טבעוניות שמומלצות על ידי המלון?")`. מופע NLWeb יעבד זאת, ישתמש במסד הנתונים של מידע מסעדות (אם נטען) ויחזיר תגובה מובנית ב-JSON.

### יש לכם עוד שאלות לגבי MCP/A2A/NLWeb?

הצטרפו ל-[Microsoft Foundry Discord](https://aka.ms/ai-agents/discord) לפגוש לומדים אחרים, להשתתף בשעות פתוחות ולקבל תשובות לשאלות על סוכני בינה מלאכותית.

## משאבים

- [MCP למתחילים](https://aka.ms/mcp-for-beginners)  
- [תיעוד MCP](https://github.com/microsoft/semantic-kernel/tree/main/python/semantic-kernel/semantic_kernel/connectors/mcp)
- [מאגר NLWeb](https://github.com/nlweb-ai/NLWeb)
- [מדריכי Semantic Kernel](https://learn.microsoft.com/semantic-kernel/)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**הודעת פרישה**:
מסמך זה תורגם באמצעות שירות תרגום מבוסס בינה מלאכותית [Co-op Translator](https://github.com/Azure/co-op-translator). למרות שאנו שואפים לדיוק, נא לשים לב כי תרגומים אוטומטיים עלולים להכיל טעויות או אי דיוקים. המסמך המקורי בשפת המקור שלו הוא המקור המהימן. למידע קריטי מומלץ לתרגם באופן מקצועי על ידי אדם. איננו אחראים לכל אי הבנה או פרשנות שגויה הנובעים משימוש בתרגום זה.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->