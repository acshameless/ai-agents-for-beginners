# זיכרון לסוכני בינה מלאכותית  
[![Agent Memory](../../../translated_images/he/lesson-13-thumbnail.959e3bc52d210c64.webp)](https://youtu.be/QrYbHesIxpw?si=qNYW6PL3fb3lTPMk)

כשמדברים על היתרונות הייחודיים ביצירת סוכני בינה מלאכותית, דנים בעיקר בשני דברים: היכולת לקרוא לכלים לביצוע משימות והיכולת להשתפר עם הזמן. הזיכרון הוא הבסיס ליצירת סוכן המשתפר בעצמו שיכול ליצור חוויות טובות יותר עבור המשתמשים שלנו.

בשיעור זה נבחן מהו זיכרון עבור סוכני בינה מלאכותית ואיך נוכל לנהל אותו ולהשתמש בו לטובת היישומים שלנו.

## מבוא

בשיעור זה נסקור:

• **הבנת זיכרון לסוכני בינה מלאכותית**: מהו זיכרון ולמה הוא חיוני לסוכנים.

• **יישום ואחסון זיכרון**: שיטות מעשיות להוספת יכולות זיכרון לסוכני בינה מלאכותית, תוך התמקדות בזיכרון קצר טווח וארוך טווח.

• **לעשות את הסוכנים משפרי עצמם**: כיצד הזיכרון מאפשר לסוכנים ללמוד מאינטראקציות קודמות ולהשתפר עם הזמן.

## יישומים זמינים

בשיעור זה כלולים שני מדריכים מקיפים בפורמט מחברת:

• **[13-agent-memory.ipynb](./13-agent-memory.ipynb)**: מיישם זיכרון באמצעות Mem0 וחיפוש Azure AI עם מסגרת Semantic Kernel

• **[13-agent-memory-cognee.ipynb](./13-agent-memory-cognee.ipynb)**: מיישם זיכרון מובנה באמצעות Cognee, הבניית גרף ידע בגיבוי אמבדינגים באופן אוטומטי, ויזואליזציה של הגרף ושליפה חכמה

## מטרות הלמידה

בסיום שיעור זה תדע כיצד:

• **להבחין בין סוגי זיכרון שונים לסוכני בינה מלאכותית**, כולל זיכרון עבודה, קצר טווח וארוך טווח, כמו גם סוגים מומחים כגון זיכרון אישיות וזיכרון אפיזודי.

• **ליישם ולנהל זיכרון קצר טווח וארוך טווח לסוכני בינה מלאכותית** באמצעות מסגרת Semantic Kernel, תוך שימוש בכלים כמו Mem0, Cognee, זיכרון לוח לבן, ושילוב עם חיפוש Azure AI.

• **להבין את העקרונות מאחורי סוכנים משפרי עצמם** וכיצד מערכות ניהול זיכרון אמינות תורמות ללמידה ולתאמה מתמשכת.

## הבנת זיכרון לסוכני בינה מלאכותית

בלב זה, **זיכרון לסוכני בינה מלאכותית מתייחס למנגנונים המאפשרים להם לשמור ולשלוף מידע**. מידע זה יכול להיות פרטים ספציפיים על שיחה, העדפות משתמש, פעולות עבר, או אפילו דפוסים שנלמדו.

בלתי אפשרי לפתח יישומי בינה מלאכותית ללא זיכרון, שכן ללא זיכרון, אפליקציות AI הן לעיתים סטטיות, כלומר כל אינטראקציה מתחילה מאפס. זה מוביל לחוויית משתמש חוזרת ומתסכלת שבה הסוכן "שוכח" את ההקשר או ההעדפות הקודמות.

### למה זיכרון חשוב?

החכמה של סוכן קשורה עמוקות ליכולתו לזכור ולנצל מידע מהעבר. הזיכרון מאפשר לסוכנים להיות:

• **רפלקטיביים**: לומדים מפעולות ותוצאות קודמות.

• **אינטראקטיביים**: שומרים על ההקשר לאורך שיחה מתמשכת.

• **פרואקטיביים ותגובותיים**: מצפים לצרכים או מגיבים כראוי בהתבסס על נתונים היסטוריים.

• **אוטונומיים**: פועלים באופן עצמאי יותר על ידי ניצול ידע מאוחסן.

המטרה של יישום הזיכרון היא להפוך את הסוכנים ליותר **אמינים ובעלי יכולת**.

### סוגי זיכרון

#### זיכרון עבודה

חשוב לראות בזה כמו דף רשימות שהסוכן משתמש בו במהלך משימה או תהליך מחשבתי אחד ומתמשך. הוא מחזיק מידע מיידי הנדרש לחישוב הצעד הבא.

עבור סוכני בינה מלאכותית, זיכרון עבודה תופס לעיתים קרובות את המידע הרלוונטי ביותר מהשיחה, אפילו אם היסטוריית השיחה המלאה ארוכה או מקוצרת. הוא מתמקד בהוצאת אלמנטים מרכזיים כמו דרישות, הצעות, החלטות ופעולות.

**דוגמת זיכרון עבודה**

בסוכן להזמנת טיולים, זיכרון העבודה עשוי לתפוס את הבקשה הנוכחית של המשתמש, כמו "אני רוצה להזמין טיול לפריז". דרישה ספציפית זו מוחזקת בהקשר המיידי של הסוכן כדי להנחות את האינטראקציה הנוכחית.

#### זיכרון קצר טווח

סוג זיכרון זה שומר מידע למשך שיחה או מושב יחיד. זה ההקשר של שיחת הצ'אט הנוכחית, המאפשר לסוכן להתייחס חזרה לסבבים קודמים בדיאלוג.

**דוגמת זיכרון קצר טווח**

אם משתמש שואל, "כמה עולה טיסה לפריז?" ואז עוקב עם "מה לגבי לינה שם?", הזיכרון קצר הטווח מבטיח שהסוכן יודע כי "שם" מתייחס ל"פריז" באותה שיחה.

#### זיכרון ארוך טווח

זהו מידע שנשמר לאורך שיחות או מושבים מרובים. הוא מאפשר לסוכנים לזכור העדפות משתמש, אינטראקציות היסטוריות, או ידע כללי לאורך תקופות ממושכות. זה חשוב עבור אישיות.

**דוגמת זיכרון ארוך טווח**

זיכרון ארוך טווח עשוי לשמור ש"בן נהנה מסקי ופעילויות חוץ, אוהב קפה עם נוף להר והוא רוצה להימנע ממרוצי סקי מתקדמים בגלל פציעה קודמת". מידע זה, שנלמד מאינטראקציות קודמות, משפיע על ההמלצות בתכנון טיולים עתידי, מה שהופך אותן לאישיות מאוד.

#### זיכרון אישיות (Persona Memory)

זיכרון מומחה זה מסייע לסוכן לפתח "אישיות" או "פרסונה" עקבית. הוא מאפשר לסוכן לזכור פרטים על עצמו או על התפקיד המיועד לו, מה שהופך אינטראקציות לנוחות וממוקדות יותר.

**דוגמת זיכרון אישיות**  
אם סוכן הטיולים מיועד להיות "מומחה לתכנון סקי", זיכרון האישיות עשוי לחזק תפקיד זה, ולהשפיע על תגובותיו כך שיתאימו לטון וידע של מומחה.

#### זיכרון אפיזודי / של זרימת עבודה (Workflow/Episodic Memory)

זיכרון זה שומר את רצף השלבים שסוכן מבצע במהלך משימה מורכבת, כולל הצלחות וכשלונות. זה כמו לזכור "אפיזודות" ספציפיות או חוויות עבר כדי ללמוד מהן.

**דוגמה לזיכרון אפיזודי**

אם הסוכן ניסה להזמין טיסה מסוימת אך נכשלה בגלל חוסר זמינות, זיכרון אפיזודי יכול לתעד את הכישלון הזה, לאפשר לסוכן לנסות טיסות אלטרנטיביות או ליידע את המשתמש על הבעיה באופן מושכל יותר בניסיון הבא.

#### זיכרון ישויות (Entity Memory)

כאן מדובר בהוצאת זכירת ישויות ספציפיות (כמו אנשים, מקומות, או דברים) ואירועים מתוך שיחות. זה מאפשר לסוכן לבנות הבנה מובנית של אלמנטים מרכזיים שנדונו.

**דוגמה לזיכרון ישויות**

משיחה על טיול עבר, הסוכן עשוי להוציא "פריז," "מגדל אייפל," ו"ארוחת ערב במסעדת לה שא נואר" כישויות. באינטראקציה עתידית, הסוכן יכול לזכור את "לה שא נואר" ולהציע לבצע הזמנה חדשה שם.

#### Structured RAG (יצירת אחזור מונחה מבנה)

בעוד ש-RAG היא טכניקה רחבה יותר, "Structured RAG" מודגשת כטכנולוגיית זיכרון חזקה. היא מוציאה מידע צפוף ומובנה ממקורות שונים (שיחות, אימיילים, תמונות) ומשתמשת בו לשפר דיוק, שליפה ומהירות בתגובות. בניגוד ל-RAG הקלאסי המתבסס אך ורק על דמיון סמנטי, Structured RAG עובדת עם המבנה הטבוע במידע.

**דוגמה ל-Structured RAG**

במקום להתאים מילות מפתח בלבד, Structured RAG יכולה לנתח פרטי טיסה (יעד, תאריך, שעה, חברת תעופה) ממייל ולאחסן אותם באופן מובנה. זה מאפשר שאילתות מדויקות כמו "איזו טיסה הזמנתי לפריז ביום שלישי?"

## יישום ואחסון זיכרון

יישום זיכרון לסוכני בינה מלאכותית כרוך בתהליך שיטתי של **ניהול זיכרון**, הכולל יצירה, אחסון, שליפה, אינטגרציה, עדכון ואף "שכחה" (או מחיקה) של מידע. השליפה היא היבט קריטי במיוחד.

### כלים מיוחדים לזיכרון

#### Mem0

דרך אחת לאחסן ולנהל זיכרון סוכן היא באמצעות כלים מיוחדים כמו Mem0. Mem0 פועל כשכבת זיכרון מתמשכת, המאפשרת לסוכנים לשלוף אינטראקציות רלוונטיות, לשמור העדפות משתמש והקשר עובדות, וללמוד מהצלחות וכישלונות לאורך זמן. הרעיון כאן הוא שסוכנים סטטיים הופכים לסוכנים מדינמיים.

זה פועל באמצעות **צינור זיכרון דו-שלבי: הפקה ועדכון**. ראשית, הודעות שנוספו בחוט השיחה של הסוכן נשלחות לשירות Mem0, המשתמש בדגם שפה גדול (LLM) כדי לסכם את היסטוריית השיחה ולהפיק זיכרונות חדשים. לאחר מכן, בשלב עדכון שמונע גם הוא על ידי LLM נקבע אם להוסיף, לשנות, או למחוק זיכרונות אלו, ואחסון בזיכרון משולב שיכול לכלול בסיסי נתונים וקטוריים, גרפים ומבני מפתח-ערך. מערכת זו גם תומכת בסוגי זיכרון שונים ויכולה לשלב זיכרון גרפי לניהול קשרים בין ישויות.

#### Cognee

גישה חזקה נוספת היא השימוש ב-**Cognee**, זיכרון סמנטי קוד פתוח לסוכני בינה מלאכותית שממיר נתונים מובנים ובלתי מובנים לגרפי ידע ניתנים לשאילתא הנתמכים על ידי אמבדינגים. Cognee מספק ארכיטקטורת דו-חנות שמשלבת חיפוש דמיון וקטורי עם קשרי גרף, המאפשרת לסוכנים להבין לא רק מה דומה במידע, אלא גם כיצד מושגים קשורים זה לזה.

הוא מצטיין ב**שליפה היברידית** המשלבת דמיון וקטורי, מבנה גרף וחשיבה מבוססת LLM - מחיפוש חתיכות גולמיות ועד מענה שאלות מודע גרף. המערכת שומרת על **זיכרון חי** שמתפתח וגדל תוך כדי שנשאר ניתן לשאילתא כגרף מחובר אחד, ותומך גם בהקשר מושב קצר טווח וגם בזיכרון מתמשך ארוך טווח.

המדריך במחברת Cognee ([13-agent-memory-cognee.ipynb](./13-agent-memory-cognee.ipynb)) מדגים בניית שכבת זיכרון מאוחדת זו, עם דוגמאות מעשיות לטעינת מקורות נתונים מגוונים, ויזואליזציה של גרף הידע, ושאילתות עם אסטרטגיות חיפוש שונות המותאמות לצרכי הסוכן הספציפיים.

### אחסון זיכרון עם RAG

מעבר לכלים מיוחדים לזיכרון כגון mem0, ניתן לנצל שירותי חיפוש חזקים כמו **Azure AI Search כאחסון ושליפה של זיכרונות**, במיוחד עבור Structured RAG.

זה מאפשר לך לשרטט את תגובות הסוכן שלך עם הנתונים שלך, ולהבטיח תשובות רלוונטיות ומדויקות יותר. Azure AI Search יכול לשמש לאחסון זיכרונות נסיעות ספציפיים למשתמש, קטלוגי מוצרים, או כל ידע תחומי אחר.

Azure AI Search תומך ביכולות כמו **Structured RAG**, המצטיין בשליפה והפקת מידע צפוף ומובנה ממערכי נתונים גדולים כמו היסטוריית שיחות, אימיילים, ואפילו תמונות. זה מספק "דיוק ושליפה על-אנושיים" בהשוואה לגישות מסורתיות של חלוקת טקסט ואמבדינג.

## להפוך את סוכני הבינה המשפרים עצמם

תבנית נפוצה לסוכנים משפרי עצמם כוללת הכנסת **"סוכן ידע"**. סוכן נפרד זה עוקב אחר השיחה הראשית בין המשתמש לסוכן הראשי. תפקידו הוא:

1. **לאתר מידע בעל ערך**: לקבוע אם חלק מהשיחה ראוי לשמירה כידע כללי או העדפת משתמש ספציפית.

2. **להפיק ולסכם**: לזקק את הלמידה או ההעדפה העיקרית מהשיחה.

3. **לשמור בבסיס ידע**: לשמר מידע זה, לעיתים בבסיס נתונים וקטורי, כדי שניתן יהיה לשלוף אותו מאוחר יותר.

4. **להעשיר שאילתות עתידיות**: כאשר המשתמש יוזם שאילתה חדשה, סוכן הידע מושך את המידע המאוחסן הרלוונטי ומוסיף אותו לפרומפט של המשתמש, לספק הקשר קריטי לסוכן הראשי (בדומה ל-RAG).

### אופטימיזציות לזיכרון

• **ניהול השהייה**: כדי לא להאט את האינטראקציות עם המשתמש, ניתן להשתמש בדגם זול ומהיר בתחילה כדי לבדוק במהירות אם מידע שווה לאחסון או לשליפה, ולהפעיל רק במידת הצורך תהליך הפקה/שליפה מורכב יותר.

• **תחזוקת בסיס הידע**: עבור בסיס ידע שגדל, מידע שמשתמשים בו פחות לעיתים יכול לעבור לאחסון "קר" לניהול עלויות.

## שאלות נוספות על זיכרון סוכנים?

הצטרף ל-[Microsoft Foundry Discord](https://aka.ms/ai-agents/discord) כדי לפגוש לומדים אחרים, להשתתף בשעות משרד ולקבל מענה לשאלותיך על סוכני בינה מלאכותית.

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**כתב שוויון**:  
מסמך זה תורגם באמצעות שירות תרגום מבוסס בינה מלאכותית [Co-op Translator](https://github.com/Azure/co-op-translator). למרות שאנו שואפים לדיוק, יש לקחת בחשבון כי תרגומים אוטומטיים עלולים להכיל שגיאות או אי דיוקים. המסמך המקורי בשפתו המקורית נחשב למקור מוסמך. למידע קריטי מומלץ להיעזר בתרגום מקצועי אנושי. אנו לא נושאים באחריות לכל אי הבנה או פרשנות שגויה הנובעת משימוש בתרגום זה.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->