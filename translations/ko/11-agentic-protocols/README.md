# 에이전틱 프로토콜 사용하기 (MCP, A2A 및 NLWeb)

[![Agentic Protocols](../../../translated_images/ko/lesson-11-thumbnail.b6c742949cf1ce2a.webp)](https://youtu.be/X-Dh9R3Opn8)

> _(위 이미지를 클릭하여 이 강의의 비디오를 시청하세요)_

AI 에이전트 사용이 증가함에 따라 표준화, 보안 및 개방형 혁신을 보장하는 프로토콜의 필요성도 커지고 있습니다. 이 강의에서는 이러한 필요를 충족하기 위해 만들어진 3가지 프로토콜인 모델 컨텍스트 프로토콜(Model Context Protocol, MCP), 에이전트 간 통신(Agent to Agent, A2A) 및 자연어 웹(Natural Language Web, NLWeb)을 다룹니다.

## 소개

이 강의에서는 다음을 다룹니다:

• **MCP**가 AI 에이전트가 외부 도구 및 데이터에 접근하여 사용자 작업을 완료하도록 어떻게 허용하는지.

• **A2A**가 서로 다른 AI 에이전트 간의 통신과 협업을 어떻게 가능하게 하는지.

• **NLWeb**이 자연어 인터페이스를 모든 웹사이트에 적용해 AI 에이전트가 콘텐츠를 찾아내고 상호작용할 수 있게 하는 방법.

## 학습 목표

• AI 에이전트 맥락에서 MCP, A2A, NLWeb의 핵심 목적과 이점을 **식별**합니다.

• 각 프로토콜이 LLM, 도구 및 다른 에이전트 간의 통신과 상호작용을 어떻게 촉진하는지 **설명**합니다.

• 복잡한 에이전틱 시스템을 구축하는 데 각 프로토콜이 수행하는 다양한 역할을 **인식**합니다.

## 모델 컨텍스트 프로토콜

**모델 컨텍스트 프로토콜(MCP)**은 애플리케이션이 LLM에 컨텍스트와 도구를 제공하는 표준화된 방식을 제공하는 오픈 표준입니다. 이를 통해 AI 에이전트가 일관된 방식으로 연결할 수 있는 다양한 데이터 소스 및 도구에 대한 "범용 어댑터"가 가능합니다.

MCP의 구성 요소, 직접 API 사용 대비 장점 및 AI 에이전트가 MCP 서버를 어떻게 활용할 수 있는지 예를 살펴보겠습니다.

### MCP 핵심 구성 요소

MCP는 **클라이언트-서버 아키텍처**로 운영되며 핵심 구성 요소는 다음과 같습니다:

• **호스트(Hosts)**는 MCP 서버에 연결을 시작하는 LLM 애플리케이션(예: VSCode 같은 코드 에디터)입니다.

• **클라이언트(Clients)**는 호스트 애플리케이션 내에서 서버와 일대일 연결을 유지하는 구성요소입니다.

• **서버(Servers)**는 특정 기능을 노출하는 경량 프로그램입니다.

프로토콜에 포함된 세 가지 핵심 원시 기능은 MCP 서버의 기능입니다:

• **도구(Tools)**: AI 에이전트가 호출하여 작업을 수행할 수 있는 개별 작업 또는 함수입니다. 예를 들어, 기상 서비스는 "기상 정보 가져오기" 도구를, 전자상거래 서버는 "상품 구매" 도구를 제공할 수 있습니다. MCP 서버는 각 도구의 이름, 설명 및 입출력 스키마를 기능 목록에 광고합니다.

• **자원(Resources)**: MCP 서버가 제공할 수 있는 읽기 전용 데이터 항목 또는 문서로, 클라이언트는 필요에 따라 이를 검색할 수 있습니다. 예시로는 파일 내용, 데이터베이스 레코드, 로그 파일 등이 있습니다. 자원은 텍스트(코드나 JSON) 또는 바이너리(이미지, PDF 등)여도 됩니다.

• **프롬프트(Prompts)**: 미리 정의된 템플릿으로 제안된 프롬프트를 제공하며, 더 복잡한 작업 흐름을 가능하게 합니다.

### MCP의 장점

MCP는 AI 에이전트에 중요한 이점을 제공합니다:

• **동적 도구 검색**: 에이전트는 서버에서 사용 가능한 도구 목록과 각 도구의 기능 설명을 동적으로 받을 수 있습니다. 이는 통합에 대해 정적인 코딩이 요구되고 API 변경 시 코드 업데이트가 필요한 기존 API와 대조적입니다. MCP는 한 번 통합하면 되는 방식으로 더 큰 적응성을 제공합니다.

• **LLM 간 상호운용성**: MCP는 다양한 LLM에서 동작하여, 더 나은 성능을 위해 핵심 모델을 자유롭게 변경할 수 있는 유연성을 제공합니다.

• **표준화된 보안**: MCP에는 표준 인증 방식이 포함되어 있어, 추가 MCP 서버 접근을 확장할 때 관리가 용이합니다. 이는 다양한 기존 API에서 여러 키와 인증 유형을 관리하는 것보다 간단합니다.

### MCP 예제

![MCP Diagram](../../../translated_images/ko/mcp-diagram.e4ca1cbd551444a1.webp)

사용자가 MCP 기반 AI 어시스턴트를 통해 항공편 예약을 하려는 상황을 상상해보세요.

1. **연결**: AI 어시스턴트(MCP 클라이언트)가 항공사가 제공하는 MCP 서버에 연결합니다.

2. **도구 검색**: 클라이언트가 항공사 MCP 서버에 "사용 가능한 도구가 무엇인가요?"라고 묻습니다. 서버는 "항공편 검색", "항공편 예약"과 같은 도구를 응답합니다.

3. **도구 호출**: 사용자가 AI 어시스턴트에게 "포틀랜드에서 호놀룰루로 가는 항공편을 검색해줘"라고 요청합니다. AI 어시스턴트는 LLM을 사용해 "항공편 검색" 도구를 호출해야 함을 인식하고, 관련 매개변수(출발지, 목적지)를 MCP 서버에 전달합니다.

4. **실행 및 응답**: MCP 서버는 래퍼 역할을 하여 항공사의 내부 예약 API를 실제로 호출합니다. 그런 다음 항공편 정보(e.g., JSON 데이터)를 받아 AI 어시스턴트에 반환합니다.

5. **추가 상호작용**: AI 어시스턴트가 항공편 옵션을 제시합니다. 사용자가 비행편을 선택하면, 어시스턴트는 동일한 MCP 서버에서 "항공편 예약" 도구를 호출하여 예약을 완료할 수 있습니다.

## 에이전트 간 프로토콜 (A2A)

MCP가 LLM을 도구에 연결하는 데 주력하는 반면, **에이전트 간 프로토콜(Agent-to-Agent, A2A)**은 한 단계 더 나아가 서로 다른 AI 에이전트 간의 통신과 협력을 가능하게 합니다. A2A는 서로 다른 조직, 환경, 기술 스택에 있는 AI 에이전트들을 연결하여 공동의 작업을 완수하게 합니다.

소프트웨어 구성 요소와 이점, 그리고 여행 애플리케이션에서 이를 어떻게 적용할 수 있는지 예제를 살펴보겠습니다.

### A2A 핵심 구성 요소

A2A는 에이전트 간 통신과 사용자의 하위 작업 수행을 위한 협업을 지원하는 데 초점을 맞춥니다. 프로토콜의 각 구성 요소는 이를 위해 기여합니다:

#### 에이전트 카드

MCP 서버가 도구 리스트를 공유하는 것과 유사하게, 에이전트 카드는 다음을 포함합니다:
- 에이전트 이름
- 수행하는 일반 작업에 대한 **설명**
- 언제, 왜 해당 에이전트를 호출해야 하는지 이해할 수 있게 돕는 **특정 기술 목록과 설명**
- 에이전트의 **현재 엔드포인트 URL**
- 스트리밍 응답, 푸시 알림 등의 기능을 포함한 **버전** 및 **기능**

#### 에이전트 실행기

에이전트 실행기는 **사용자 채팅의 컨텍스트를 원격 에이전트에 전달하는 역할**을 합니다. 원격 에이전트는 이를 통해 완료해야 할 작업을 이해합니다. A2A 서버에서 에이전트는 자체 LLM을 사용하여 수신 요청을 해석하고 내부 도구를 활용하여 작업을 수행합니다.

#### 아티팩트

원격 에이전트가 요청된 작업을 완료하면, 작업 결과물이 아티팩트로 생성됩니다. 아티팩트는 **에이전트 작업의 결과물**, **완료된 작업에 대한 설명**, 그리고 프로토콜을 통해 전달된 **텍스트 컨텍스트**를 포함합니다. 아티팩트가 전송된 후 원격 에이전트와의 연결은 필요 시까지 종료됩니다.

#### 이벤트 큐

이 구성 요소는 **업데이트 처리와 메시지 전달**에 사용됩니다. 특히 프로덕션의 에이전틱 시스템에서 작업 완료까지 연결이 닫히지 않도록 하는 데 중요합니다. 작업 완료 시간이 길어질 수 있기 때문입니다.

### A2A의 장점

• **향상된 협업**: 서로 다른 공급자와 플랫폼의 에이전트가 상호작용하고 컨텍스트를 공유하며 함께 작업하며, 전통적으로 분리된 시스템 간 원활한 자동화를 가능하게 합니다.

• **모델 선택 유연성**: 각 A2A 에이전트는 요청을 처리할 LLM을 개별 선택할 수 있어, MCP의 일부 시나리오처럼 단일 LLM 연결에 의존하지 않고 각 에이전트에 최적화되거나 미세조정된 모델 사용이 가능합니다.

• **내장 인증**: 인증이 A2A 프로토콜에 직접 통합되어 있어 에이전트 간 상호작용에 강력한 보안 프레임워크를 제공합니다.

### A2A 예제

![A2A Diagram](../../../translated_images/ko/A2A-Diagram.8666928d648acc26.webp)

여행 예약 시나리오를 A2A를 사용하여 확장해 봅시다.

1. **사용자의 멀티 에이전트 요청**: 사용자가 "다음 주 호놀룰루 여행 전체를 예약하고 싶어요, 항공, 호텔, 렌터카 포함해서" 라고 "여행 에이전트" A2A 클라이언트/에이전트에게 요청합니다.

2. **여행 에이전트의 작업 조율**: 여행 에이전트가 이 복잡한 요청을 받고 LLM을 사용해 하위 작업 처리를 위해 어느 에이전트와 상호작용할지 판단합니다.

3. **에이전트 간 통신**: 여행 에이전트는 A2A 프로토콜을 통해 "항공사 에이전트", "호텔 에이전트", "렌터카 에이전트" 등 서로 다른 회사에서 만든 하위 에이전트들과 연결합니다.

4. **위임된 작업 수행**: 여행 에이전트가 하위 에이전트에게 "호놀룰루행 항공편 찾기", "호텔 예약", "렌터카 예약" 등의 특정 작업을 보냅니다. 각 하위 에이전트는 자체 LLM과 도구(자체 MCP 서버일 수도 있음)를 사용해 자신의 업무를 수행합니다.

5. **통합 응답**: 하위 에이전트들이 작업을 완료하면 여행 에이전트는 항공편 세부, 호텔 확인서, 렌터카 예약 정보를 통합하여 사용자에게 채팅 형식으로 종합적인 답변을 보냅니다.

## 자연어 웹 (NLWeb)

웹사이트는 오랫동안 사용자가 인터넷에서 정보와 데이터를 접근하는 주요 수단이었습니다.

NLWeb의 다양한 구성 요소, 장점, 그리고 우리의 여행 애플리케이션을 사용한 NLWeb 작동 예제를 살펴봅시다.

### NLWeb 구성 요소

- **NLWeb 애플리케이션(핵심 서비스 코드)**: 자연어 질문을 처리하는 시스템입니다. 플랫폼의 여러 부분을 연결해 응답을 생성합니다. 웹사이트에서 자연어 기능을 구동하는 **엔진**으로 생각할 수 있습니다.

- **NLWeb 프로토콜**: 웹사이트와 자연어 상호작용을 위한 **기본 규칙 집합**입니다. JSON 포맷(대부분 Schema.org 활용)으로 응답을 반환합니다. HTML이 온라인 문서 공유를 가능하게 한 것처럼, “AI 웹”의 기반이 되기 위한 간단한 토대를 만드는 게 목적입니다.

- **MCP 서버 (모델 컨텍스트 프로토콜 엔드포인트)**: 각 NLWeb 구성은 또한 **MCP 서버** 역할을 합니다. 즉, 다른 AI 시스템과 도구(예: “ask” 메서드) 및 데이터를 **공유**할 수 있습니다. 이를 통해 웹사이트 콘텐츠와 기능을 AI 에이전트가 활용 가능해지며, 사이트가 더 넓은 “에이전트 생태계”의 일부가 됩니다.

- **임베딩 모델**: 웹사이트 콘텐츠를 컴퓨터가 비교하고 검색할 수 있는 숫자 벡터(임베딩)로 변환하는 데 사용되는 모델입니다. 이 벡터들은 의미를 포착하며 특정 데이터베이스에 저장됩니다. 사용자는 원하는 임베딩 모델을 선택할 수 있습니다.

- **벡터 데이터베이스(검색 메커니즘)**: 웹사이트 콘텐츠 임베딩을 저장하는 데이터베이스입니다. 사용자가 질문하면 NLWeb이 벡터 데이터베이스를 검색해 가장 적합한 정보를 빠르게 찾고 유사도에 따라 순위를 매긴 후보답변 목록을 제공합니다. NLWeb은 Qdrant, Snowflake, Milvus, Azure AI Search, Elasticsearch 등 다양한 벡터 저장 시스템과 호환됩니다.

### NLWeb 예제

![NLWeb](../../../translated_images/ko/nlweb-diagram.c1e2390b310e5fe4.webp)

여행 예약 웹사이트가 이번에는 NLWeb으로 구동된다고 상상해 보세요.

1. **데이터 수집**: 여행 사이트의 기존 제품 카탈로그(항공편 목록, 호텔 설명, 투어 패키지 등)가 Schema.org 형식으로 포맷되거나 RSS 피드를 통해 로드됩니다. NLWeb 도구가 이 구조화된 데이터를 받아 임베딩을 생성하고, 로컬 또는 원격 벡터 데이터베이스에 저장합니다.

2. **자연어 질의(사람)**: 사용자가 메뉴를 탐색하는 대신 채팅 인터페이스에 "다음 주 호놀룰루의 수영장 있는 가족 친화적인 호텔을 찾아줘"라고 입력합니다.

3. **NLWeb 처리**: NLWeb 애플리케이션이 질의를 받고 이를 이해하기 위해 LLM에 전달하며, 동시에 벡터 데이터베이스에서 관련 호텔 목록을 검색합니다.

4. **정확한 결과**: LLM은 데이터베이스 검색 결과를 해석해 "가족 친화적", "수영장", "호놀룰루" 기준에 따라 최적의 매치를 식별하고 자연어 응답을 포맷합니다. 중요한 점은 응답이 실제 호텔 카탈로그의 정보를 참조해 허위 정보가 없도록 한다는 것입니다.

5. **AI 에이전트 상호작용**: NLWeb이 MCP 서버 역할도 하기 때문에 외부 AI 여행 에이전트가 이 웹사이트 NLWeb 인스턴스에 연결할 수 있습니다. AI 에이전트는 `ask` MCP 메서드를 사용해 사이트에 직접 질의할 수 있습니다: `ask("호텔에서 추천하는 호놀룰루 지역의 채식주의자 친화 식당 있나요?")`. NLWeb 인스턴스는 데이터베이스의 식당 정보를 활용해 이를 처리하고 구조화된 JSON 응답을 반환합니다.

### MCP/A2A/NLWeb에 대해 더 궁금한 점이 있나요?

[Microsoft Foundry Discord](https://aka.ms/ai-agents/discord)에 참여하여 다른 학습자들과 교류하고 오피스 아워에 참석하며 AI 에이전트 관련 질문에 답을 얻으세요.

## 자료

- [MCP 초보자용](https://aka.ms/mcp-for-beginners)  
- [MCP 문서](https://github.com/microsoft/semantic-kernel/tree/main/python/semantic-kernel/semantic_kernel/connectors/mcp)
- [NLWeb 저장소](https://github.com/nlweb-ai/NLWeb)
- [Semantic Kernel 가이드](https://learn.microsoft.com/semantic-kernel/)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**면책 조항**:  
이 문서는 AI 번역 서비스 [Co-op Translator](https://github.com/Azure/co-op-translator)를 사용하여 번역되었습니다. 정확성을 위해 최선을 다하고 있으나, 자동 번역에는 오류나 부정확한 내용이 포함될 수 있음을 양지해 주시기 바랍니다. 원본 문서의 원어는 권위 있는 출처로 간주되어야 합니다. 중요한 정보의 경우 전문적인 인간 번역을 권장합니다. 본 번역의 사용으로 인한 오해나 잘못된 해석에 대해 당사는 책임을 지지 않습니다.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->