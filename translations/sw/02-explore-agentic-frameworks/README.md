[![Kuchunguza Mifumo ya Mawakala ya AI](../../../translated_images/sw/lesson-2-thumbnail.c65f44c93b8558df.webp)](https://youtu.be/ODwF-EZo_O8?si=1xoy_B9RNQfrYdF7)

> _(Bonyeza picha hapo juu ili kutazama video ya somo hili)_

# Chunguza Mifumo ya Mawakala ya AI

Mifumo ya mawakala ya AI ni jukwaa za programu zilizoundwa ili kurahisisha uundaji, uanzishaji, na usimamizi wa mawakala wa AI. Mifumo hii huwapa watengenezaji vipengele vilivyotengenezwa tayari, uzito wa mawazo, na zana ambazo zinafanya kuwa rahisi kutengeneza mifumo tata ya AI.

Mifumo hii inawasaidia watengenezaji kuzingatia nyanja za kipekee za programu zao kwa kutoa mbinu zilizostandardishwa kwa changamoto za kawaida katika maendeleo ya mawakala wa AI. Zinaboreshwa kwa upanuzi, upatikana, na ufanisi katika ujenzi wa mifumo ya AI.

## Utangulizi 

Somo hili litajumuisha:

- Nini ni Mifumo ya Mawakala ya AI na ni nini inawawezesha watengenezaji kufanikisha?
- Je, timu zinaweza kutumia vipi hizi ili kutengeneza mifano ya awali haraka, kurudia, na kuboresha uwezo wa wakala wao?
- Ni tofauti gani kati ya miundombinu na zana zilizotengenezwa na Microsoft <a href="https://aka.ms/ai-agents/autogen" target="_blank">AutoGen</a>, <a href="https://aka.ms/ai-agents-beginners/semantic-kernel" target="_blank">Semantic Kernel</a>, na <a href="https://aka.ms/ai-agents-beginners/ai-agent-service" target="_blank">Azure AI Agent Service</a>?
- Je, ninaweza kuunganisha zana zangu zilizopo za mfumo wa Azure moja kwa moja, au nahitaji suluhisho huru?
- Huduma ya Azure AI Agents ni nini na inanisadia vipi?

## Malengo ya kujifunza

Malengo ya somo hili ni kukusaidia kuelewa:

- Nafasi ya Mifumo ya Mawakala ya AI katika maendeleo ya AI.
- Jinsi ya kutumia Mifumo ya Mawakala ya AI kujenga mawakala wenye akili.
- Uwezo muhimu unaowezeshwa na Mifumo ya Mawakala ya AI.
- Tofauti kati ya AutoGen, Semantic Kernel, na Azure AI Agent Service.

## Mifumo ya Mawakala ya AI ni nini na inawawezesha watengenezaji kufanya nini?

Mifumo ya jadi ya AI inaweza kukusaidia kuingiza AI katika programu zako na kuboresha programu hizi kwa njia zifuatazo:

- **Ubinafsishaji**: AI inaweza kuchambua tabia na upendeleo wa mtumiaji ili kutoa mapendekezo, yaliyomo, na uzoefu wa kibinafsi.
Mfano: Huduma za kuhamisha kama Netflix hutumia AI kupendekeza sinema na vipindi kulingana na historia ya kutazama, kuboresha ushiriki na kuridhika kwa mtumiaji.
- **Uendeshaji Otomatiki na Ufanisi**: AI inaweza kuendesha shughuli za kurudiwa, kurahisisha mtiririko wa kazi, na kuboresha ufanisi wa operesheni.
Mfano: Programu za huduma kwa wateja hutumia chatbots zenye nguvu za AI kushughulikia maswali ya kawaida, kupunguza muda wa majibu na kuachilia mawakala wa kibinadamu kwa masuala magumu zaidi.
- **Kuboresha Uzoefu wa Mtumiaji**: AI inaweza kuboresha uzoefu wa mtumiaji kwa ujumla kwa kutoa vipengele vya akili kama utambuzi wa sauti, usindikaji wa lugha asilia, na maandishi yanayotabiri.
Mfano: Msaidizi wa mtandao kama Siri na Google Assistant hutumia AI kuelewa na kujibu amri za sauti, kufanya iwe rahisi kwa watumiaji kuwasiliana na vifaa vyao.

### Hilo lote linaonekana vizuri, sivyo? Kwa nini basi tunahitaji Mfumo wa Mawakala wa AI?

Mifumo ya mawakala ya AI inawakilisha kitu zaidi ya mifumo ya kawaida ya AI. Imetengenezwa ili kuwezesha uundaji wa mawakala wenye akili ambao wanaweza kuingiliana na watumiaji, mawakala wengine, na mazingira ili kufikia malengo maalum. Mawakala hawa wanaweza kuonyesha tabia za kujitegemea, kufanya maamuzi, na kuzoea mabadiliko ya mazingira. Tazama baadhi ya uwezo muhimu unaowezeshwa na Mifumo ya Mawakala ya AI:

- **Ushirikiano na Uratibu wa Mawakala**: Wezesha uundaji wa mawakala wengi wa AI ambao wanaweza kufanya kazi pamoja, kuwasiliana, na kuratibu ili kutatua kazi ngumu.
- **Uendeshaji Otomatiki na Usimamizi wa Kazi**: Hutoa mifumo ya kuendesha mtiririko wa kazi zenye hatua nyingi, ugawaji wa kazi, na usimamizi wa kazi unaobadilika kati ya mawakala.
- **Uelewa wa Muktadha na Urekebishaji**: Inawapa mawakala uwezo wa kuelewa muktadha, kuzoea mazingira yanayobadilika, na kufanya maamuzi kulingana na taarifa za wakati halisi.

Kwa muhtasari, mawakala yanakuwezesha kufanya zaidi, kuchukua uendeshaji otomatiki hadi kiwango kinachofuata, na kuunda mifumo yenye akili zaidi inayoweza kuzoea na kujifunza kutoka kwa mazingira yake.

## Jinsi ya kutengeneza muundo wa awali haraka, kurudia, na kuboresha uwezo wa wakala?

Hili ni jukwaa linalohamia kwa kasi, lakini kuna mambo ambayo ni ya kawaida katika Mifumo mingi ya Mawakala ya AI yanayoweza kukusaidia kutengeneza mifano ya awali haraka na kurudia, yaani sehemu za moduli, zana za ushirikiano, na kujifunza kwa wakati halisi. Hebu tuangalie haya:

- **Tumia Komponenti za Moduli**: SDK za AI zinatoa komponenti zilizojengwa tayari kama konekta za AI na kumbukumbu, kuitwa kwa kazi kwa kutumia lugha asilia au plugins za msimbo, templeti za prompt, na zaidi.
- **Tumia Zana za Ushirikiano**: Unda mawakala wenye majukumu na kazi maalum, kuwezesha kujaribu na kuboresha mtiririko wa kazi za ushirikiano.
- **Jifunze kwa Wakati Halisi**: Tekeleza mizunguko ya maoni ambapo mawakala hujifunza kutoka kwa mwingiliano na kurekebisha tabia zao kwa wakati halisi.

### Tumia Komponenti za Moduli

SDK kama Microsoft Semantic Kernel na LangChain hutoa komponenti zilizojengwa tayari kama konekta za AI, templeti za prompt, na usimamizi wa kumbukumbu.

**Jinsi timu zinaweza kutumia hizi**: Timu zinaweza kuchanganya haraka vipengele hivi ili kuunda mfano wa utendakazi bila kuanza kutoka mwanzo, kuwezesha majaribio ya haraka na kurudia.

**Jinsi inavyofanya kazi kwa vitendo**: Unaweza kutumia parser iliyojengwa tayari kutoa taarifa kutoka kwa ingizo la mtumiaji, moduli ya kumbukumbu kuhifadhi na kupata data, na jenereta ya prompt kuingiliana na watumiaji, yote bila kujenga vipengele hivi kutoka mwanzo.

**Mfano wa msimbo**. Tazama mifano ya jinsi unavyoweza kutumia AI Connector iliyojengwa tayari na Semantic Kernel Python na .Net inayotumia auto-function calling ili kupata modeli ijibu ingizo la mtumiaji:

``` python
# Mfano wa Semantic Kernel wa Python

import asyncio
from typing import Annotated

from semantic_kernel.connectors.ai import FunctionChoiceBehavior
from semantic_kernel.connectors.ai.open_ai import AzureChatCompletion, AzureChatPromptExecutionSettings
from semantic_kernel.contents import ChatHistory
from semantic_kernel.functions import kernel_function
from semantic_kernel.kernel import Kernel

# Tafsiri kielekezi cha ChatHistory kushikilia muktadha wa mazungumzo
chat_history = ChatHistory()
chat_history.add_user_message("I'd like to go to New York on January 1, 2025")


# Tafsiri kiendelezi cha mfano chenye kazi ya kuweka tiketi ya safari
class BookTravelPlugin:
    """A Sample Book Travel Plugin"""

    @kernel_function(name="book_flight", description="Book travel given location and date")
    async def book_flight(
        self, date: Annotated[str, "The date of travel"], location: Annotated[str, "The location to travel to"]
    ) -> str:
        return f"Travel was booked to {location} on {date}"

# Tengeneza Kernel
kernel = Kernel()

# Ongeza kiendelezi cha mfano kwenye kitu cha Kernel
kernel.add_plugin(BookTravelPlugin(), plugin_name="book_travel")

# Tafsiri Azure OpenAI AI Connector
chat_service = AzureChatCompletion(
    deployment_name="YOUR_DEPLOYMENT_NAME", 
    api_key="YOUR_API_KEY", 
    endpoint="https://<your-resource>.azure.openai.com/",
)

# Tafsiri mipangilio ya ombi ili kusanidi mfano na uitoaji wa kazi moja kwa moja
request_settings = AzureChatPromptExecutionSettings(function_choice_behavior=FunctionChoiceBehavior.Auto())


async def main():
    # Tuma ombi kwa mfano kwa muktadha uliotolewa wa mazungumzo na mipangilio ya ombi
    # Kernel ina mfano ambao mfano utamuomba kuitekeleza
    response = await chat_service.get_chat_message_content(
        chat_history=chat_history, settings=request_settings, kernel=kernel
    )
    assert response is not None

    """
    Note: In the auto function calling process, the model determines it can invoke the 
    `BookTravelPlugin` using the `book_flight` function, supplying the necessary arguments. 
    
    For example:

    "tool_calls": [
        {
            "id": "call_abc123",
            "type": "function",
            "function": {
                "name": "BookTravelPlugin-book_flight",
                "arguments": "{'location': 'New York', 'date': '2025-01-01'}"
            }
        }
    ]

    Since the location and date arguments are required (as defined by the kernel function), if the 
    model lacks either, it will prompt the user to provide them. For instance:

    User: Book me a flight to New York.
    Model: Sure, I'd love to help you book a flight. Could you please specify the date?
    User: I want to travel on January 1, 2025.
    Model: Your flight to New York on January 1, 2025, has been successfully booked. Safe travels!
    """

    print(f"`{response}`")
    # Mfano wa Jibu la Mfano wa AI: `Katikati ya ndege yako kwenda New York Januari 1, 2025, imethibitishwa kwa mafanikio. Safiri salama! ‚úàÔ∏èüóΩ`

    # Ongeza jibu la mfano kwenye muktadha wa mazungumzo yetu
    chat_history.add_assistant_message(response.content)


if __name__ == "__main__":
    asyncio.run(main())
```
```csharp
// Semantic Kernel C# example

using Microsoft.SemanticKernel;
using Microsoft.SemanticKernel.ChatCompletion;
using System.ComponentModel;
using Microsoft.SemanticKernel.Connectors.AzureOpenAI;

ChatHistory chatHistory = [];
chatHistory.AddUserMessage("I'd like to go to New York on January 1, 2025");

var kernelBuilder = Kernel.CreateBuilder();
kernelBuilder.AddAzureOpenAIChatCompletion(
    deploymentName: "NAME_OF_YOUR_DEPLOYMENT",
    apiKey: "YOUR_API_KEY",
    endpoint: "YOUR_AZURE_ENDPOINT"
);
kernelBuilder.Plugins.AddFromType<BookTravelPlugin>("BookTravel"); 
var kernel = kernelBuilder.Build();

var settings = new AzureOpenAIPromptExecutionSettings()
{
    FunctionChoiceBehavior = FunctionChoiceBehavior.Auto()
};

var chatCompletion = kernel.GetRequiredService<IChatCompletionService>();

var response = await chatCompletion.GetChatMessageContentAsync(chatHistory, settings, kernel);

/*
Behind the scenes, the model recognizes the tool to call, what arguments it already has (location) and (date)
{

"tool_calls": [
    {
        "id": "call_abc123",
        "type": "function",
        "function": {
            "name": "BookTravelPlugin-book_flight",
            "arguments": "{'location': 'New York', 'date': '2025-01-01'}"
        }
    }
]
*/

Console.WriteLine(response.Content);
chatHistory.AddMessage(response!.Role, response!.Content!);

// Example AI Model Response: Your flight to New York on January 1, 2025, has been successfully booked. Safe travels! ‚úàÔ∏èüóΩ

// Define a plugin that contains the function to book travel
public class BookTravelPlugin
{
    [KernelFunction("book_flight")]
    [Description("Book travel given location and date")]
    public async Task<string> BookFlight(DateTime date, string location)
    {
        return await Task.FromResult( $"Travel was booked to {location} on {date}");
    }
}
```

Unaoona kutoka kwa mfano huu jinsi unavyoweza kutumia parser iliyojengwa tayari kutoa taarifa muhimu kutoka kwa ingizo la mtumiaji, kama chanzo, hatima, na tarehe ya ombi la ukodishaji wa ndege. Mbinu hii ya moduli inakuwezesha kuzingatia mantiki ya kiwango cha juu.

### Tumia Zana za Ushirikiano

Mifumo kama CrewAI, Microsoft AutoGen, na Semantic Kernel zinawezesha uundaji wa mawakala wengi wanaoweza kufanya kazi pamoja.

**Jinsi timu zinaweza kutumia hizi**: Timu zinaweza kubuni mawakala wenye majukumu na kazi maalum, kuwezesha kujaribu na kuboresha mtiririko wa kazi za ushirikiano na kuongeza ufanisi wa mfumo kwa ujumla.

**Jinsi inavyofanya kazi kwa vitendo**: Unaweza kuunda timu ya mawakala ambapo kila wakala ana kazi maalum, kama kupata data, uchambuzi, au kufanya maamuzi. Mawakala hawa wanaweza kuwasiliana na kushiriki taarifa ili kufikia lengo la pamoja, kama kujibu swali la mtumiaji au kumalizia kazi.

**Mfano wa msimbo (AutoGen)**:

```python
# kuunda mawakala, kisha unda ratiba ya round robin ambapo wanaweza kufanya kazi pamoja, katika kesi hii kwa mpangilio

# Wakala wa Uhakiki Data
# Wakala wa Uchambuzi wa Data
# Wakala wa Uamuzi

agent_retrieve = AssistantAgent(
    name="dataretrieval",
    model_client=model_client,
    tools=[retrieve_tool],
    system_message="Use tools to solve tasks."
)

agent_analyze = AssistantAgent(
    name="dataanalysis",
    model_client=model_client,
    tools=[analyze_tool],
    system_message="Use tools to solve tasks."
)

# mazungumzo hisha wakati mtumiaji anasema "KUBALI"
termination = TextMentionTermination("APPROVE")

user_proxy = UserProxyAgent("user_proxy", input_func=input)

team = RoundRobinGroupChat([agent_retrieve, agent_analyze, user_proxy], termination_condition=termination)

stream = team.run_stream(task="Analyze data", max_turns=10)
# Tumia asyncio.run(...) unapotekeleza katika script.
await Console(stream)
```

Unaoona katika msimbo uliopita ni jinsi unavyoweza kuunda kazi inayohusisha mawakala wengi wakifanya kazi pamoja kuchambua data. Kila wakala hufanya kazi maalum, na kazi inatekelezwa kwa kuratibu mawakala ili kufikia matokeo yanayotarajiwa. Kwa kuunda mawakala maalum yenye majukumu maalum, unaweza kuboresha ufanisi na utendaji wa kazi.

### Jifunze kwa Wakati Halisi

Mifumo ya juu inatoa uwezo wa uelewa wa muktadha kwa wakati halisi na urekebishaji.

**Jinsi timu zinaweza kutumia hizi**: Timu zinaweza kutekeleza mizunguko ya maoni ambapo mawakala hujifunza kutokana na mwingiliano na kurekebisha tabia zao kwa njia ya mabadiliko, na kusababisha uboreshaji endelevu na kutengenezwa kwa uwezo.

**Jinsi inavyofanya kazi kwa vitendo**: Mawakala wanaweza kuchambua maoni ya watumiaji, data za mazingira, na matokeo ya kazi ili kusasisha hifadhidata yao ya maarifa, kurekebisha algoriti za kufanya maamuzi, na kuboresha utendaji kwa muda. Mchakato huu wa kujifunza kwa kurudia unawawezesha mawakala kuzoea hali zinazobadilika na upendeleo wa watumiaji, na kuongeza ufanisi wa mfumo kwa ujumla.

## Ni tofauti gani kati ya miundombinu AutoGen, Semantic Kernel na Azure AI Agent Service?

Kuna njia nyingi za kulinganisha mifumo hii, lakini hebu tazame baadhi ya tofauti muhimu kwa kuzingatia muundo wao, uwezo, na matumizi yaliyolengwa:

## AutoGen

AutoGen ni mfumo wa chanzo wazi uliotengenezwa na AI Frontiers Lab ya Microsoft Research. Unazingatia programu za *agentic* zinazoendeshwa na matukio na kusambazwa, ukiruhusu LLMs na SLMs nyingi, zana, na mifumo ya kubuni ya mawakala wengi ya juu.

AutoGen imejengwa kuzunguka wazo kuu la mawakala, ambayo ni viumbe vinavyojiendesha ambavyo vinaweza kutambua mazingira yao, kufanya maamuzi, na kuchukua hatua ili kufikia malengo maalum. Mawakala huwasiliana kupitia ujumbe zisizo za wakati mmoja, ukiwawezesha kufanya kazi kwa uhuru na kwa sambamba, na kuongeza upanuzi na ufanisi wa mfumo.

<a href="https://en.wikipedia.org/wiki/Actor_model" target="_blank">Mawakala yanategemea modeli ya aktor</a>. Kwa mujibu wa Wikipedia, aktor ni _kigawo cha msingi cha ujenzi wa hesabu sambamba. Kwa majibu ya ujumbe unaopokelewa, aktor anaweza: kufanya maamuzi ya ndani, kuunda aktor zaidi, kutuma ujumbe zaidi, na kuamua jinsi ya kujibu ujumbe ufuatao unaopokelewa_.

**Matumizi**: Kuendesha utengenezaji wa msimbo kwa njia ya otomatiki, kazi za uchambuzi wa data, na ujenzi wa mawakala maalum kwa kazi za upangaji na utafiti.

Hapa kuna baadhi ya dhana muhimu za msingi za AutoGen:

- **Mawakala**. Wakala ni kiumbe cha programu ambacho:
  - **Huwasiliana kupitia ujumbe**, ujumbe hizi zinaweza kuwa za sinkroni au asinkroni.
  - **Huhifadhi hali yake mwenyewe**, ambayo inaweza kubadilishwa na ujumbe zinazoingia.
  - **Huchukua vitendo** kama mwitikio kwa ujumbe uliopokelewa au mabadiliko katika hali yake. Vitendo hivi vinaweza kubadilisha hali ya wakala na kutoa athari za nje, kama kusasisha kumbukumbu za ujumbe, kutuma ujumbe mpya, kutekeleza msimbo, au kufanya maombi ya API.
    
  Here you have a short code snippet in which you create your own agent with Chat capabilities:

    ```python
    from autogen_agentchat.agents import AssistantAgent
    from autogen_agentchat.messages import TextMessage
    from autogen_ext.models.openai import OpenAIChatCompletionClient


    class MyAgent(RoutedAgent):
        def __init__(self, name: str) -> None:
            super().__init__(name)
            model_client = OpenAIChatCompletionClient(model="gpt-4o")
            self._delegate = AssistantAgent(name, model_client=model_client)
    
        @message_handler
        async def handle_my_message_type(self, message: MyMessageType, ctx: MessageContext) -> None:
            print(f"{self.id.type} received message: {message.content}")
            response = await self._delegate.on_messages(
                [TextMessage(content=message.content, source="user")], ctx.cancellation_token
            )
            print(f"{self.id.type} responded: {response.chat_message.content}")
    ```
    
    Katika msimbo uliotangulia, `MyAgent` imeundwa na inarithi kutoka `RoutedAgent`. Ina mshughulikiaji wa ujumbe unaochapisha yaliyomo ya ujumbe kisha kutuma majibu kwa kutumia delegate `AssistantAgent`. Tambua hasa jinsi tunavyompa `self._delegate` mfano wa `AssistantAgent` ambao ni wakala aliyetengenezwa tayari na anaweza kushughulikia tamati za mazungumzo.


    Tuwarifu AutoGen kuhusu aina hii ya wakala kisha kuanzisha programu ifuatayo:

    ```python
    
    # main.py
    runtime = SingleThreadedAgentRuntime()
    await MyAgent.register(runtime, "my_agent", lambda: MyAgent())

    runtime.start()  # Anza kusindika ujumbe kwa usuli.
    await runtime.send_message(MyMessageType("Hello, World!"), AgentId("my_agent", "default"))
    ```

    Katika msimbo uliopita mawakala wameorodheshwa na runtime kisha ujumbe umetumwa kwa wakala na kusababisha matokeo yafuatayo:

    ```text
    # Output from the console:
    my_agent received message: Hello, World!
    my_assistant received message: Hello, World!
    my_assistant responded: Hello! How can I assist you today?
    ```

- **Mawakala wengi**. AutoGen inasaidia uundaji wa mawakala wengi ambao wanaweza kufanya kazi pamoja kufikia kazi ngumu. Mawakala wanaweza kuwasiliana, kushiriki taarifa, na kuratibu vitendo vyao ili kutatua matatizo kwa ufanisi zaidi. Kuunda mfumo wa mawakala wengi, unaweza kufafanua aina tofauti za mawakala zenye kazi na majukumu maalum, kama uchukuzi wa data, uchambuzi, kufanya maamuzi, na mwingiliano wa mtumiaji. Hebu tuone jinsi uundaji huo unavyoonekana ili tupate hisia ya hilo:

    ```python
    editor_description = "Editor for planning and reviewing the content."

    # Mfano wa kutangaza Wakala
    editor_agent_type = await EditorAgent.register(
    runtime,
    editor_topic_type,  # Kutumia aina ya mada kama aina ya wakala.
    lambda: EditorAgent(
        description=editor_description,
        group_chat_topic_type=group_chat_topic_type,
        model_client=OpenAIChatCompletionClient(
            model="gpt-4o-2024-08-06",
            # api_key="YOUR_API_KEY",
        ),
        ),
    )

    # tamko zilizobaki zimefupishwa kwa ufupi

    # Gumzo la kikundi
    group_chat_manager_type = await GroupChatManager.register(
    runtime,
    "group_chat_manager",
    lambda: GroupChatManager(
        participant_topic_types=[writer_topic_type, illustrator_topic_type, editor_topic_type, user_topic_type],
        model_client=OpenAIChatCompletionClient(
            model="gpt-4o-2024-08-06",
            # api_key="YOUR_API_KEY",
        ),
        participant_descriptions=[
            writer_description, 
            illustrator_description, 
            editor_description, 
            user_description
        ],
        ),
    )
    ```

    Katika msimbo uliopita tuna `GroupChatManager` ambaye ameorodheshwa na runtime. Meneja huyu ndiye anayehusika kuratibu mwingiliano kati ya aina tofauti za mawakala, kama waandishi, wachoraji, wahariri, na watumiaji.

- **Runtime ya Wakala**. Mfumo hutoa mazingira ya runtime, kuruhusu mawasiliano kati ya mawakala, kusimamia utambulisho wao na mizunguko ya maisha, na kutekeleza mipaka ya usalama na faragha. Hii inamaanisha unaweza kuendesha mawakala wako katika mazingira salama na yaliyodhibitiwa, kuhakikisha kuwa wanaweza kuingiliana kwa usalama na kwa ufanisi. Kuna runtimes mbili za kuzingatia:
  - **Runti ya kujitegemea**. Hii ni chaguo zuri kwa programu za mchakato mmoja ambapo mawakala wote yameekelezwa katika lugha ile ile ya programu na yanakimbia katika mchakato huo huo. Here's an illustration of how it works:
  
    <a href="https://microsoft.github.io/autogen/stable/_images/architecture-standalone.svg" target="_blank">Runti ya kujitegemea</a>   
Application stack

    *mawakala huwasiliana kupitia ujumbe kupitia runtime, na runtime husimamia mzunguko wa maisha ya mawakala*

  - **Runti ya kusambazwa**, inafaa kwa programu za mchakato nyingi ambapo mawakala yanaweza kutekelezwa katika lugha tofauti za programu na kukimbia kwenye mashine tofauti. Here's an illustration of how it works:
  
    <a href="https://microsoft.github.io/autogen/stable/_images/architecture-distributed.svg" target="_blank">Runti ya kusambazwa</a>

## Semantic Kernel + Agent Framework

Semantic Kernel ni SDK ya Uandaaji wa AI iliyotengenezwa kwa biashara. Inajumuisha konekta za AI na kumbukumbu, pamoja na Mfumo wa Mawakala.

Tuanze kwa kufunika baadhi ya vipengele vya msingi:

- **AI Connectors**: Hii ni kiolesura na huduma za nje za AI na vyanzo vya data kwa ajili ya matumizi katika Python na C#.

  ```python
  # Kiini cha Maana Python
  from semantic_kernel.connectors.ai.open_ai import AzureChatCompletion
  from semantic_kernel.kernel import Kernel

  kernel = Kernel()
  kernel.add_service(
    AzureChatCompletion(
        deployment_name="your-deployment-name",
        api_key="your-api-key",
        endpoint="your-endpoint",
    )
  )
  ```  

    ```csharp
    // Semantic Kernel C#
    using Microsoft.SemanticKernel;

    // Create kernel
    var builder = Kernel.CreateBuilder();
    
    // Add a chat completion service:
    builder.Services.AddAzureOpenAIChatCompletion(
        "your-resource-name",
        "your-endpoint",
        "your-resource-key",
        "deployment-model");
    var kernel = builder.Build();
    ```

    Hapa una mfano rahisi wa jinsi unavyoweza kuunda kernel na kuongeza huduma ya ukamilisho wa mazungumzo. Semantic Kernel huunda muunganisho kwa huduma ya nje ya AI, katika kesi hii, Azure OpenAI Chat Completion.

- **Plugins**: Hizi zinafunika kazi ambazo programu inaweza kutumia. Kuna plugins zilizotengenezwa tayari na zile zako unazoweza kuunda. Dhana inayohusiana ni "prompt functions." Badala ya kutoa viholela vya lugha asilia kwa kuitwa kwa kazi, unatangaza kazi fulani kwa modeli. Kulingana na muktadha wa mazungumzo uliopo, modeli inaweza kuchagua kuita mojawapo ya kazi hizi ili kumalizia ombi au utafutaji. Hapa kuna mfano:

  ```python
  from semantic_kernel.connectors.ai.open_ai.services.azure_chat_completion import AzureChatCompletion


  async def main():
      from semantic_kernel.functions import KernelFunctionFromPrompt
      from semantic_kernel.kernel import Kernel

      kernel = Kernel()
      kernel.add_service(AzureChatCompletion())

      user_input = input("User Input:> ")

      kernel_function = KernelFunctionFromPrompt(
          function_name="SummarizeText",
          prompt="""
          Summarize the provided unstructured text in a sentence that is easy to understand.
          Text to summarize: {{$user_input}}
          """,
      )

      response = await kernel_function.invoke(kernel=kernel, user_input=user_input)
      print(f"Model Response: {response}")

      """
      Sample Console Output:

      User Input:> I like dogs
      Model Response: The text expresses a preference for dogs.
      """


  if __name__ == "__main__":
    import asyncio
    asyncio.run(main())
  ```

    ```csharp
    var userInput = Console.ReadLine();

    // Define semantic function inline.
    string skPrompt = @"Summarize the provided unstructured text in a sentence that is easy to understand.
                        Text to summarize: {{$userInput}}";
    
    // create the function from the prompt
    KernelFunction summarizeFunc = kernel.CreateFunctionFromPrompt(
        promptTemplate: skPrompt,
        functionName: "SummarizeText"
    );

    //then import into the current kernel
    kernel.ImportPluginFromFunctions("SemanticFunctions", [summarizeFunc]);

    ```

    Hapa, kwanza una templeti ya prompt `skPrompt` ambayo inatoa nafasi kwa mtumiaji kuingiza maandishi, `$userInput`. Kisha unaunda kazi ya kernel `SummarizeText` na kisha kuileta kwenye kernel na jina la plugin `SemanticFunctions`. Kumbuka jina la kazi linalosaidia Semantic Kernel kuelewa kazi hiyo inafanya nini na lini inapaswa kuitwa.

- **Native function**: Pia kuna kazi za asili ambazo mfumo unaweza kuitisha moja kwa moja kutekeleza jukumu. Hapa kuna mfano wa kazi kama hiyo inayopata yaliyomo kutoka kwa faili:

    ```csharp
    public class NativeFunctions {

        [SKFunction, Description("Retrieve content from local file")]
        public async Task<string> RetrieveLocalFile(string fileName, int maxSize = 5000)
        {
            string content = await File.ReadAllTextAsync(fileName);
            if (content.Length <= maxSize) return content;
            return content.Substring(0, maxSize);
        }
    }
    
    //Import native function
    string plugInName = "NativeFunction";
    string functionName = "RetrieveLocalFile";

   //To add the functions to a kernel use the following function
    kernel.ImportPluginFromType<NativeFunctions>();

    ```

- **Memory**:  Inafupisha na kurahisisha usimamizi wa muktadha kwa programu za AI. Wazo la kumbukumbu ni kwamba hii ni kitu ambacho LLM inapaswa kujua. Unaweza kuhifadhi taarifa hizi katika duka la vector ambalo hatimaye linakuwa hifadhidata ya kumbukumbu au hifadhidata ya vector au sawa. Hapa kuna mfano wa hali iliyorahisishwa ambapo *facts* zinaongezwa kwenye kumbukumbu:

    ```csharp
    var facts = new Dictionary<string,string>();
    facts.Add(
        "Azure Machine Learning; https://learn.microsoft.com/azure/machine-learning/",
        @"Azure Machine Learning is a cloud service for accelerating and
        managing the machine learning project lifecycle. Machine learning professionals,
        data scientists, and engineers can use it in their day-to-day workflows"
    );
    
    facts.Add(
        "Azure SQL Service; https://learn.microsoft.com/azure/azure-sql/",
        @"Azure SQL is a family of managed, secure, and intelligent products
        that use the SQL Server database engine in the Azure cloud."
    );
    
    string memoryCollectionName = "SummarizedAzureDocs";
    
    foreach (var fact in facts) {
        await memoryBuilder.SaveReferenceAsync(
            collection: memoryCollectionName,
            description: fact.Key.Split(";")[1].Trim(),
            text: fact.Value,
            externalId: fact.Key.Split(";")[2].Trim(),
            externalSourceName: "Azure Documentation"
        );
    }
    ```

    Mambo haya kisha yanahifadhiwa kwenye mkusanyiko wa kumbukumbu `SummarizedAzureDocs`. Huu ni mfano uliorahisishwa sana, lakini unaweza kuona jinsi unavyoweza kuhifadhi taarifa katika kumbukumbu ili LLM izitumie.

Hivyo ndivyo msingi wa mfumo wa Semantic Kernel; vipi kuhusu Agent Framework?

## Azure AI Agent Service

Azure AI Agent Service ni nyongeza ya karibuni, iliyoletwa kwenye Microsoft Ignite 2024. Inaruhusu ukuzaji na uenezaji wa wakala wa AI kwa kutumia modeli za kubadilika zaidi, kama vile kuita moja kwa moja LLM za chanzo wazi kama Llama 3, Mistral, na Cohere.

Azure AI Agent Service inatoa mbinu madhubuti za usalama wa biashara na njia za uhifadhi data, ikifanya iwe inayofaa kwa programu za biashara.

Inafanya kazi moja kwa moja na mifumo ya upangaji kazi ya wawakala wengi kama AutoGen na Semantic Kernel.

Huduma hii kwa sasa iko katika Public Preview na inasaidia Python na C# kwa ujenzi wa wawakala.

Using Semantic Kernel Python, we can create an Azure AI Agent with a user-defined plugin:

```python
import asyncio
from typing import Annotated

from azure.identity.aio import DefaultAzureCredential

from semantic_kernel.agents import AzureAIAgent, AzureAIAgentSettings, AzureAIAgentThread
from semantic_kernel.contents import ChatMessageContent
from semantic_kernel.contents import AuthorRole
from semantic_kernel.functions import kernel_function


# Tafsiri kiungo cha sampuli kwa sampuli
class MenuPlugin:
    """A sample Menu Plugin used for the concept sample."""

    @kernel_function(description="Provides a list of specials from the menu.")
    def get_specials(self) -> Annotated[str, "Returns the specials from the menu."]:
        return """
        Special Soup: Clam Chowder
        Special Salad: Cobb Salad
        Special Drink: Chai Tea
        """

    @kernel_function(description="Provides the price of the requested menu item.")
    def get_item_price(
        self, menu_item: Annotated[str, "The name of the menu item."]
    ) -> Annotated[str, "Returns the price of the menu item."]:
        return "$9.99"


async def main() -> None:
    ai_agent_settings = AzureAIAgentSettings.create()

    async with (
        DefaultAzureCredential() as creds,
        AzureAIAgent.create_client(
            credential=creds,
            conn_str=ai_agent_settings.project_connection_string.get_secret_value(),
        ) as client,
    ):
        # Unda ufafanuzi wa wakala
        agent_definition = await client.agents.create_agent(
            model=ai_agent_settings.model_deployment_name,
            name="Host",
            instructions="Answer questions about the menu.",
        )

        # Unda Wakala wa AzureAI ukitumia mteja na ufafanuzi wa wakala uliofafanuliwa
        agent = AzureAIAgent(
            client=client,
            definition=agent_definition,
            plugins=[MenuPlugin()],
        )

        # Unda mfululizo wa kushikilia mazungumzo
        # Ikiwa hakuna mfululizo uliotolewa, mfululizo mpya utaundwa
        # na kurudishiwa pamoja na jibu la mwanzo
        thread: AzureAIAgentThread | None = None

        user_inputs = [
            "Hello",
            "What is the special soup?",
            "How much does that cost?",
            "Thank you",
        ]

        try:
            for user_input in user_inputs:
                print(f"# User: '{user_input}'")
                # Ita wakala kwa mfululizo uliotajwa
                response = await agent.get_response(
                    messages=user_input,
                    thread_id=thread,
                )
                print(f"# {response.name}: {response.content}")
                thread = response.thread
        finally:
            await thread.delete() if thread else None
            await client.agents.delete_agent(agent.id)


if __name__ == "__main__":
    asyncio.run(main())
```

### Dhana za msingi

Azure AI Agent Service ina dhana kuu zifuatazo:

- **Agent**. Azure AI Agent Service integrates with Microsoft Foundry. Ndani ya AI Foundry, wakala wa AI hufanya kazi kama microservice "mwerevu" ambayo inaweza kutumika kujibu maswali (RAG), kutekeleza vitendo, au kuendesha taratibu kikamilifu kwa njia ya otomatiki. Inafanikisha hili kwa kuchanganya nguvu za modeli za kizazi cha AI na zana zinazomruhusu kufikia na kuingiliana na vyanzo vya data vya ulimwengu halisi. Hapa kuna mfano wa wakala:

    ```python
    agent = project_client.agents.create_agent(
        model="gpt-4o-mini",
        name="my-agent",
        instructions="You are helpful agent",
        tools=code_interpreter.definitions,
        tool_resources=code_interpreter.resources,
    )
    ```

    Katika mfano huu, wakala ameundwa na modeli `gpt-4o-mini`, jina `my-agent`, na maelekezo `You are helpful agent`. Wakala amepewa zana na rasilimali za kutekeleza majukumu ya tafsiri ya msimbo.

- **Thread and messages**. Thread ni dhana muhimu pia. Inawakilisha mazungumzo au mwingiliano kati ya wakala na mtumiaji. Threads zinaweza kutumika kufuatilia maendeleo ya mazungumzo, kuhifadhi taarifa za muktadha, na kusimamia hali ya mwingiliano. Hapa kuna mfano wa thread:

    ```python
    thread = project_client.agents.create_thread()
    message = project_client.agents.create_message(
        thread_id=thread.id,
        role="user",
        content="Could you please create a bar chart for the operating profit using the following data and provide the file to me? Company A: $1.2 million, Company B: $2.5 million, Company C: $3.0 million, Company D: $1.8 million",
    )
    
    # Ask the agent to perform work on the thread
    run = project_client.agents.create_and_process_run(thread_id=thread.id, agent_id=agent.id)
    
    # Fetch and log all messages to see the agent's response
    messages = project_client.agents.list_messages(thread_id=thread.id)
    print(f"Messages: {messages}")
    ```

    Katika msimbo uliopita, thread imeundwa. Baadaye, ujumbe umetumwa kwa thread. Kwa kuita `create_and_process_run`, wakala anaombwa kufanya kazi kwenye thread. Mwishowe, ujumbe unachukuliwa na kurekodiwa ili kuona jibu la wakala. Ujumbe zinaonyesha maendeleo ya mazungumzo kati ya mtumiaji na wakala. Pia ni muhimu kuelewa kwamba ujumbe zinaweza kuwa za aina tofauti kama maandishi, picha, au faili; kwamba kazi za wakala zinaweza kusababisha kwa mfano picha au jibu la maandishi. Kama msanidi programu, unaweza kutumia taarifa hii kuprosesa zaidi jibu au kuwasilisha kwa mtumiaji.

- **Integrates with other AI frameworks**. Azure AI Agent service inaweza kuingiliana na mifumo mingine kama AutoGen na Semantic Kernel, ambayo inamaanisha unaweza kujenga sehemu ya programu yako katika mojawapo ya mifumo hii na kwa mfano kutumia Agent service kama msimamiaji au unaweza kujenga kila kitu ndani ya Agent service.

**Use Cases**: Azure AI Agent Service imeundwa kwa ajili ya programu za biashara zinazohitaji ulinzi thabiti, uwezo wa kupanuka, na ueneaji wa wakala wa AI.

## Je, ni tofauti gani kati ya mifumo hii?
 
Inaonekana kuna mwingiliano mwingi kati ya mifumo hii, lakini kuna tofauti muhimu kadhaa katika muundo wao, uwezo, na matukio wanayolenga:
 
- **AutoGen**: Ni mfumo wa majaribio unaolenga utafiti wa kisasa kuhusu mifumo ya wawakala wengi. Ni mahali pazuri kwa kufanya majaribio na kutengeneza mifano ya mfumo tata wa wawakala wengi.
- **Semantic Kernel**: Ni maktaba inayotumika katika uzalishaji kwa ajili ya kujenga programu za wakala kwa viwango vya biashara. Inazingatia programu za wakala zinazotegemea matukio na zilizoenea, ikiruhusu LLMs na SLMs nyingi, zana, na mifumo ya muundo ya wakala mmoja/wa wengi.
- **Azure AI Agent Service**: Ni jukwaa na huduma ya uenezaji katika Azure Foundry kwa wawakala. Inatoa ujumuishaji wa uunganisho kwa huduma zinazoungwa mkono na Azure Foundry kama Azure OpenAI, Azure AI Search, Bing Search na utekelezaji wa msimbo.
 
Bado haujaamua ni ipi ya kuchagua?

### Matukio ya Matumizi
 
Tuchunguze kama tunaweza kukusaidia kupitia baadhi ya matukio ya kawaida ya matumizi:
 
> Q: Ninafanya majaribio, kujifunza na kujenga programu za wakala za uthibitisho wa wazo, na nataka kuwa na uwezo wa kujenga na kujaribu haraka
>

>A: AutoGen itakuwa chaguo zuri kwa nafasi hii, kwani inalenga programu za wawakala zinazoendeshwa na matukio, zilizoenea na inaunga mkono mifumo ya kubuni ya wawakala wengi ya kiwango cha juu.

> Q: Je, ni nini kinachofanya AutoGen kuwa chaguo bora kuliko Semantic Kernel na Azure AI Agent Service kwa kesi hii ya matumizi?
>
> A: AutoGen imetengenezwa mahsusi kwa programu zinazoendeshwa na matukio na zilizoenea za wawakala, ikifanya iwe inayofaa kwa kuendeleza uundaji wa msimbo na kazi za uchambuzi wa data. Inatoa zana na uwezo unaohitajika kujenga mifumo tata ya wawakala wengi kwa ufanisi.

>Q: Inaonekana Azure AI Agent Service inaweza kufaa pia hapa, ina zana kwa uundaji wa msimbo na zaidi?

>
> A: Ndiyo, Azure AI Agent Service ni huduma ya jukwaa kwa wawakala na ina uwezo uliojengwa kwa ajili ya modeli nyingi, Azure AI Search, Bing Search na Azure Functions. Inafanya iwe rahisi kujenga wawakala wako katika Foundry Portal na kuwatangaza kwa kiwango kikubwa.
 
> Q: Bado nimeshauliwa, nitumie chaguo moja tu
>
> A: Chaguo nzuri ni kujenga programu yako kwanza katika Semantic Kernel kisha kutumia Azure AI Agent Service kupeleka wakala wako. Njia hii inakuwezesha kuhifadhi kwa urahisi wawakala wako huku ukitumia nguvu ya kujenga mifumo ya wawakala wengi katika Semantic Kernel. Zaidi ya hayo, Semantic Kernel ina kiunganishi katika AutoGen, ikifanya iwe rahisi kutumia mifumo yote miwili pamoja.
 
Tufupishe tofauti kuu katika jedwali:

| Framework | Focus | Core Concepts | Use Cases |
| --- | --- | --- | --- |
| AutoGen | Programu za wawakala zinazoendeshwa na matukio, zilizoenea | Wawakala, Personas, Kazi, Data | Uundaji wa msimbo, kazi za uchambuzi wa data |
| Semantic Kernel | Kuelewa na kuzalisha maudhui ya maandishi yanayofanana na ya kibinadamu | Wawakala, Vipengele vya Moduli, Ushirikiano | Uelewa wa lugha asilia, uundaji wa maudhui |
| Azure AI Agent Service | Modeli zinazobadilika, usalama wa biashara, uundaji wa msimbo, kuitwa kwa zana | Umoduli, Ushirikiano, Uratibu wa Mchakato | Uenezaji wa wawakala wa AI salama, unaoweza kupanuka na wenye kubadilika |

Je, ni matumizi gani kamili kwa kila moja ya mifumo hii?

## Je, naweza kuunganisha zana zangu za mfumo wa Azure moja kwa moja, au nahitaji suluhisho huru?

Jibu ni ndiyo, unaweza kuunganisha zana zako za mfumo wa Azure moja kwa moja hasa na Azure AI Agent Service, hii ni kwa sababu imejengwa kufanya kazi kwa urahisi pamoja na huduma nyingine za Azure. Kwa mfano unaweza kuunganisha Bing, Azure AI Search, na Azure Functions. Pia kuna ujumuishaji wa kina na Microsoft Foundry.

Kwa AutoGen na Semantic Kernel, pia unaweza kuingiliana na huduma za Azure, lakini inaweza kuhitaji uwaitie huduma za Azure kutoka kwenye msimbo wako. Njia nyingine ya kuunganishwa ni kutumia Azure SDKs kuingiliana na huduma za Azure kutoka kwa wawakala wako. Zaidi ya hayo, kama ilivyotajwa, unaweza kutumia Azure AI Agent Service kama msimamiaji kwa wawakala wako waliotengenezwa katika AutoGen au Semantic Kernel ili kupata ufikiaji rahisi wa mfumo wa Azure.

## Sampuli za Msimbo

- Python: [Mfumo wa Wakala](./code_samples/02-python-agent-framework.ipynb)
- .NET: [Mfumo wa Wakala](./code_samples/02-dotnet-agent-framework.md)

## Una Maswali Zaidi kuhusu Mifumo ya Wakala za AI?

Jiunge na [Microsoft Foundry Discord](https://aka.ms/ai-agents/discord) kukutana na wanafunzi wengine, kuhudhuria saa za ofisi na kupata maswali yako kuhusu Wakala za AI yajibiwe.

## Marejeleo

- <a href="https://techcommunity.microsoft.com/blog/azure-ai-services-blog/introducing-azure-ai-agent-service/4298357" target="_blank">Azure Agent Service</a>
- <a href="https://devblogs.microsoft.com/semantic-kernel/microsofts-agentic-ai-frameworks-autogen-and-semantic-kernel/" target="_blank">Semantic Kernel and AutoGen</a>
- <a href="https://learn.microsoft.com/semantic-kernel/frameworks/agent/?pivots=programming-language-python" target="_blank">Semantic Kernel Python Agent Framework</a>
- <a href="https://learn.microsoft.com/semantic-kernel/frameworks/agent/?pivots=programming-language-csharp" target="_blank">Semantic Kernel .Net Agent Framework</a>
- <a href="https://learn.microsoft.com/azure/ai-services/agents/overview" target="_blank">Azure AI Agent service</a>
- <a href="https://techcommunity.microsoft.com/blog/educatordeveloperblog/using-azure-ai-agent-service-with-autogen--semantic-kernel-to-build-a-multi-agen/4363121" target="_blank">Using Azure AI Agent Service with AutoGen / Semantic Kernel to build a multi-agent's solution</a>

## Previous Lesson

[Utangulizi wa Wawakala wa AI na Matukio ya Matumizi yao](../01-intro-to-ai-agents/README.md)

## Next Lesson

[Kuelewa Mifumo ya Ubunifu ya Wakala](../03-agentic-design-patterns/README.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Tamko la kutowajibika**:
Nyaraka hii imetafsiriwa kwa kutumia huduma ya tafsiri ya AI [Co-op Translator](https://github.com/Azure/co-op-translator). Ingawa tunajitahidi kuwa sahihi, tafadhali fahamu kuwa tafsiri za kiotomatiki zinaweza kuwa na makosa au kasoro. Nyaraka ya asili katika lugha yake ya asili inapaswa kuchukuliwa kama chanzo cha kuaminika. Kwa taarifa muhimu, inapendekezwa kutumia tafsiri ya kitaalamu iliyofanywa na mtafsiri mtaalamu wa binadamu. Hatuwajibiki kwa kutoelewana au tafsiri potofu zitokanazo na matumizi ya tafsiri hii.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->