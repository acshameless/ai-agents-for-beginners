[![æ¢ç´¢ AI ä»£ç†æ¡†æ¶](../../../translated_images/zh-HK/lesson-2-thumbnail.c65f44c93b8558df.webp)](https://youtu.be/ODwF-EZo_O8?si=1xoy_B9RNQfrYdF7)

> _(é»æ“Šä¸Šæ–¹åœ–ç‰‡è§€çœ‹æœ¬èª²ç¨‹å½±ç‰‡)_

# æ¢ç´¢ AI ä»£ç†æ¡†æ¶

AI ä»£ç†æ¡†æ¶æ˜¯ç‚ºç°¡åŒ– AI ä»£ç†çš„å‰µå»ºã€éƒ¨ç½²èˆ‡ç®¡ç†è€Œè¨­è¨ˆçš„è»Ÿä»¶å¹³å°ã€‚é€™äº›æ¡†æ¶ç‚ºé–‹ç™¼äººå“¡æä¾›é å»ºçš„å…ƒä»¶ã€æŠ½è±¡å±¤å’Œå·¥å…·ï¼Œå¹«åŠ©ç°¡åŒ–è¤‡é›œ AI ç³»çµ±çš„é–‹ç™¼ã€‚

é€™äº›æ¡†æ¶å”åŠ©é–‹ç™¼äººå“¡èšç„¦æ–¼æ‡‰ç”¨çš„ç¨ç‰¹éƒ¨åˆ†ï¼Œä¸¦æä¾›è§£æ±º AI ä»£ç†é–‹ç™¼ä¸­å¸¸è¦‹æŒ‘æˆ°çš„æ¨™æº–åŒ–æ–¹æ³•ã€‚å®ƒå€‘æå‡ AI ç³»çµ±å»ºç½®çš„å¯æ“´å±•æ€§ã€å¯åŠæ€§å’Œæ•ˆç‡ã€‚

## ä»‹ç´¹

æœ¬èª²å°‡æ¶µè“‹ï¼š

- AI ä»£ç†æ¡†æ¶æ˜¯ä»€éº¼ï¼Ÿå®ƒå€‘èƒ½è®“é–‹ç™¼äººå“¡é”æˆä»€éº¼ç›®æ¨™ï¼Ÿ
- åœ˜éšŠå¦‚ä½•åˆ©ç”¨é€™äº›æ¡†æ¶å¿«é€Ÿå»ºç«‹åŸå‹ã€åè¦†è¿­ä»£ä¸¦æå‡ä»£ç†çš„èƒ½åŠ›ï¼Ÿ
- å¾®è»Ÿçš„ <a href="https://aka.ms/ai-agents/autogen" target="_blank">AutoGen</a>ã€<a href="https://aka.ms/ai-agents-beginners/semantic-kernel" target="_blank">Semantic Kernel</a> å’Œ <a href="https://aka.ms/ai-agents-beginners/ai-agent-service" target="_blank">Azure AI Agent Service</a> æ¡†æ¶èˆ‡å·¥å…·æœ‰ä½•ç•°åŒï¼Ÿ
- æˆ‘å¯ä»¥ç›´æ¥æ•´åˆç¾æœ‰çš„ Azure ç”Ÿæ…‹ç³»å·¥å…·å—ï¼Ÿé‚„æ˜¯éœ€è¦ç¨ç«‹æ–¹æ¡ˆï¼Ÿ
- ä»€éº¼æ˜¯ Azure AI Agents æœå‹™ï¼Ÿå®ƒå¦‚ä½•å¹«åŠ©æˆ‘ï¼Ÿ

## å­¸ç¿’ç›®æ¨™

æœ¬èª²çš„ç›®æ¨™æ˜¯å¹«åŠ©ä½ ç†è§£ï¼š

- AI ä»£ç†æ¡†æ¶åœ¨ AI é–‹ç™¼ä¸­çš„è§’è‰²ã€‚
- å¦‚ä½•åˆ©ç”¨ AI ä»£ç†æ¡†æ¶å»ºæ§‹æ™ºèƒ½ä»£ç†ã€‚
- AI ä»£ç†æ¡†æ¶æ‰€å•Ÿç”¨çš„é—œéµèƒ½åŠ›ã€‚
- AutoGenã€Semantic Kernel å’Œ Azure AI Agent Service ä¹‹é–“çš„å·®ç•°ã€‚

## ä»€éº¼æ˜¯ AI ä»£ç†æ¡†æ¶ï¼Ÿå®ƒå€‘è®“é–‹ç™¼è€…èƒ½åšä»€éº¼ï¼Ÿ

å‚³çµ± AI æ¡†æ¶å¯å”åŠ©ä½ å°‡ AI æ•´åˆé€²æ‡‰ç”¨ç¨‹å¼ï¼Œä¸¦æå‡æ‡‰ç”¨çš„ä»¥ä¸‹æ–¹é¢ï¼š

- **å€‹äººåŒ–**ï¼šAI å¯åˆ†æä½¿ç”¨è€…è¡Œç‚ºå’Œåå¥½ï¼Œæä¾›å€‹äººåŒ–æ¨è–¦ã€å…§å®¹å’Œé«”é©—ã€‚  
  ä¾‹å­ï¼šNetflix ç­‰ä¸²æµæœå‹™æœƒæ ¹æ“šè§€å½±ç´€éŒ„ä½¿ç”¨ AI æ¨è–¦é›»å½±å’Œç¯€ç›®ï¼Œæå‡ç”¨æˆ¶åƒèˆ‡åº¦èˆ‡æ»¿æ„åº¦ã€‚

- **è‡ªå‹•åŒ–èˆ‡æ•ˆç‡**ï¼šAI å¯è‡ªå‹•åŸ·è¡Œé‡è¤‡æ€§ä»»å‹™ã€å„ªåŒ–æµç¨‹ä¸¦æå‡ç‡Ÿé‹æ•ˆç‡ã€‚  
  ä¾‹å­ï¼šå®¢æœæ‡‰ç”¨ç”¨ AI é©…å‹•çš„èŠå¤©æ©Ÿå™¨äººè™•ç†å¸¸è¦‹è©¢å•ï¼Œç¸®çŸ­å›æ‡‰æ™‚é–“ä¸¦è®“äººå·¥ä½œå®¢æœå°ˆæ³¨æ–¼è¼ƒè¤‡é›œå•é¡Œã€‚

- **æå‡ä½¿ç”¨è€…é«”é©—**ï¼šAI å¯æä¾›èªéŸ³è­˜åˆ¥ã€è‡ªç„¶èªè¨€è™•ç†èˆ‡é æ¸¬æ–‡å­—ç­‰æ™ºèƒ½åŠŸèƒ½ï¼Œæå‡æ•´é«”ç”¨æˆ¶é«”é©—ã€‚  
  ä¾‹å­ï¼šSiri å’Œ Google Assistant ç­‰è™›æ“¬åŠ©ç†åˆ©ç”¨ AI ç†è§£ä¸¦å›æ‡‰èªéŸ³æŒ‡ä»¤ï¼Œä½¿ä½¿ç”¨è£ç½®æ›´æ–¹ä¾¿ã€‚

### è½èµ·ä¾†éƒ½å¾ˆå¥½ï¼Œç‚ºä»€éº¼æˆ‘å€‘é‚„éœ€è¦ AI ä»£ç†æ¡†æ¶ï¼Ÿ

AI ä»£ç†æ¡†æ¶ä¸åƒ…åƒ…æ˜¯ä¸€èˆ¬çš„ AI æ¡†æ¶ã€‚å®ƒå€‘æ—¨åœ¨å‰µå»ºèƒ½èˆ‡ä½¿ç”¨è€…ã€å…¶ä»–ä»£ç†åŠç’°å¢ƒäº’å‹•ï¼Œä»¥é”æˆç‰¹å®šç›®æ¨™çš„æ™ºèƒ½ä»£ç†ã€‚é€™äº›ä»£ç†å¯å±•ç¾è‡ªä¸»è¡Œç‚ºã€åšæ±ºç­–ä¸¦é©æ‡‰è®ŠåŒ–æ¢ä»¶ã€‚è®“æˆ‘å€‘ä¾†çœ‹ AI ä»£ç†æ¡†æ¶å•Ÿç”¨çš„ä¸€äº›é—œéµèƒ½åŠ›ï¼š

- **ä»£ç†å”ä½œèˆ‡å”èª¿**ï¼šæ”¯æ´å‰µå»ºå¤šå€‹èƒ½å”åŒå·¥ä½œã€æºé€šèˆ‡å”èª¿ä»¥è§£æ±ºè¤‡é›œä»»å‹™çš„ AI ä»£ç†ã€‚
- **ä»»å‹™è‡ªå‹•åŒ–èˆ‡ç®¡ç†**ï¼šæä¾›è‡ªå‹•åŒ–å¤šæ­¥å·¥ä½œæµç¨‹ã€ä»»å‹™å§”æ´¾èˆ‡ä»£ç†é–“å‹•æ…‹ä»»å‹™ç®¡ç†çš„æ©Ÿåˆ¶ã€‚
- **æƒ…å¢ƒç†è§£èˆ‡é©æ‡‰**ï¼šè³¦äºˆä»£ç†ç†è§£æƒ…å¢ƒã€é©æ‡‰è®ŠåŒ–ç’°å¢ƒä¸¦åŸºæ–¼å³æ™‚è³‡è¨Šåšæ±ºç­–çš„èƒ½åŠ›ã€‚

ç¸½çµä¾†èªªï¼Œä»£ç†è®“ä½ èƒ½åšåˆ°æ›´å¤šã€æ›´é€²ä¸€æ­¥è‡ªå‹•åŒ–ï¼Œå»ºæ§‹æ›´æ™ºèƒ½åŒ–ç³»çµ±ï¼Œèƒ½å¾ç’°å¢ƒä¸­å­¸ç¿’èˆ‡é©æ‡‰ã€‚

## å¦‚ä½•å¿«é€Ÿå»ºç«‹åŸå‹ã€åè¦†è¿­ä»£ä¸¦æå‡ä»£ç†èƒ½åŠ›ï¼Ÿ

é€™é ˜åŸŸå¿«é€Ÿç™¼å±•ï¼Œä½†å¤§å¤šæ•¸ AI ä»£ç†æ¡†æ¶æœ‰ä¸€äº›å…±é€šé»èƒ½å¹«åŠ©ä½ å¿«é€ŸåŸå‹èˆ‡è¿­ä»£ï¼ŒåŒ…å«æ¨¡çµ„å…ƒä»¶ã€å”ä½œå·¥å…·åŠå³æ™‚å­¸ç¿’ã€‚è®“æˆ‘å€‘æ·±å…¥äº†è§£ï¼š

- **ä½¿ç”¨æ¨¡çµ„å…ƒä»¶**ï¼šAI SDK æä¾›é å…ˆæ§‹å»ºçš„å…ƒä»¶ï¼Œå¦‚ AI èˆ‡è¨˜æ†¶é€£æ¥å™¨ã€ä½¿ç”¨è‡ªç„¶èªè¨€æˆ–ç¨‹å¼ç¢¼å¤–æ›çš„å‡½å¼èª¿ç”¨ã€æç¤ºæ¨¡æ¿ç­‰ã€‚
- **å–„ç”¨å”ä½œå·¥å…·**ï¼šè¨­è¨ˆå…·ç‰¹å®šè§’è‰²èˆ‡ä»»å‹™çš„ä»£ç†ï¼Œä½¿å…¶èƒ½æ¸¬è©¦å’Œæ”¹è‰¯å”åŒå·¥ä½œæµç¨‹ã€‚
- **å³æ™‚å­¸ç¿’**ï¼šå¯¦ä½œåé¥‹è¿´åœˆï¼Œè®“ä»£ç†å¾äº’å‹•ä¸­å­¸ç¿’ä¸¦å‹•æ…‹èª¿æ•´è¡Œç‚ºã€‚

### ä½¿ç”¨æ¨¡çµ„å…ƒä»¶

åƒ Microsoft Semantic Kernel å’Œ LangChain é€™é¡ SDK æä¾›é å»ºå…ƒä»¶ï¼Œå¦‚ AI é€£æ¥å™¨ã€æç¤ºæ¨¡æ¿èˆ‡è¨˜æ†¶ç®¡ç†ã€‚

**åœ˜éšŠå¦‚ä½•ä½¿ç”¨é€™äº›å…ƒä»¶**ï¼šåœ˜éšŠå¯å¿«é€Ÿçµ„è£é€™äº›å…ƒä»¶ï¼Œå»ºç«‹åŠŸèƒ½æ€§åŸå‹ï¼Œçœå»å¾é›¶é–‹å§‹çš„æ™‚é–“ï¼Œä¿ƒé€²å¿«é€Ÿå¯¦é©—èˆ‡è¿­ä»£ã€‚

**å¯¦éš›ä½œæ³•**ï¼šä½ å¯ä»¥ç”¨é å»ºçš„è§£æå™¨å¾ä½¿ç”¨è€…è¼¸å…¥ä¸­æ“·å–è³‡è¨Šï¼Œä½¿ç”¨è¨˜æ†¶æ¨¡çµ„å­˜å–è³‡æ–™ï¼ŒåŠç”¨æç¤ºç”¢ç”Ÿå™¨èˆ‡ä½¿ç”¨è€…äº’å‹•ï¼Œå…¨ç„¡é ˆè‡ªå·±å»ºç«‹é€™äº›å…ƒä»¶ã€‚

**ç¯„ä¾‹ç¨‹å¼ç¢¼**ã€‚ä»¥ä¸‹å±•ç¤ºå¦‚ä½•ä½¿ç”¨ Semantic Kernel Python å’Œ .Net ç‰ˆçš„é å»º AI é€£æ¥å™¨ï¼Œåˆ©ç”¨è‡ªå‹•å‡½å¼èª¿ç”¨è®“æ¨¡å‹å›æ‡‰ä½¿ç”¨è€…è¼¸å…¥ï¼š

``` python
# Semantic Kernel Python ç¯„ä¾‹

import asyncio
from typing import Annotated

from semantic_kernel.connectors.ai import FunctionChoiceBehavior
from semantic_kernel.connectors.ai.open_ai import AzureChatCompletion, AzureChatPromptExecutionSettings
from semantic_kernel.contents import ChatHistory
from semantic_kernel.functions import kernel_function
from semantic_kernel.kernel import Kernel

# å®šç¾©ä¸€å€‹ ChatHistory ç‰©ä»¶ä»¥å„²å­˜å°è©±çš„ä¸Šä¸‹æ–‡
chat_history = ChatHistory()
chat_history.add_user_message("I'd like to go to New York on January 1, 2025")


# å®šç¾©ä¸€å€‹ç¯„ä¾‹æ’ä»¶ï¼Œå…§å«ç”¨æ–¼é è¨‚æ—…ç¨‹çš„å‡½æ•¸
class BookTravelPlugin:
    """A Sample Book Travel Plugin"""

    @kernel_function(name="book_flight", description="Book travel given location and date")
    async def book_flight(
        self, date: Annotated[str, "The date of travel"], location: Annotated[str, "The location to travel to"]
    ) -> str:
        return f"Travel was booked to {location} on {date}"

# å»ºç«‹ Kernel
kernel = Kernel()

# å°‡ç¯„ä¾‹æ’ä»¶æ–°å¢åˆ° Kernel ç‰©ä»¶
kernel.add_plugin(BookTravelPlugin(), plugin_name="book_travel")

# å®šç¾© Azure OpenAI AI é€£æ¥å™¨
chat_service = AzureChatCompletion(
    deployment_name="YOUR_DEPLOYMENT_NAME", 
    api_key="YOUR_API_KEY", 
    endpoint="https://<your-resource>.azure.openai.com/",
)

# å®šç¾©è«‹æ±‚è¨­å®šä»¥é…ç½®æ¨¡å‹ä¸¦å•Ÿç”¨è‡ªå‹•å‡½æ•¸å‘¼å«
request_settings = AzureChatPromptExecutionSettings(function_choice_behavior=FunctionChoiceBehavior.Auto())


async def main():
    # é‡å°çµ¦å®šçš„èŠå¤©æ­·å²å’Œè«‹æ±‚è¨­å®šå‘æ¨¡å‹ç™¼å‡ºè«‹æ±‚
    # Kernel åŒ…å«æ¨¡å‹æœƒè«‹æ±‚èª¿ç”¨çš„ç¯„ä¾‹
    response = await chat_service.get_chat_message_content(
        chat_history=chat_history, settings=request_settings, kernel=kernel
    )
    assert response is not None

    """
    Note: In the auto function calling process, the model determines it can invoke the 
    `BookTravelPlugin` using the `book_flight` function, supplying the necessary arguments. 
    
    For example:

    "tool_calls": [
        {
            "id": "call_abc123",
            "type": "function",
            "function": {
                "name": "BookTravelPlugin-book_flight",
                "arguments": "{'location': 'New York', 'date': '2025-01-01'}"
            }
        }
    ]

    Since the location and date arguments are required (as defined by the kernel function), if the 
    model lacks either, it will prompt the user to provide them. For instance:

    User: Book me a flight to New York.
    Model: Sure, I'd love to help you book a flight. Could you please specify the date?
    User: I want to travel on January 1, 2025.
    Model: Your flight to New York on January 1, 2025, has been successfully booked. Safe travels!
    """

    print(f"`{response}`")
    # ç¤ºä¾‹ AI æ¨¡å‹å›æ‡‰: `ä½ å·²æˆåŠŸé è¨‚ 2025 å¹´ 1 æœˆ 1 æ—¥é£›å¾€ç´ç´„çš„èˆªç­ã€‚ç¥æ—…é€”å¹³å®‰ï¼âœˆï¸ğŸ—½`

    # å°‡æ¨¡å‹çš„å›æ‡‰æ–°å¢åˆ°æˆ‘å€‘çš„èŠå¤©æ­·å²ä¸Šä¸‹æ–‡ä¸­
    chat_history.add_assistant_message(response.content)


if __name__ == "__main__":
    asyncio.run(main())
```
```csharp
// Semantic Kernel C# example

using Microsoft.SemanticKernel;
using Microsoft.SemanticKernel.ChatCompletion;
using System.ComponentModel;
using Microsoft.SemanticKernel.Connectors.AzureOpenAI;

ChatHistory chatHistory = [];
chatHistory.AddUserMessage("I'd like to go to New York on January 1, 2025");

var kernelBuilder = Kernel.CreateBuilder();
kernelBuilder.AddAzureOpenAIChatCompletion(
    deploymentName: "NAME_OF_YOUR_DEPLOYMENT",
    apiKey: "YOUR_API_KEY",
    endpoint: "YOUR_AZURE_ENDPOINT"
);
kernelBuilder.Plugins.AddFromType<BookTravelPlugin>("BookTravel"); 
var kernel = kernelBuilder.Build();

var settings = new AzureOpenAIPromptExecutionSettings()
{
    FunctionChoiceBehavior = FunctionChoiceBehavior.Auto()
};

var chatCompletion = kernel.GetRequiredService<IChatCompletionService>();

var response = await chatCompletion.GetChatMessageContentAsync(chatHistory, settings, kernel);

/*
Behind the scenes, the model recognizes the tool to call, what arguments it already has (location) and (date)
{

"tool_calls": [
    {
        "id": "call_abc123",
        "type": "function",
        "function": {
            "name": "BookTravelPlugin-book_flight",
            "arguments": "{'location': 'New York', 'date': '2025-01-01'}"
        }
    }
]
*/

Console.WriteLine(response.Content);
chatHistory.AddMessage(response!.Role, response!.Content!);

// Example AI Model Response: Your flight to New York on January 1, 2025, has been successfully booked. Safe travels! âœˆï¸ğŸ—½

// Define a plugin that contains the function to book travel
public class BookTravelPlugin
{
    [KernelFunction("book_flight")]
    [Description("Book travel given location and date")]
    public async Task<string> BookFlight(DateTime date, string location)
    {
        return await Task.FromResult( $"Travel was booked to {location} on {date}");
    }
}
```
  
é€™å€‹ç¯„ä¾‹å±•ç¤ºå¦‚ä½•åˆ©ç”¨é å»ºè§£æå™¨å¾ä½¿ç”¨è€…è¼¸å…¥æ“·å–é—œéµè³‡è¨Šï¼Œå¦‚èˆªç­è¨‚ç¥¨çš„èµ·é»ã€ç›®çš„åœ°èˆ‡æ—¥æœŸã€‚æ­¤æ¨¡çµ„åŒ–æ–¹æ³•è®“ä½ èƒ½å°ˆæ³¨æ–¼é«˜éšé‚è¼¯ã€‚

### åˆ©ç”¨å”ä½œå·¥å…·

åƒ CrewAIã€Microsoft AutoGen å’Œ Semantic Kernel çš„æ¡†æ¶ï¼Œæ–¹ä¾¿å‰µå»ºå¤šä»£ç†ç³»çµ±å…±åŒå”ä½œã€‚

**åœ˜éšŠå¦‚ä½•é‹ç”¨**ï¼šè¨­è¨ˆå…·ç‰¹å®šè§’è‰²åŠä»»å‹™çš„ä»£ç†ï¼Œè®“ä»–å€‘èƒ½æ¸¬è©¦ã€å„ªåŒ–å”ä½œæµç¨‹ï¼Œæå‡æ•´é«”ç³»çµ±æ•ˆç‡ã€‚

**å¯¦éš›æ¡ˆä¾‹**ï¼šä½ å¯ä»¥å»ºç«‹ä¸€çµ„ä»£ç†åœ˜éšŠï¼Œæ¯å€‹ä»£ç†å°ˆå¸è³‡æ–™æ“·å–ã€åˆ†ææˆ–æ±ºç­–ç­‰åŠŸèƒ½ã€‚ä»£ç†é–“å¯æºé€šåˆ†äº«è³‡è¨Šï¼Œå…±åŒå®Œæˆä½¿ç”¨è€…æŸ¥è©¢æˆ–ä»»å‹™ã€‚

**ç¯„ä¾‹ç¨‹å¼ç¢¼ (AutoGen)**ï¼š

```python
# å»ºç«‹ä»£ç†äººï¼Œç„¶å¾Œå»ºç«‹ä¸€å€‹è¼ªæµæ’ç¨‹è®“å®ƒå€‘å”åŒå·¥ä½œï¼Œåœ¨é€™å€‹ä¾‹å­ä¸­æŒ‰é †åº

# è³‡æ–™æ“·å–ä»£ç†äºº
# è³‡æ–™åˆ†æä»£ç†äºº
# æ±ºç­–ä»£ç†äºº

agent_retrieve = AssistantAgent(
    name="dataretrieval",
    model_client=model_client,
    tools=[retrieve_tool],
    system_message="Use tools to solve tasks."
)

agent_analyze = AssistantAgent(
    name="dataanalysis",
    model_client=model_client,
    tools=[analyze_tool],
    system_message="Use tools to solve tasks."
)

# ç•¶ä½¿ç”¨è€…èªªã€ŒAPPROVEã€æ™‚ï¼Œå°è©±çµæŸ
termination = TextMentionTermination("APPROVE")

user_proxy = UserProxyAgent("user_proxy", input_func=input)

team = RoundRobinGroupChat([agent_retrieve, agent_analyze, user_proxy], termination_condition=termination)

stream = team.run_stream(task="Analyze data", max_turns=10)
# åœ¨è…³æœ¬ä¸­åŸ·è¡Œæ™‚ä½¿ç”¨ asyncio.run(...)
await Console(stream)
```
  
ä¸Šä¾‹å±•ç¤ºå¦‚ä½•å‰µå»ºéœ€å¤šå€‹ä»£ç†å”åŒåˆ†æè³‡æ–™çš„ä»»å‹™ã€‚æ¯å€‹ä»£ç†åŸ·è¡Œå°ˆé–€åŠŸèƒ½ï¼Œç³»çµ±é€éå”èª¿ä»£ç†å¯¦ä½œè©²ä»»å‹™ã€‚å°ˆè²¬ä»£ç†è®“ä»»å‹™æ›´æœ‰æ•ˆç‡èˆ‡è¡¨ç¾æ›´ä½³ã€‚

### å³æ™‚å­¸ç¿’

é€²éšæ¡†æ¶æä¾›å³æ™‚æƒ…å¢ƒç†è§£èˆ‡é©æ‡‰çš„èƒ½åŠ›ã€‚

**åœ˜éšŠå¦‚ä½•æ‡‰ç”¨**ï¼šå¯¦ä½œè®“ä»£ç†å¾äº’å‹•ä¸­å­¸ç¿’ã€å‹•æ…‹èª¿æ•´è¡Œç‚ºçš„åé¥‹è¿´åœˆï¼Œä»¥æŒçºŒæå‡èˆ‡å„ªåŒ–èƒ½åŠ›ã€‚

**å¯¦éš›æ‡‰ç”¨**ï¼šä»£ç†æœƒåˆ†æä½¿ç”¨è€…å›é¥‹ã€ç’°å¢ƒæ•¸æ“šåŠä»»å‹™çµæœï¼Œæ›´æ–°çŸ¥è­˜åº«ã€èª¿æ•´æ±ºç­–æ¼”ç®—æ³•ï¼Œä¸¦éš¨æ™‚é–“æå‡è¡¨ç¾ã€‚é€éæŒçºŒå­¸ç¿’ï¼Œä»£ç†èƒ½é©æ‡‰è®ŠåŒ–ç’°å¢ƒèˆ‡ä½¿ç”¨è€…åå¥½ï¼Œå¢å¼·ç³»çµ±æ•´é«”æ•ˆèƒ½ã€‚

## AutoGenã€Semantic Kernel å’Œ Azure AI Agent Service ä¸‰è€…æœ‰ä½•å·®ç•°ï¼Ÿ

æ¡†æ¶æ¯”è¼ƒæœ‰å¤šç¨®æ–¹å¼ï¼Œé€™è£¡èšç„¦å…¶è¨­è¨ˆã€èƒ½åŠ›å’Œç›®æ¨™ç”¨ä¾‹ä¸Šçš„é—œéµå·®ç•°ï¼š

## AutoGen

AutoGen æ˜¯å¾®è»Ÿç ”ç©¶é™¢ AI Frontiers Lab é–‹ç™¼çš„é–‹æºæ¡†æ¶ã€‚å®ƒå°ˆæ³¨æ–¼äº‹ä»¶é©…å‹•çš„åˆ†æ•£å¼ *Agentic* æ‡‰ç”¨ï¼Œæ”¯æŒå¤šå€‹å¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMsï¼‰å’Œå°å‹èªè¨€æ¨¡å‹ï¼ˆSLMsï¼‰ã€å·¥å…·åŠå…ˆé€²çš„å¤šä»£ç†è¨­è¨ˆæ¨¡å¼ã€‚

AutoGen æ ¸å¿ƒåœç¹ä»£ç†çš„æ¦‚å¿µï¼Œä»£ç†ç‚ºè‡ªä¸»å¯¦é«”ï¼Œèƒ½æ„ŸçŸ¥ç’°å¢ƒï¼Œåšæ±ºç­–ä¸¦è¡Œå‹•ä»¥é”æˆç‰¹å®šç›®æ¨™ã€‚ä»£ç†é€ééåŒæ­¥è¨Šæ¯æºé€šï¼Œä½¿å…¶èƒ½ç¨ç«‹ä¸¦è¡Œå·¥ä½œï¼Œæå‡ç³»çµ±æ“´å±•æ€§åŠéŸ¿æ‡‰é€Ÿåº¦ã€‚

<a href="https://en.wikipedia.org/wiki/Actor_model" target="_blank">ä»£ç†åŸºæ–¼æ¼”å“¡æ¨¡å‹ (actor model)</a>ã€‚ç¶­åŸºç™¾ç§‘æŒ‡å‡ºï¼Œæ¼”å“¡æ˜¯ _ä¸¦è¡Œè¨ˆç®—çš„åŸºæœ¬æ§‹å»ºå–®å…ƒã€‚é‡å°æ”¶åˆ°çš„è¨Šæ¯ï¼Œæ¼”å“¡å¯åšå‡ºæœ¬åœ°æ±ºç­–ã€å»ºç«‹æ›´å¤šæ¼”å“¡ã€å‚³é€è¨Šæ¯ï¼Œä¸¦æ±ºå®šå¦‚ä½•å›æ‡‰ä¸‹ä¸€å€‹è¨Šæ¯_ã€‚

**æ‡‰ç”¨å ´æ™¯**ï¼šè‡ªå‹•åŒ–ç¨‹å¼ç¢¼ç”Ÿæˆã€è³‡æ–™åˆ†æä»»å‹™åŠå»ºæ§‹è‡ªè¨‚è¦åŠƒå’Œç ”ç©¶ç”¨ä»£ç†ã€‚

AutoGen çš„æ ¸å¿ƒæ¦‚å¿µï¼š

- **ä»£ç†**ã€‚ä»£ç†æ˜¯ä¸€å€‹è»Ÿä»¶å¯¦é«”ï¼Œå…·æœ‰ï¼š
  - **é€éè¨Šæ¯æºé€š**ï¼Œè¨Šæ¯å¯åŒæ­¥æˆ–éåŒæ­¥ã€‚
  - **ç¶­è­·è‡ªèº«ç‹€æ…‹**ï¼Œä¸¦å¯é€éè¨Šæ¯ä¿®æ”¹ç‹€æ…‹ã€‚
  - **æ ¹æ“šæ¥æ”¶è¨Šæ¯æˆ–ç‹€æ…‹è®ŠåŒ–åŸ·è¡Œè¡Œç‚º**ï¼Œé€™äº›è¡Œç‚ºå¯èƒ½ä¿®æ”¹ä»£ç†ç‹€æ…‹ä¸¦ç”¢ç”Ÿå¤–éƒ¨æ•ˆæœï¼Œå¦‚æ›´æ–°è¨Šæ¯æ—¥èªŒã€å‚³é€æ–°è¨Šæ¯ã€åŸ·è¡Œç¨‹å¼ç¢¼æˆ–å‘¼å« APIã€‚
    
  ä»¥ä¸‹æ˜¯ä¸€æ®µå»ºç«‹å…·èŠå¤©åŠŸèƒ½ä»£ç†çš„ç°¡çŸ­ç¨‹å¼ç¢¼ç¯„ä¾‹ï¼š

    ```python
    from autogen_agentchat.agents import AssistantAgent
    from autogen_agentchat.messages import TextMessage
    from autogen_ext.models.openai import OpenAIChatCompletionClient


    class MyAgent(RoutedAgent):
        def __init__(self, name: str) -> None:
            super().__init__(name)
            model_client = OpenAIChatCompletionClient(model="gpt-4o")
            self._delegate = AssistantAgent(name, model_client=model_client)
    
        @message_handler
        async def handle_my_message_type(self, message: MyMessageType, ctx: MessageContext) -> None:
            print(f"{self.id.type} received message: {message.content}")
            response = await self._delegate.on_messages(
                [TextMessage(content=message.content, source="user")], ctx.cancellation_token
            )
            print(f"{self.id.type} responded: {response.chat_message.content}")
    ```
    
    ä¸Šè¿°ç¨‹å¼ç¢¼ä¸­ï¼Œ`MyAgent` ç¹¼æ‰¿è‡ª `RoutedAgent`ã€‚å®ƒçš„è¨Šæ¯è™•ç†å™¨æœƒè¼¸å‡ºè¨Šæ¯å…§å®¹ï¼Œç„¶å¾Œç”¨ `AssistantAgent` å§”æ´¾ç™¼é€å›æ‡‰ã€‚ç‰¹åˆ¥æ³¨æ„ `self._delegate` è¢«è¨­å®šç‚º `AssistantAgent` å¯¦ä¾‹ï¼Œé€™æ˜¯é å»ºç”¨ä¾†è™•ç†èŠå¤©å®Œæˆçš„ä»£ç†ã€‚

    
    æ¥è‘—è®“ AutoGen è¨»å†Šé€™ä»£ç†é¡å‹ä¸¦å•Ÿå‹•ç¨‹å¼ï¼š

    ```python
    
    # main.py
    runtime = SingleThreadedAgentRuntime()
    await MyAgent.register(runtime, "my_agent", lambda: MyAgent())

    runtime.start()  # åœ¨èƒŒæ™¯é–‹å§‹è™•ç†è¨Šæ¯ã€‚
    await runtime.send_message(MyMessageType("Hello, World!"), AgentId("my_agent", "default"))
    ```

    å…ˆå‰ç¨‹å¼ç¢¼ä¸­ï¼Œä»£ç†è¢«è¨»å†Šè‡³åŸ·è¡Œç’°å¢ƒï¼Œæ¥è‘—ç™¼é€è¨Šæ¯çµ¦ä»£ç†ï¼Œç”¢ç”Ÿä»¥ä¸‹è¼¸å‡ºï¼š

    ```text
    # Output from the console:
    my_agent received message: Hello, World!
    my_assistant received message: Hello, World!
    my_assistant responded: Hello! How can I assist you today?
    ```

- **å¤šä»£ç†ç³»çµ±**ã€‚AutoGen æ”¯æ´å¤šå€‹ä»£ç†å”åŒå®Œæˆè¤‡é›œä»»å‹™ã€‚ä»£ç†é–“å¯æºé€šã€å…±äº«è³‡è¨ŠåŠå”èª¿è¡Œå‹•ï¼Œæ›´é«˜æ•ˆè§£æ±ºå•é¡Œã€‚ä½ å¯ä»¥å®šç¾©å…·ä¸åŒå°ˆé•·èˆ‡è§’è‰²çš„ä»£ç†ï¼Œä¾‹å¦‚è³‡æ–™æª¢ç´¢ã€åˆ†æã€æ±ºç­–åŠä½¿ç”¨è€…äº’å‹•ã€‚ä»¥ä¸‹çœ‹ä¸€å€‹å¯¦ä¾‹ï¼š

    ```python
    editor_description = "Editor for planning and reviewing the content."

    # ç¤ºç¯„å¦‚ä½•å®£å‘Šä¸€å€‹ Agent
    editor_agent_type = await EditorAgent.register(
    runtime,
    editor_topic_type,  # ä½¿ç”¨ topic é¡å‹ä½œç‚º agent çš„é¡å‹ã€‚
    lambda: EditorAgent(
        description=editor_description,
        group_chat_topic_type=group_chat_topic_type,
        model_client=OpenAIChatCompletionClient(
            model="gpt-4o-2024-08-06",
            # api_key="YOUR_API_KEY",
        ),
        ),
    )

    # ç‚ºç°¡æ½”èµ·è¦‹ï¼Œå…¶ä»–å®£å‘Šå·²è¢«ç¸®çŸ­

    # ç¾¤çµ„èŠå¤©
    group_chat_manager_type = await GroupChatManager.register(
    runtime,
    "group_chat_manager",
    lambda: GroupChatManager(
        participant_topic_types=[writer_topic_type, illustrator_topic_type, editor_topic_type, user_topic_type],
        model_client=OpenAIChatCompletionClient(
            model="gpt-4o-2024-08-06",
            # api_key="YOUR_API_KEY",
        ),
        participant_descriptions=[
            writer_description, 
            illustrator_description, 
            editor_description, 
            user_description
        ],
        ),
    )
    ```

    åœ¨ä¸Šæ–¹ç¨‹å¼ç¢¼ä¸­ï¼Œä¸€å€‹ `GroupChatManager` è¢«è¨»å†Šè‡³åŸ·è¡Œç’°å¢ƒã€‚è©²ç®¡ç†è€…è² è²¬å”èª¿å¯«æ‰‹ã€æ’ç•«å¸«ã€ç·¨è¼¯åŠä½¿ç”¨è€…ç­‰ä¸åŒé¡å‹ä»£ç†é–“çš„äº’å‹•ã€‚

- **ä»£ç†åŸ·è¡Œç’°å¢ƒ**ã€‚æ¡†æ¶æä¾›åŸ·è¡Œç’°å¢ƒï¼Œä¿ƒé€²ä»£ç†ä¹‹é–“æºé€šï¼Œç®¡ç†èº«åˆ†èˆ‡ç”Ÿå‘½é€±æœŸï¼Œä¸¦å¯¦æ–½å®‰å…¨åŠéš±ç§é‚Šç•Œã€‚é€™å¯ç¢ºä¿ä»£ç†å®‰å…¨é«˜æ•ˆäº’å‹•ã€‚å…©ç¨®ä¸»è¦åŸ·è¡Œç’°å¢ƒï¼š
  - **å–®ä¸€åŸ·è¡Œç’°å¢ƒ**ã€‚é©åˆå–®ç¨‹åºæ‡‰ç”¨ï¼Œæ‰€æœ‰ä»£ç†ä»¥ç›¸åŒç¨‹å¼èªè¨€å¯¦ä½œä¸”åŸ·è¡Œæ–¼åŒä¸€ç¨‹åºã€‚ä¸‹åœ–ç¤ºæ„é‹ä½œæ–¹å¼ï¼š
  
    <a href="https://microsoft.github.io/autogen/stable/_images/architecture-standalone.svg" target="_blank">å–®ä¸€åŸ·è¡Œç’°å¢ƒ</a>   
æ‡‰ç”¨å †ç–Š

    *ä»£ç†é€éåŸ·è¡Œç’°å¢ƒä»¥è¨Šæ¯æºé€šï¼ŒåŸ·è¡Œç’°å¢ƒç®¡ç†ä»£ç†ç”Ÿå‘½é€±æœŸ*

  - **åˆ†æ•£å¼ä»£ç†åŸ·è¡Œç’°å¢ƒ**ï¼Œé©åˆå¤šç¨‹åºæ‡‰ç”¨ï¼Œä»£ç†å¯ä½¿ç”¨ä¸åŒèªè¨€å¯¦ä½œä¸¦éƒ¨ç½²æ–¼ä¸åŒæ©Ÿå™¨ã€‚ä¸‹åœ–ç¤ºæ„é‹ä½œæ–¹å¼ï¼š
  
    <a href="https://microsoft.github.io/autogen/stable/_images/architecture-distributed.svg" target="_blank">åˆ†æ•£å¼åŸ·è¡Œç’°å¢ƒ</a>

## Semantic Kernel + ä»£ç†æ¡†æ¶

Semantic Kernel æ˜¯ä¼æ¥­ç´š AI ç·¨æ’ SDKã€‚å®ƒåŒ…å« AI èˆ‡è¨˜æ†¶é€£æ¥å™¨ï¼Œä¸¦é…æœ‰ä»£ç†æ¡†æ¶ã€‚

å…ˆä»‹ç´¹å¹¾å€‹æ ¸å¿ƒå…ƒä»¶ï¼š

- **AI é€£æ¥å™¨**ï¼šé€™æ˜¯ä»‹æ¥å¤–éƒ¨ AI æœå‹™èˆ‡è³‡æ–™æºçš„ä»‹é¢ï¼Œé©ç”¨æ–¼ Python å’Œ C#ã€‚

  ```python
  # èªæ„æ ¸å¿ƒ Python
  from semantic_kernel.connectors.ai.open_ai import AzureChatCompletion
  from semantic_kernel.kernel import Kernel

  kernel = Kernel()
  kernel.add_service(
    AzureChatCompletion(
        deployment_name="your-deployment-name",
        api_key="your-api-key",
        endpoint="your-endpoint",
    )
  )
  ```  

    ```csharp
    // Semantic Kernel C#
    using Microsoft.SemanticKernel;

    // Create kernel
    var builder = Kernel.CreateBuilder();
    
    // Add a chat completion service:
    builder.Services.AddAzureOpenAIChatCompletion(
        "your-resource-name",
        "your-endpoint",
        "your-resource-key",
        "deployment-model");
    var kernel = builder.Build();
    ```

    ç¯„ä¾‹ç¤ºç¯„å¦‚ä½•å»ºç«‹ kernel ä¸¦åŠ å…¥èŠå¤©å®Œæˆæœå‹™ã€‚Semantic Kernel èˆ‡å¤–éƒ¨ AI æœå‹™é€£ç·šï¼Œå¦‚æ­¤è™•çš„ Azure OpenAI èŠå¤©å®Œæˆã€‚

- **å¤–æ›**ï¼šå°‡æ‡‰ç”¨å¯ç”¨çš„å‡½å¼å°è£èµ·ä¾†ã€‚æœ‰ç¾æˆå¤–æ›ï¼Œä¹Ÿå¯è‡ªè¨‚ã€‚ç›¸é—œæ¦‚å¿µç‚ºã€Œæç¤ºå‡½å¼ã€ã€‚ä¸åªæ˜¯ä»¥è‡ªç„¶èªè¨€æç¤ºèª¿ç”¨å‡½å¼ï¼Œè€Œæ˜¯å‘æ¨¡å‹å»£æ’­ç‰¹å®šå‡½å¼ï¼Œæ¨¡å‹æœƒä¾ç•¶å‰å°è©±ä¸Šä¸‹æ–‡é¸æ“‡å‘¼å«é€™äº›å‡½å¼å®Œæˆè«‹æ±‚ã€‚ç¯„ä¾‹å¦‚ä¸‹ï¼š

  ```python
  from semantic_kernel.connectors.ai.open_ai.services.azure_chat_completion import AzureChatCompletion


  async def main():
      from semantic_kernel.functions import KernelFunctionFromPrompt
      from semantic_kernel.kernel import Kernel

      kernel = Kernel()
      kernel.add_service(AzureChatCompletion())

      user_input = input("User Input:> ")

      kernel_function = KernelFunctionFromPrompt(
          function_name="SummarizeText",
          prompt="""
          Summarize the provided unstructured text in a sentence that is easy to understand.
          Text to summarize: {{$user_input}}
          """,
      )

      response = await kernel_function.invoke(kernel=kernel, user_input=user_input)
      print(f"Model Response: {response}")

      """
      Sample Console Output:

      User Input:> I like dogs
      Model Response: The text expresses a preference for dogs.
      """


  if __name__ == "__main__":
    import asyncio
    asyncio.run(main())
  ```

    ```csharp
    var userInput = Console.ReadLine();

    // Define semantic function inline.
    string skPrompt = @"Summarize the provided unstructured text in a sentence that is easy to understand.
                        Text to summarize: {{$userInput}}";
    
    // create the function from the prompt
    KernelFunction summarizeFunc = kernel.CreateFunctionFromPrompt(
        promptTemplate: skPrompt,
        functionName: "SummarizeText"
    );

    //then import into the current kernel
    kernel.ImportPluginFromFunctions("SemanticFunctions", [summarizeFunc]);

    ```

    æ­¤è™•å…ˆæœ‰ä¸€å€‹æç¤ºæ¨¡æ¿ `skPrompt`ï¼Œç•™å‡º `$userInput` è®“ä½¿ç”¨è€…è¼¸å…¥æ–‡å­—ã€‚æ¥è‘—å»ºç«‹ kernel å‡½å¼ `SummarizeText`ï¼Œä¸¦ä»¥ `SemanticFunctions` å¤–æ›ååŒ¯å…¥ kernelã€‚æ³¨æ„å‡½å¼åç¨±åŠ© Semantic Kernel ç†è§£å‡½å¼åŠŸèƒ½èˆ‡å‘¼å«æ™‚æ©Ÿã€‚

- **æœ¬åœ°å‡½å¼**ï¼šæ¡†æ¶ä¹Ÿèƒ½ç›´æ¥èª¿ç”¨æœ¬åœ°å‡½å¼åŸ·è¡Œä»»å‹™ã€‚ä»¥ä¸‹ç‚ºå¾æª”æ¡ˆè®€å–å…§å®¹çš„ç¤ºä¾‹ï¼š

    ```csharp
    public class NativeFunctions {

        [SKFunction, Description("Retrieve content from local file")]
        public async Task<string> RetrieveLocalFile(string fileName, int maxSize = 5000)
        {
            string content = await File.ReadAllTextAsync(fileName);
            if (content.Length <= maxSize) return content;
            return content.Substring(0, maxSize);
        }
    }
    
    //Import native function
    string plugInName = "NativeFunction";
    string functionName = "RetrieveLocalFile";

   //To add the functions to a kernel use the following function
    kernel.ImportPluginFromType<NativeFunctions>();

    ```

- **è¨˜æ†¶**ï¼šæŠ½è±¡åŒ–ä¸¦ç°¡åŒ– AI æ‡‰ç”¨çš„ä¸Šä¸‹æ–‡ç®¡ç†ã€‚è¨˜æ†¶å³ç‚º LLM éœ€ã€ŒçŸ¥é“ã€çš„è³‡è¨Šã€‚ä½ å¯ä»¥å°‡é€™äº›è³‡æ–™å­˜æ–¼å‘é‡åº«ï¼Œæœ€çµ‚å¯èƒ½æ˜¯è¨˜æ†¶é«”å…§è³‡æ–™åº«æˆ–å‘é‡è³‡æ–™åº«ç­‰ã€‚ä»¥ä¸‹ç‚ºéå¸¸ç°¡åŒ–æƒ…å¢ƒç¤ºä¾‹ï¼Œå°‡ã€Œäº‹å¯¦ã€åŠ å…¥è¨˜æ†¶ï¼š

    ```csharp
    var facts = new Dictionary<string,string>();
    facts.Add(
        "Azure Machine Learning; https://learn.microsoft.com/azure/machine-learning/",
        @"Azure Machine Learning is a cloud service for accelerating and
        managing the machine learning project lifecycle. Machine learning professionals,
        data scientists, and engineers can use it in their day-to-day workflows"
    );
    
    facts.Add(
        "Azure SQL Service; https://learn.microsoft.com/azure/azure-sql/",
        @"Azure SQL is a family of managed, secure, and intelligent products
        that use the SQL Server database engine in the Azure cloud."
    );
    
    string memoryCollectionName = "SummarizedAzureDocs";
    
    foreach (var fact in facts) {
        await memoryBuilder.SaveReferenceAsync(
            collection: memoryCollectionName,
            description: fact.Key.Split(";")[1].Trim(),
            text: fact.Value,
            externalId: fact.Key.Split(";")[2].Trim(),
            externalSourceName: "Azure Documentation"
        );
    }
    ```

é€™äº›äº‹å¯¦ç„¶å¾Œè¢«å„²å­˜åœ¨è¨˜æ†¶é›†åˆ `SummarizedAzureDocs`ã€‚é€™æ˜¯ä¸€å€‹éå¸¸ç°¡åŒ–çš„ç¯„ä¾‹ï¼Œä½†ä½ å¯ä»¥çœ‹åˆ°å¦‚ä½•å°‡è³‡è¨Šå„²å­˜åœ¨è¨˜æ†¶ä¸­ï¼Œä¾› LLM ä½¿ç”¨ã€‚

ä»¥ä¸Šå°±æ˜¯ Semantic Kernel æ¡†æ¶çš„åŸºç¤ï¼Œé‚£ä»£ç†æ¡†æ¶å‘¢ï¼Ÿ

## Azure AI ä»£ç†æœå‹™

Azure AI ä»£ç†æœå‹™æ˜¯è¼ƒæ–°çš„æ–°å¢åŠŸèƒ½ï¼Œæ–¼ Microsoft Ignite 2024 ç™¼ä½ˆã€‚å®ƒå…è¨±é–‹ç™¼å’Œéƒ¨ç½²æ›´éˆæ´»æ¨¡å‹çš„ AI ä»£ç†ï¼Œä¾‹å¦‚ç›´æ¥å‘¼å«é–‹æº LLMs å¦‚ Llama 3ã€Mistral å’Œ Cohereã€‚

Azure AI ä»£ç†æœå‹™æä¾›æ›´å¼·çš„ä¼æ¥­å®‰å…¨æ©Ÿåˆ¶å’Œè³‡æ–™å„²å­˜æ–¹æ³•ï¼Œä½¿å…¶é©åˆä¼æ¥­æ‡‰ç”¨ã€‚

å®ƒå¯å³æ™‚èˆ‡å¤šä»£ç†å”èª¿æ¡†æ¶å¦‚ AutoGen å’Œ Semantic Kernel é…åˆä½¿ç”¨ã€‚

æ­¤æœå‹™ç›®å‰è™•æ–¼å…¬é–‹é è¦½éšæ®µï¼Œä¸¦æ”¯æ´ä½¿ç”¨ Python å’Œ C# å»ºç«‹ä»£ç†ã€‚

ä½¿ç”¨ Semantic Kernel Pythonï¼Œæˆ‘å€‘å¯ä»¥å‰µå»ºå…·æœ‰ç”¨æˆ¶å®šç¾©æ’ä»¶çš„ Azure AI ä»£ç†ï¼š

```python
import asyncio
from typing import Annotated

from azure.identity.aio import DefaultAzureCredential

from semantic_kernel.agents import AzureAIAgent, AzureAIAgentSettings, AzureAIAgentThread
from semantic_kernel.contents import ChatMessageContent
from semantic_kernel.contents import AuthorRole
from semantic_kernel.functions import kernel_function


# ç‚ºç¯„ä¾‹å®šç¾©ä¸€å€‹æ’ä»¶
class MenuPlugin:
    """A sample Menu Plugin used for the concept sample."""

    @kernel_function(description="Provides a list of specials from the menu.")
    def get_specials(self) -> Annotated[str, "Returns the specials from the menu."]:
        return """
        Special Soup: Clam Chowder
        Special Salad: Cobb Salad
        Special Drink: Chai Tea
        """

    @kernel_function(description="Provides the price of the requested menu item.")
    def get_item_price(
        self, menu_item: Annotated[str, "The name of the menu item."]
    ) -> Annotated[str, "Returns the price of the menu item."]:
        return "$9.99"


async def main() -> None:
    ai_agent_settings = AzureAIAgentSettings.create()

    async with (
        DefaultAzureCredential() as creds,
        AzureAIAgent.create_client(
            credential=creds,
            conn_str=ai_agent_settings.project_connection_string.get_secret_value(),
        ) as client,
    ):
        # å»ºç«‹ä»£ç†å®šç¾©
        agent_definition = await client.agents.create_agent(
            model=ai_agent_settings.model_deployment_name,
            name="Host",
            instructions="Answer questions about the menu.",
        )

        # ä½¿ç”¨å·²å®šç¾©çš„å®¢æˆ¶ç«¯èˆ‡ä»£ç†å®šç¾©å»ºç«‹ AzureAI ä»£ç†
        agent = AzureAIAgent(
            client=client,
            definition=agent_definition,
            plugins=[MenuPlugin()],
        )

        # å»ºç«‹ä¸€å€‹åŸ·è¡Œç·’ä»¥å„²å­˜å°è©±
        # å¦‚æœæ²’æœ‰æä¾›åŸ·è¡Œç·’ï¼Œå°‡æœƒ
        # è¢«å»ºç«‹ä¸¦èˆ‡åˆå§‹å›æ‡‰ä¸€ä½µè¿”å›
        thread: AzureAIAgentThread | None = None

        user_inputs = [
            "Hello",
            "What is the special soup?",
            "How much does that cost?",
            "Thank you",
        ]

        try:
            for user_input in user_inputs:
                print(f"# User: '{user_input}'")
                # ç‚ºæŒ‡å®šçš„åŸ·è¡Œç·’å‘¼å«ä»£ç†
                response = await agent.get_response(
                    messages=user_input,
                    thread_id=thread,
                )
                print(f"# {response.name}: {response.content}")
                thread = response.thread
        finally:
            await thread.delete() if thread else None
            await client.agents.delete_agent(agent.id)


if __name__ == "__main__":
    asyncio.run(main())
```

### æ ¸å¿ƒæ¦‚å¿µ

Azure AI ä»£ç†æœå‹™å…·æœ‰ä»¥ä¸‹æ ¸å¿ƒæ¦‚å¿µï¼š

- **ä»£ç† (Agent)**ã€‚Azure AI ä»£ç†æœå‹™æ•´åˆäº† Microsoft Foundryã€‚åœ¨ AI Foundry ä¸­ï¼ŒAI ä»£ç†ä½œç‚ºä¸€å€‹ã€Œæ™ºæ…§ã€å¾®æœå‹™ï¼Œå¯ç”¨æ–¼å›ç­”å•é¡Œï¼ˆRAGï¼‰ã€åŸ·è¡Œæ“ä½œæˆ–å®Œå…¨è‡ªå‹•åŒ–å·¥ä½œæµç¨‹ã€‚å®ƒé€éçµåˆç”Ÿæˆå¼ AI æ¨¡å‹çš„èƒ½åŠ›å’Œå…è¨±è¨ªå•åŠäº’å‹•ç¾å¯¦ä¸–ç•Œè³‡æ–™ä¾†æºçš„å·¥å…·ä¾†å¯¦ç¾ã€‚ä»¥ä¸‹æ˜¯ä»£ç†çš„ç¯„ä¾‹ï¼š

    ```python
    agent = project_client.agents.create_agent(
        model="gpt-4o-mini",
        name="my-agent",
        instructions="You are helpful agent",
        tools=code_interpreter.definitions,
        tool_resources=code_interpreter.resources,
    )
    ```

    åœ¨æ­¤ç¯„ä¾‹ä¸­ï¼Œä»£ç†ä½¿ç”¨æ¨¡å‹ `gpt-4o-mini`ï¼Œåç¨±ç‚º `my-agent`ï¼Œä¸¦é™„åŠ æŒ‡ä»¤ `You are helpful agent`ã€‚ä»£ç†é…å‚™å·¥å…·å’Œè³‡æºä»¥åŸ·è¡Œç¨‹å¼ç¢¼è§£é‡‹ä»»å‹™ã€‚

- **ä¸»é¡Œèˆ‡è¨Šæ¯ (Thread and messages)**ã€‚ä¸»é¡Œæ˜¯å¦ä¸€å€‹é‡è¦æ¦‚å¿µã€‚å®ƒä»£è¡¨ä»£ç†èˆ‡ä½¿ç”¨è€…é–“çš„å°è©±æˆ–äº’å‹•ã€‚ä¸»é¡Œå¯ç”¨æ–¼è¿½è¹¤å°è©±é€²åº¦ã€å„²å­˜ä¸Šä¸‹æ–‡è³‡è¨Šå’Œç®¡ç†äº’å‹•ç‹€æ…‹ã€‚ä»¥ä¸‹æ˜¯ä¸»é¡Œçš„ç¯„ä¾‹ï¼š

    ```python
    thread = project_client.agents.create_thread()
    message = project_client.agents.create_message(
        thread_id=thread.id,
        role="user",
        content="Could you please create a bar chart for the operating profit using the following data and provide the file to me? Company A: $1.2 million, Company B: $2.5 million, Company C: $3.0 million, Company D: $1.8 million",
    )
    
    # Ask the agent to perform work on the thread
    run = project_client.agents.create_and_process_run(thread_id=thread.id, agent_id=agent.id)
    
    # Fetch and log all messages to see the agent's response
    messages = project_client.agents.list_messages(thread_id=thread.id)
    print(f"Messages: {messages}")
    ```

    åœ¨ä¹‹å‰çš„ç¨‹å¼ç¢¼ä¸­ï¼Œå»ºç«‹äº†ä¸€å€‹ä¸»é¡Œã€‚ä¹‹å¾Œï¼Œç™¼é€è¨Šæ¯åˆ°ä¸»é¡Œã€‚é€éå‘¼å« `create_and_process_run`ï¼Œä»£ç†è¢«è¦æ±‚åœ¨è©²ä¸»é¡Œä¸ŠåŸ·è¡Œå·¥ä½œã€‚æœ€åï¼Œæ“·å–è¨Šæ¯ä¸¦è¨˜éŒ„ä»¥æŸ¥çœ‹ä»£ç†çš„å›æ‡‰ã€‚é€™äº›è¨Šæ¯é¡¯ç¤ºä½¿ç”¨è€…èˆ‡ä»£ç†é–“å°è©±çš„é€²å±•ã€‚åŒæ™‚é‡è¦çš„æ˜¯ç†è§£è¨Šæ¯å¯èƒ½æ˜¯ä¸åŒé¡å‹ï¼Œå¦‚æ–‡å­—ã€åœ–ç‰‡æˆ–æª”æ¡ˆï¼Œä»£è¡¨ä»£ç†çš„å·¥ä½œçµæœå¯èƒ½æ˜¯ä¸€å¼µåœ–ç‰‡æˆ–ä¸€æ®µæ–‡å­—å›æ‡‰ã€‚ä½œç‚ºé–‹ç™¼è€…ï¼Œæ‚¨å¯ä»¥åˆ©ç”¨é€™äº›è³‡è¨Šé€²ä¸€æ­¥è™•ç†å›æ‡‰æˆ–å‘ˆç¾çµ¦ä½¿ç”¨è€…ã€‚

- **æ•´åˆå…¶ä»– AI æ¡†æ¶**ã€‚Azure AI ä»£ç†æœå‹™å¯èˆ‡å…¶ä»–æ¡†æ¶å¦‚ AutoGen å’Œ Semantic Kernel äº’å‹•ï¼Œæ„å‘³è‘—æ‚¨å¯ä»¥åœ¨é€™äº›æ¡†æ¶ä¸­æ§‹å»ºæ‡‰ç”¨éƒ¨åˆ†ï¼Œä¸¦ä¾‹å¦‚ä½¿ç”¨ä»£ç†æœå‹™ä½œç‚ºå”èª¿è€…ï¼Œæˆ–è€…æ‚¨ä¹Ÿå¯ä»¥å®Œå…¨åœ¨ä»£ç†æœå‹™ä¸­å»ºç«‹æ‚¨çš„æ‡‰ç”¨ã€‚

**ä½¿ç”¨æ¡ˆä¾‹**ï¼šAzure AI ä»£ç†æœå‹™ç‚ºéœ€è¦å®‰å…¨ã€å¯æ“´å±•å’Œéˆæ´» AI ä»£ç†éƒ¨ç½²çš„ä¼æ¥­æ‡‰ç”¨è¨­è¨ˆã€‚

## é€™äº›æ¡†æ¶æœ‰ä»€éº¼å·®åˆ¥ï¼Ÿ

çœ‹èµ·ä¾†é€™äº›æ¡†æ¶ç¢ºå¯¦æœ‰å¾ˆå¤šé‡ç–Šï¼Œä½†åœ¨è¨­è¨ˆã€èƒ½åŠ›èˆ‡ç›®æ¨™ä½¿ç”¨æ¡ˆä¾‹ä¸Šæœ‰ä¸€äº›é—œéµå·®ç•°ï¼š

- **AutoGen**ï¼šæ˜¯ä¸€å€‹é›†ä¸­æ–¼å¤šä»£ç†ç³»çµ±å‰æ²¿ç ”ç©¶çš„å¯¦é©—æ¡†æ¶ã€‚éå¸¸é©åˆç”¨ä¾†å¯¦é©—å’ŒåŸå‹è¨­è¨ˆè¤‡é›œçš„å¤šä»£ç†ç³»çµ±ã€‚
- **Semantic Kernel**ï¼šæ˜¯å¯ç”¨æ–¼ç”Ÿç”¢ç’°å¢ƒçš„ä»£ç†å‡½å¼åº«ï¼Œç”¨æ–¼æ§‹å»ºä¼æ¥­ç´šä»£ç†æ‡‰ç”¨ã€‚è‘—é‡äº‹ä»¶é©…å‹•ã€åˆ†æ•£å¼ä»£ç†æ‡‰ç”¨ï¼Œæ”¯æ´å¤šç¨® LLM å’Œ SLMï¼Œå·¥å…·ï¼Œä»¥åŠå–®ä¸€/å¤šä»£ç†è¨­è¨ˆæ¨¡å¼ã€‚
- **Azure AI ä»£ç†æœå‹™**ï¼šæ˜¯ Azure Foundry ä¸­çš„ä»£ç†å¹³å°èˆ‡éƒ¨ç½²æœå‹™ã€‚æä¾›é€£æ¥ Azure Foundry æ”¯æ´çš„æœå‹™ï¼Œå¦‚ Azure OpenAIã€Azure AI æœå°‹ã€Bing æœå°‹åŠä»£ç¢¼åŸ·è¡Œã€‚

é‚„æ˜¯ä¸ç¢ºå®šé¸å“ªå€‹ï¼Ÿ

### ä½¿ç”¨æ¡ˆä¾‹

è®“æˆ‘å€‘çœ‹çœ‹å¸¸è¦‹ä½¿ç”¨æƒ…å¢ƒï¼Œæˆ–è¨±æœ‰åŠ©é¸æ“‡ï¼š

> å•ï¼šæˆ‘æ­£åœ¨å¯¦é©—ã€å­¸ç¿’ä¸¦æ§‹å»ºæ¦‚å¿µé©—è­‰ä»£ç†æ‡‰ç”¨ï¼Œå¸Œæœ›èƒ½å¿«é€Ÿå»ºç«‹å’Œæ¸¬è©¦ã€‚
>

> ç­”ï¼šAutoGen æ˜¯æ­¤æƒ…å¢ƒçš„å¥½é¸æ“‡ï¼Œå› å…¶èšç„¦æ–¼äº‹ä»¶é©…å‹•ã€åˆ†æ•£å¼ä»£ç†æ‡‰ç”¨ï¼Œä¸¦æ”¯æ´å…ˆé€²çš„å¤šä»£ç†è¨­è¨ˆæ¨¡å¼ã€‚

> å•ï¼šç‚ºä»€éº¼ AutoGen æ¯” Semantic Kernel å’Œ Azure AI ä»£ç†æœå‹™æ›´é©åˆé€™å€‹ç”¨ä¾‹ï¼Ÿ
>
> ç­”ï¼šAutoGen å°ˆé–€è¨­è¨ˆç‚ºäº‹ä»¶é©…å‹•ã€åˆ†æ•£å¼ä»£ç†æ‡‰ç”¨ï¼Œéå¸¸é©åˆè‡ªå‹•åŒ–ä»£ç¢¼ç”Ÿæˆå’Œè³‡æ–™åˆ†æä»»å‹™ã€‚å®ƒæä¾›æ§‹å»ºè¤‡é›œå¤šä»£ç†ç³»çµ±çš„å¿…è¦å·¥å…·å’Œèƒ½åŠ›ã€‚

> å•ï¼šè½èµ·ä¾† Azure AI ä»£ç†æœå‹™ä¹Ÿèƒ½ä½¿ç”¨å—ï¼Ÿå®ƒæœ‰ä»£ç¢¼ç”Ÿæˆå’Œæ›´å¤šå·¥å…·ï¼Ÿ
>
> ç­”ï¼šæ˜¯çš„ï¼ŒAzure AI ä»£ç†æœå‹™æ˜¯ä¸€å€‹ä»£ç†å¹³å°æœå‹™ï¼Œå…§å»ºå¤šæ¨¡å‹ã€Azure AI æœå°‹ã€Bing æœå°‹å’Œ Azure Functions åŠŸèƒ½ã€‚è®“æ‚¨å¯ä»¥è¼•é¬†åœ¨ Foundry å…¥å£ç¶²ç«™å»ºç«‹ä»£ç†ä¸¦å¤§è¦æ¨¡éƒ¨ç½²ã€‚

> å•ï¼šæˆ‘é‚„æ˜¯å›°æƒ‘ï¼Œçµ¦æˆ‘ä¸€å€‹é¸æ“‡å§
>
> ç­”ï¼šæ¨è–¦å…ˆä½¿ç”¨ Semantic Kernel å»ºæ§‹æ‚¨çš„æ‡‰ç”¨ï¼Œå†åˆ©ç”¨ Azure AI ä»£ç†æœå‹™éƒ¨ç½²ä»£ç†ã€‚é€™ç¨®æ–¹æ³•è®“ä½ è¼•é¬†æŒä¹…åŒ–ä»£ç†ï¼ŒåŒæ™‚å–„ç”¨ Semantic Kernel çš„å¤šä»£ç†ç³»çµ±æ§‹å»ºèƒ½åŠ›ã€‚æ­¤å¤–ï¼ŒSemantic Kernel åœ¨ AutoGen ä¸­ä¹Ÿæœ‰é€£æ¥å™¨ï¼Œä½¿å…©æ¡†æ¶è¼•æ˜“é…åˆä½¿ç”¨ã€‚

æˆ‘å€‘ç”¨è¡¨æ ¼ç¸½çµå„æ¡†æ¶çš„ä¸»è¦å·®ç•°ï¼š

| æ¡†æ¶ | å°ˆæ³¨é ˜åŸŸ | æ ¸å¿ƒæ¦‚å¿µ | ä½¿ç”¨æ¡ˆä¾‹ |
| --- | --- | --- | --- |
| AutoGen | äº‹ä»¶é©…å‹•ã€åˆ†æ•£å¼ä»£ç†æ‡‰ç”¨ | ä»£ç†ã€è§’è‰²ã€å‡½å¼ã€è³‡æ–™ | ä»£ç¢¼ç”Ÿæˆã€è³‡æ–™åˆ†æä»»å‹™ |
| Semantic Kernel | ç†è§£èˆ‡ç”Ÿæˆé¡äººèªè¨€å…§å®¹ | ä»£ç†ã€æ¨¡çµ„çµ„ä»¶ã€å”ä½œ | è‡ªç„¶èªè¨€ç†è§£ã€å…§å®¹ç”Ÿæˆ |
| Azure AI ä»£ç†æœå‹™ | éˆæ´»æ¨¡å‹ã€ä¼æ¥­å®‰å…¨ã€ä»£ç¢¼ç”Ÿæˆã€å·¥å…·å‘¼å« | æ¨¡çµ„åŒ–ã€å”ä½œã€æµç¨‹ç·¨æ’ | å®‰å…¨ã€å¯æ“´å±•ä¸”éˆæ´»çš„ AI ä»£ç†éƒ¨ç½² |

å„æ¡†æ¶çš„ç†æƒ³ä½¿ç”¨æ¡ˆä¾‹æ˜¯ä»€éº¼ï¼Ÿ

## æˆ‘å¯ä»¥ç›´æ¥æ•´åˆç¾æœ‰çš„ Azure ç”Ÿæ…‹ç³»çµ±å·¥å…·å—ï¼Ÿé‚„æ˜¯å¿…é ˆä½¿ç”¨ç¨ç«‹æ–¹æ¡ˆï¼Ÿ

ç­”æ¡ˆæ˜¯å¯ä»¥ï¼Œå°¤å…¶æ˜¯ Azure AI ä»£ç†æœå‹™ï¼Œå› ç‚ºå®ƒè¨­è¨ˆæ™‚å·²ç¢ºä¿èˆ‡å…¶ä»– Azure æœå‹™ç„¡ç¸«å°æ¥ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æ•´åˆ Bingã€Azure AI æœå°‹å’Œ Azure Functionsã€‚å®ƒäº¦èˆ‡ Microsoft Foundry æ·±åº¦æ•´åˆã€‚

è‡³æ–¼ AutoGen å’Œ Semantic Kernelï¼Œæ‚¨ä¹Ÿå¯æ•´åˆ Azure æœå‹™ï¼Œä½†å¯èƒ½é ˆåœ¨ç¨‹å¼ç¢¼ä¸­å‘¼å«é€™äº›æœå‹™ã€‚å¦ä¸€ç¨®æ•´åˆæ–¹å¼æ˜¯ä½¿ç”¨ Azure SDK ç›´æ¥å¾ä»£ç†èˆ‡ Azure æœå‹™äº’å‹•ã€‚æ­¤å¤–ï¼Œå¦‚å‰æ‰€è¿°ï¼Œæ‚¨ä¹Ÿå¯ä»¥ç”¨ Azure AI ä»£ç†æœå‹™ä½œç‚º AutoGen æˆ– Semantic Kernel ä»£ç†çš„å”èª¿è€…ï¼Œè¼•é¬†å­˜å– Azure ç”Ÿæ…‹ç³»ã€‚

## ç¯„ä¾‹ç¨‹å¼ç¢¼

- Python: [Agent Framework](./code_samples/02-python-agent-framework.ipynb)
- .NET: [Agent Framework](./code_samples/02-dotnet-agent-framework.md)

## æœ‰æ›´å¤šé—œæ–¼ AI ä»£ç†æ¡†æ¶çš„å•é¡Œå—ï¼Ÿ

åŠ å…¥ [Microsoft Foundry Discord](https://aka.ms/ai-agents/discord)ï¼Œèˆ‡å…¶ä»–å­¸ç¿’è€…äº¤æµï¼ŒåƒåŠ ç­”ç–‘æ™‚é–“ï¼Œè§£ç­”ä½ çš„ AI ä»£ç†ç›¸é—œå•é¡Œã€‚

## åƒè€ƒè³‡æ–™

- <a href="https://techcommunity.microsoft.com/blog/azure-ai-services-blog/introducing-azure-ai-agent-service/4298357" target="_blank">Azure ä»£ç†æœå‹™</a>
- <a href="https://devblogs.microsoft.com/semantic-kernel/microsofts-agentic-ai-frameworks-autogen-and-semantic-kernel/" target="_blank">Semantic Kernel å’Œ AutoGen</a>
- <a href="https://learn.microsoft.com/semantic-kernel/frameworks/agent/?pivots=programming-language-python" target="_blank">Semantic Kernel Python ä»£ç†æ¡†æ¶</a>
- <a href="https://learn.microsoft.com/semantic-kernel/frameworks/agent/?pivots=programming-language-csharp" target="_blank">Semantic Kernel .Net ä»£ç†æ¡†æ¶</a>
- <a href="https://learn.microsoft.com/azure/ai-services/agents/overview" target="_blank">Azure AI ä»£ç†æœå‹™</a>
- <a href="https://techcommunity.microsoft.com/blog/educatordeveloperblog/using-azure-ai-agent-service-with-autogen--semantic-kernel-to-build-a-multi-agen/4363121" target="_blank">ä½¿ç”¨ Azure AI ä»£ç†æœå‹™èˆ‡ AutoGen / Semantic Kernel å»ºç«‹å¤šä»£ç†è§£æ±ºæ–¹æ¡ˆ</a>

## å‰ä¸€èª²ç¨‹

[AI ä»£ç†èˆ‡ä»£ç†ä½¿ç”¨æ¡ˆä¾‹å°è«–](../01-intro-to-ai-agents/README.md)

## ä¸‹ä¸€èª²ç¨‹

[ç†è§£ä»£ç†è¨­è¨ˆæ¨¡å¼](../03-agentic-design-patterns/README.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**å…è²¬è²æ˜**ï¼š  
æœ¬æ–‡ä»¶æ˜¯é€éäººå·¥æ™ºèƒ½ç¿»è­¯æœå‹™ [Co-op Translator](https://github.com/Azure/co-op-translator) ç¿»è­¯è€Œæˆã€‚é›–ç„¶æˆ‘å€‘è‡´åŠ›æ–¼ç¢ºä¿æº–ç¢ºæ€§ï¼Œä½†è«‹æ³¨æ„è‡ªå‹•ç¿»è­¯å¯èƒ½åŒ…å«éŒ¯èª¤æˆ–ä¸æº–ç¢ºä¹‹è™•ã€‚åŸå§‹æ–‡ä»¶çš„æ¯èªç‰ˆæœ¬æ‡‰è¢«è¦–ç‚ºæ¬Šå¨ä¾†æºã€‚å°æ–¼é‡è¦è³‡è¨Šï¼Œå»ºè­°æ¡ç”¨å°ˆæ¥­äººå·¥ç¿»è­¯ã€‚æˆ‘å€‘æ¦‚ä¸å°±ä½¿ç”¨æœ¬ç¿»è­¯æ‰€å¼•è‡´çš„ä»»ä½•èª¤è§£æˆ–èª¤è­¯è² è²¬ã€‚
<!-- CO-OP TRANSLATOR DISCLAIMER END -->