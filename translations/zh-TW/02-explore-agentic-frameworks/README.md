[![æ¢ç´¢ AI ä»£ç†æ¡†æ¶](../../../translated_images/zh-TW/lesson-2-thumbnail.c65f44c93b8558df.webp)](https://youtu.be/ODwF-EZo_O8?si=1xoy_B9RNQfrYdF7)

> _(é»æ“Šä¸Šæ–¹åœ–ç‰‡ä»¥è§€çœ‹æ­¤èª²ç¨‹çš„å½±ç‰‡)_

# æ¢ç´¢ AI ä»£ç†æ¡†æ¶

AI ä»£ç†æ¡†æ¶æ˜¯ç”¨ä¾†ç°¡åŒ– AI ä»£ç†å»ºç«‹ã€éƒ¨ç½²èˆ‡ç®¡ç†çš„è»Ÿé«”å¹³å°ã€‚é€™äº›æ¡†æ¶ç‚ºé–‹ç™¼äººå“¡æä¾›é å»ºå…ƒä»¶ã€æŠ½è±¡å±¤èˆ‡å·¥å…·ï¼Œå¹«åŠ©ç†é †è¤‡é›œ AI ç³»çµ±çš„é–‹ç™¼æµç¨‹ã€‚

é€™äº›æ¡†æ¶é€éç‚º AI ä»£ç†é–‹ç™¼ä¸­çš„å¸¸è¦‹æŒ‘æˆ°æä¾›æ¨™æº–åŒ–çš„æ–¹æ³•ï¼Œå¹«åŠ©é–‹ç™¼äººå“¡å°ˆæ³¨æ–¼æ‡‰ç”¨ç¨‹å¼çš„ç¨ç‰¹é¢å‘ã€‚å®ƒå€‘æå‡äº†æ§‹å»º AI ç³»çµ±çš„å¯æ“´å……æ€§ã€å¯å–å¾—æ€§èˆ‡æ•ˆç‡ã€‚

## ä»‹ç´¹ 

æœ¬èª²ç¨‹å°‡æ¶µè“‹ï¼š

- ä»€éº¼æ˜¯ AI ä»£ç†æ¡†æ¶ï¼Œä»¥åŠå®ƒå€‘èƒ½è®“é–‹ç™¼äººå“¡é”æˆä»€éº¼ï¼Ÿ
- åœ˜éšŠå¦‚ä½•ä½¿ç”¨é€™äº›æ¡†æ¶å¿«é€Ÿå»ºç«‹åŸå‹ã€è¿­ä»£ä¸¦æ”¹é€²ä»£ç†çš„èƒ½åŠ›ï¼Ÿ
- ç”± Microsoft <a href="https://aka.ms/ai-agents/autogen" target="_blank">AutoGen</a>ã€<a href="https://aka.ms/ai-agents-beginners/semantic-kernel" target="_blank">Semantic Kernel</a> èˆ‡ <a href="https://aka.ms/ai-agents-beginners/ai-agent-service" target="_blank">Azure AI Agent Service</a> æ‰€å»ºç«‹çš„æ¡†æ¶èˆ‡å·¥å…·ä¹‹é–“æœ‰ä½•å·®ç•°ï¼Ÿ
- æˆ‘å¯ä»¥ç›´æ¥æ•´åˆæˆ‘ç¾æœ‰çš„ Azure ç”Ÿæ…‹ç³»å·¥å…·ï¼Œé‚„æ˜¯éœ€è¦ç¨ç«‹è§£æ±ºæ–¹æ¡ˆï¼Ÿ
- ä»€éº¼æ˜¯ Azure AI Agents æœå‹™ï¼Œå®ƒå¦‚ä½•å¹«åŠ©æˆ‘ï¼Ÿ

## å­¸ç¿’ç›®æ¨™

æœ¬èª²ç¨‹çš„ç›®æ¨™æ˜¯å¹«åŠ©ä½ äº†è§£ï¼š

- AI ä»£ç†æ¡†æ¶åœ¨ AI é–‹ç™¼ä¸­çš„è§’è‰²ã€‚
- å¦‚ä½•é‹ç”¨ AI ä»£ç†æ¡†æ¶ä¾†æ§‹å»ºæ™ºæ…§ä»£ç†ã€‚
- AI ä»£ç†æ¡†æ¶æ‰€å•Ÿç”¨çš„ä¸»è¦èƒ½åŠ›ã€‚
- AutoGenã€Semantic Kernel èˆ‡ Azure AI Agent Service ä¹‹é–“çš„å·®ç•°ã€‚

## ä»€éº¼æ˜¯ AI ä»£ç†æ¡†æ¶ï¼Œä»¥åŠå®ƒå€‘è®“é–‹ç™¼äººå“¡èƒ½åšä»€éº¼ï¼Ÿ

å‚³çµ±çš„ AI æ¡†æ¶å¯ä»¥å¹«åŠ©ä½ å°‡ AI æ•´åˆåˆ°æ‡‰ç”¨ç¨‹å¼ä¸­ï¼Œä¸¦åœ¨ä¸‹åˆ—æ–¹é¢ä½¿é€™äº›æ‡‰ç”¨ç¨‹å¼æ›´å„ªåŒ–ï¼š

- **å€‹äººåŒ–**: AI å¯ä»¥åˆ†æä½¿ç”¨è€…è¡Œç‚ºèˆ‡åå¥½ï¼Œæä¾›å®¢è£½åŒ–çš„æ¨è–¦ã€å…§å®¹èˆ‡é«”é©—ã€‚
Example: å½±éŸ³ä¸²æµæœå‹™å¦‚ Netflix ä½¿ç”¨ AI æ ¹æ“šè§€çœ‹æ­·å²å»ºè­°é›»å½±èˆ‡ç¯€ç›®ï¼Œæå‡ä½¿ç”¨è€…çš„äº’å‹•ç‡èˆ‡æ»¿æ„åº¦ã€‚
- **è‡ªå‹•åŒ–èˆ‡æ•ˆç‡**: AI å¯ä»¥è‡ªå‹•åŒ–é‡è¤‡æ€§å·¥ä½œã€ç°¡åŒ–å·¥ä½œæµç¨‹ä¸¦æå‡ç‡Ÿé‹æ•ˆç‡ã€‚
Example: å®¢æœæ‡‰ç”¨ä½¿ç”¨ AI é©…å‹•çš„èŠå¤©æ©Ÿå™¨äººè™•ç†å¸¸è¦‹è©¢å•ï¼Œæ¸›å°‘å›æ‡‰æ™‚é–“ä¸¦é‡‹æ”¾çœŸäººå®¢æœè™•ç†è¼ƒè¤‡é›œå•é¡Œã€‚
- **å¼·åŒ–ä½¿ç”¨è€…é«”é©—**: AI å¯ä»¥é€éèªéŸ³è¾¨è­˜ã€è‡ªç„¶èªè¨€è™•ç†èˆ‡é æ¸¬æ–‡å­—ç­‰æ™ºæ…§åŠŸèƒ½æ”¹å–„æ•´é«”ä½¿ç”¨è€…é«”é©—ã€‚
Example: è™›æ“¬åŠ©ç†å¦‚ Siri èˆ‡ Google Assistant ä½¿ç”¨ AI ä¾†ç†è§£ä¸¦å›æ‡‰èªéŸ³æŒ‡ä»¤ï¼Œè®“ä½¿ç”¨è€…æ›´å®¹æ˜“èˆ‡è£ç½®äº’å‹•ã€‚

### é€™ä¸€åˆ‡è½èµ·ä¾†å¾ˆæ£’ï¼Œç‚ºä»€éº¼æˆ‘å€‘é‚„éœ€è¦ AI ä»£ç†æ¡†æ¶ï¼Ÿ

AI ä»£ç†æ¡†æ¶ä¸åªæ˜¯ä¸€èˆ¬çš„ AI æ¡†æ¶ã€‚å®ƒå€‘æ—¨åœ¨å•Ÿç”¨èƒ½èˆ‡ä½¿ç”¨è€…ã€å…¶ä»–ä»£ç†èˆ‡ç’°å¢ƒäº’å‹•ä»¥é”æˆç‰¹å®šç›®æ¨™çš„æ™ºæ…§ä»£ç†ã€‚é€™äº›ä»£ç†å¯ä»¥å±•ç¾è‡ªæ²»è¡Œç‚ºã€åšå‡ºæ±ºç­–ä¸¦é©æ‡‰è®ŠåŒ–çš„æ¢ä»¶ã€‚è®“æˆ‘å€‘ä¾†çœ‹çœ‹ AI ä»£ç†æ¡†æ¶æ‰€å•Ÿç”¨çš„ä¸€äº›é—œéµèƒ½åŠ›ï¼š

- **ä»£ç†å”ä½œèˆ‡å”èª¿**: å…è¨±å»ºç«‹å¤šå€‹å¯ä¸€èµ·å·¥ä½œçš„ AI ä»£ç†ï¼Œå½¼æ­¤æºé€šèˆ‡å”ä½œä»¥è§£æ±ºè¤‡é›œä»»å‹™ã€‚
- **ä»»å‹™è‡ªå‹•åŒ–èˆ‡ç®¡ç†**: æä¾›ç”¨æ–¼è‡ªå‹•åŒ–å¤šæ­¥é©Ÿå·¥ä½œæµç¨‹ã€ä»»å‹™å§”æ´¾èˆ‡ä»£ç†ä¹‹é–“å‹•æ…‹ä»»å‹™ç®¡ç†çš„æ©Ÿåˆ¶ã€‚
- **æƒ…å¢ƒç†è§£èˆ‡é©æ‡‰**: è³¦äºˆä»£ç†ç†è§£æƒ…å¢ƒã€é©æ‡‰è®ŠåŒ–ç’°å¢ƒä¸¦æ ¹æ“šå³æ™‚è³‡è¨Šåšå‡ºæ±ºç­–çš„èƒ½åŠ›ã€‚

ç¸½çµä¾†èªªï¼Œä»£ç†å¯ä»¥è®“ä½ åšåˆ°æ›´å¤šï¼Œå°‡è‡ªå‹•åŒ–æå‡åˆ°ä¸‹ä¸€å€‹å±¤æ¬¡ï¼Œå‰µé€ å‡ºèƒ½å¾ç’°å¢ƒä¸­é©æ‡‰èˆ‡å­¸ç¿’çš„æ›´æ™ºæ…§ç³»çµ±ã€‚

## å¦‚ä½•å¿«é€ŸåŸå‹ã€è¿­ä»£èˆ‡æ”¹é€²ä»£ç†çš„èƒ½åŠ›ï¼Ÿ

é€™æ˜¯ä¸€å€‹è®Šå‹•è¿…é€Ÿçš„é ˜åŸŸï¼Œä½†åœ¨å¤§å¤šæ•¸ AI ä»£ç†æ¡†æ¶ä¸­ï¼Œæœ‰ä¸€äº›å…±é€šé …ç›®èƒ½å¹«åŠ©ä½ å¿«é€Ÿå»ºç«‹åŸå‹èˆ‡è¿­ä»£ï¼Œç‰¹åˆ¥æ˜¯æ¨¡çµ„å…ƒä»¶ã€å”ä½œå·¥å…·èˆ‡å³æ™‚å­¸ç¿’ã€‚è®“æˆ‘å€‘æ·±å…¥é€™äº›é¢å‘ï¼š

- **ä½¿ç”¨æ¨¡çµ„åŒ–å…ƒä»¶**: AI SDK æä¾›é å»ºå…ƒä»¶ï¼Œä¾‹å¦‚ AI èˆ‡è¨˜æ†¶é«”é€£æ¥å™¨ã€ä½¿ç”¨è‡ªç„¶èªè¨€æˆ–ç¨‹å¼ç¢¼å¤–æ›çš„å‡½å¼å‘¼å«ã€æç¤ºæ¨¡æ¿ç­‰ã€‚
- **åˆ©ç”¨å”ä½œå·¥å…·**: è¨­è¨ˆå…·æœ‰ç‰¹å®šè§’è‰²èˆ‡ä»»å‹™çš„ä»£ç†ï¼Œä½¿å®ƒå€‘èƒ½æ¸¬è©¦ä¸¦å„ªåŒ–å”ä½œå·¥ä½œæµç¨‹ã€‚
- **å³æ™‚å­¸ç¿’**: å¯¦ä½œå›é¥‹å¾ªç’°ï¼Œè®“ä»£ç†å¾äº’å‹•ä¸­å­¸ç¿’ä¸¦å‹•æ…‹èª¿æ•´å…¶è¡Œç‚ºã€‚

### ä½¿ç”¨æ¨¡çµ„åŒ–å…ƒä»¶

åƒ Microsoft Semantic Kernel å’Œ LangChain é€™é¡çš„ SDK æä¾›é å»ºå…ƒä»¶ï¼Œä¾‹å¦‚ AI é€£æ¥å™¨ã€æç¤ºæ¨¡æ¿èˆ‡è¨˜æ†¶ç®¡ç†ã€‚

**åœ˜éšŠå¦‚ä½•ä½¿ç”¨é€™äº›**: åœ˜éšŠå¯ä»¥å¿«é€Ÿçµ„è£é€™äº›å…ƒä»¶ä»¥å»ºç«‹åŠŸèƒ½æ€§åŸå‹ï¼Œè€Œç„¡éœ€å¾é›¶é–‹å§‹ï¼Œå¾è€Œå…è¨±å¿«é€Ÿå¯¦é©—èˆ‡è¿­ä»£ã€‚

**å¯¦ä½œæ–¹å¼**: ä½ å¯ä»¥ä½¿ç”¨é å»ºçš„è§£æå™¨å¾ä½¿ç”¨è€…è¼¸å…¥ä¸­æ“·å–è³‡è¨Šã€ä½¿ç”¨è¨˜æ†¶æ¨¡çµ„ä¾†å„²å­˜èˆ‡æª¢ç´¢è³‡æ–™ï¼Œä¸¦ä½¿ç”¨æç¤ºç”¢ç”Ÿå™¨èˆ‡ä½¿ç”¨è€…äº’å‹•ï¼Œå…¨éƒ¨éƒ½ä¸éœ€è‡ªè¡Œé‡å»ºé€™äº›å…ƒä»¶ã€‚

**ç¯„ä¾‹ç¨‹å¼ç¢¼**. è®“æˆ‘å€‘çœ‹ä¸€ä¸‹å¦‚ä½•åœ¨ Semantic Kernel Python èˆ‡ .Net ä¸­ä½¿ç”¨é å»º AI Connector çš„ç¯„ä¾‹ï¼Œè©²ç¯„ä¾‹ä½¿ç”¨è‡ªå‹•å‡½å¼å‘¼å«è®“æ¨¡å‹å›æ‡‰ä½¿ç”¨è€…è¼¸å…¥ï¼š

``` python
# èªæ„æ ¸å¿ƒ Python ç¯„ä¾‹

import asyncio
from typing import Annotated

from semantic_kernel.connectors.ai import FunctionChoiceBehavior
from semantic_kernel.connectors.ai.open_ai import AzureChatCompletion, AzureChatPromptExecutionSettings
from semantic_kernel.contents import ChatHistory
from semantic_kernel.functions import kernel_function
from semantic_kernel.kernel import Kernel

# å®šç¾©ä¸€å€‹ ChatHistory ç‰©ä»¶ä¾†ä¿å­˜å°è©±çš„ä¸Šä¸‹æ–‡
chat_history = ChatHistory()
chat_history.add_user_message("I'd like to go to New York on January 1, 2025")


# å®šç¾©ä¸€å€‹åŒ…å«é è¨‚æ—…éŠåŠŸèƒ½çš„ç¯„ä¾‹æ’ä»¶
class BookTravelPlugin:
    """A Sample Book Travel Plugin"""

    @kernel_function(name="book_flight", description="Book travel given location and date")
    async def book_flight(
        self, date: Annotated[str, "The date of travel"], location: Annotated[str, "The location to travel to"]
    ) -> str:
        return f"Travel was booked to {location} on {date}"

# å»ºç«‹ Kernel
kernel = Kernel()

# å°‡ç¯„ä¾‹æ’ä»¶æ–°å¢è‡³ Kernel ç‰©ä»¶
kernel.add_plugin(BookTravelPlugin(), plugin_name="book_travel")

# å®šç¾© Azure OpenAI AI é€£æ¥å™¨
chat_service = AzureChatCompletion(
    deployment_name="YOUR_DEPLOYMENT_NAME", 
    api_key="YOUR_API_KEY", 
    endpoint="https://<your-resource>.azure.openai.com/",
)

# å®šç¾©è«‹æ±‚è¨­å®šä»¥ä½¿ç”¨è‡ªå‹•å‡½æ•¸èª¿ç”¨é…ç½®æ¨¡å‹
request_settings = AzureChatPromptExecutionSettings(function_choice_behavior=FunctionChoiceBehavior.Auto())


async def main():
    # ä¾çµ¦äºˆçš„èŠå¤©æ­·å²å’Œè«‹æ±‚è¨­å®šå‘æ¨¡å‹æå‡ºè«‹æ±‚
    # Kernel å«æœ‰æ¨¡å‹å°‡è«‹æ±‚èª¿ç”¨çš„ç¯„ä¾‹
    response = await chat_service.get_chat_message_content(
        chat_history=chat_history, settings=request_settings, kernel=kernel
    )
    assert response is not None

    """
    Note: In the auto function calling process, the model determines it can invoke the 
    `BookTravelPlugin` using the `book_flight` function, supplying the necessary arguments. 
    
    For example:

    "tool_calls": [
        {
            "id": "call_abc123",
            "type": "function",
            "function": {
                "name": "BookTravelPlugin-book_flight",
                "arguments": "{'location': 'New York', 'date': '2025-01-01'}"
            }
        }
    ]

    Since the location and date arguments are required (as defined by the kernel function), if the 
    model lacks either, it will prompt the user to provide them. For instance:

    User: Book me a flight to New York.
    Model: Sure, I'd love to help you book a flight. Could you please specify the date?
    User: I want to travel on January 1, 2025.
    Model: Your flight to New York on January 1, 2025, has been successfully booked. Safe travels!
    """

    print(f"`{response}`")
    # ç¯„ä¾‹ AI æ¨¡å‹å›æ‡‰ï¼š`æ‚¨æ–¼ 2025 å¹´ 1 æœˆ 1 æ—¥é£›å¾€ç´ç´„çš„èˆªç­å·²æˆåŠŸé è¨‚ã€‚ç¥æ—…é€”æ„‰å¿«ï¼âœˆï¸ğŸ—½`

    # å°‡æ¨¡å‹çš„å›æ‡‰æ–°å¢è‡³æˆ‘å€‘çš„èŠå¤©æ­·å²ä¸Šä¸‹æ–‡
    chat_history.add_assistant_message(response.content)


if __name__ == "__main__":
    asyncio.run(main())
```
```csharp
// Semantic Kernel C# example

using Microsoft.SemanticKernel;
using Microsoft.SemanticKernel.ChatCompletion;
using System.ComponentModel;
using Microsoft.SemanticKernel.Connectors.AzureOpenAI;

ChatHistory chatHistory = [];
chatHistory.AddUserMessage("I'd like to go to New York on January 1, 2025");

var kernelBuilder = Kernel.CreateBuilder();
kernelBuilder.AddAzureOpenAIChatCompletion(
    deploymentName: "NAME_OF_YOUR_DEPLOYMENT",
    apiKey: "YOUR_API_KEY",
    endpoint: "YOUR_AZURE_ENDPOINT"
);
kernelBuilder.Plugins.AddFromType<BookTravelPlugin>("BookTravel"); 
var kernel = kernelBuilder.Build();

var settings = new AzureOpenAIPromptExecutionSettings()
{
    FunctionChoiceBehavior = FunctionChoiceBehavior.Auto()
};

var chatCompletion = kernel.GetRequiredService<IChatCompletionService>();

var response = await chatCompletion.GetChatMessageContentAsync(chatHistory, settings, kernel);

/*
Behind the scenes, the model recognizes the tool to call, what arguments it already has (location) and (date)
{

"tool_calls": [
    {
        "id": "call_abc123",
        "type": "function",
        "function": {
            "name": "BookTravelPlugin-book_flight",
            "arguments": "{'location': 'New York', 'date': '2025-01-01'}"
        }
    }
]
*/

Console.WriteLine(response.Content);
chatHistory.AddMessage(response!.Role, response!.Content!);

// Example AI Model Response: Your flight to New York on January 1, 2025, has been successfully booked. Safe travels! âœˆï¸ğŸ—½

// Define a plugin that contains the function to book travel
public class BookTravelPlugin
{
    [KernelFunction("book_flight")]
    [Description("Book travel given location and date")]
    public async Task<string> BookFlight(DateTime date, string location)
    {
        return await Task.FromResult( $"Travel was booked to {location} on {date}");
    }
}
```

å¾æ­¤ç¯„ä¾‹ä½ å¯ä»¥çœ‹åˆ°å¦‚ä½•åˆ©ç”¨é å»ºè§£æå™¨å¾ä½¿ç”¨è€…è¼¸å…¥ä¸­æ“·å–é—œéµè³‡è¨Šï¼Œä¾‹å¦‚èˆªç­é è¨‚è«‹æ±‚çš„å‡ºç™¼åœ°ã€ç›®çš„åœ°èˆ‡æ—¥æœŸã€‚é€™ç¨®æ¨¡çµ„åŒ–æ–¹æ³•è®“ä½ å¯ä»¥å°ˆæ³¨æ–¼é«˜éšé‚è¼¯ã€‚

### åˆ©ç”¨å”ä½œå·¥å…·

åƒ CrewAIã€Microsoft AutoGen èˆ‡ Semantic Kernel é€™é¡æ¡†æ¶ä¿ƒé€²å»ºç«‹å¯å”åŒå·¥ä½œçš„å¤šå€‹ä»£ç†ã€‚

**åœ˜éšŠå¦‚ä½•ä½¿ç”¨é€™äº›**: åœ˜éšŠå¯ä»¥è¨­è¨ˆå…·æœ‰ç‰¹å®šè§’è‰²èˆ‡ä»»å‹™çš„ä»£ç†ï¼Œä½¿å®ƒå€‘èƒ½æ¸¬è©¦ä¸¦å„ªåŒ–å”ä½œå¼å·¥ä½œæµç¨‹ï¼Œä¸¦æå‡æ•´é«”ç³»çµ±æ•ˆç‡ã€‚

**å¯¦ä½œæ–¹å¼**: ä½ å¯ä»¥å»ºç«‹ä¸€ç¾¤ä»£ç†ï¼Œæ¯å€‹ä»£ç†æœ‰å°ˆé–€è·èƒ½ï¼Œä¾‹å¦‚è³‡æ–™æª¢ç´¢ã€åˆ†ææˆ–æ±ºç­–ã€‚é€™äº›ä»£ç†å¯ä»¥äº’ç›¸æºé€šä¸¦å…±äº«è³‡è¨Šä»¥é”æˆå…±åŒç›®æ¨™ï¼Œä¾‹å¦‚å›æ‡‰ä½¿ç”¨è€…æŸ¥è©¢æˆ–å®Œæˆä»»å‹™ã€‚

**ç¯„ä¾‹ç¨‹å¼ç¢¼ï¼ˆAutoGenï¼‰**ï¼š

```python
# å»ºç«‹ä»£ç†ï¼Œç„¶å¾Œå»ºç«‹ä¸€å€‹è¼ªæµæ’ç¨‹è®“ä»–å€‘å¯ä»¥ä¸€èµ·å·¥ä½œï¼Œåœ¨æ­¤æƒ…æ³ä¸‹æ˜¯ä¾åºé€²è¡Œ

# è³‡æ–™æ“·å–ä»£ç†
# è³‡æ–™åˆ†æä»£ç†
# æ±ºç­–ä»£ç†

agent_retrieve = AssistantAgent(
    name="dataretrieval",
    model_client=model_client,
    tools=[retrieve_tool],
    system_message="Use tools to solve tasks."
)

agent_analyze = AssistantAgent(
    name="dataanalysis",
    model_client=model_client,
    tools=[analyze_tool],
    system_message="Use tools to solve tasks."
)

# ç•¶ä½¿ç”¨è€…èªªã€ŒAPPROVEã€æ™‚çµæŸå°è©±
termination = TextMentionTermination("APPROVE")

user_proxy = UserProxyAgent("user_proxy", input_func=input)

team = RoundRobinGroupChat([agent_retrieve, agent_analyze, user_proxy], termination_condition=termination)

stream = team.run_stream(task="Analyze data", max_turns=10)
# åœ¨åŸ·è¡Œè…³æœ¬æ™‚ä½¿ç”¨ asyncio.run(...)ã€‚
await Console(stream)
```

åœ¨å‰é¢çš„ç¨‹å¼ç¢¼ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°å¦‚ä½•å»ºç«‹ä¸€å€‹æ¶‰åŠå¤šå€‹ä»£ç†å…±åŒå”ä½œåˆ†æè³‡æ–™çš„ä»»å‹™ã€‚æ¯å€‹ä»£ç†åŸ·è¡Œç‰¹å®šåŠŸèƒ½ï¼Œä¸¦é€éå”èª¿ä»£ç†çš„æ–¹å¼ä¾†åŸ·è¡Œä»»å‹™ä»¥é”æˆé æœŸçµæœã€‚é€éå»ºç«‹å…·æœ‰å°ˆé–€è§’è‰²çš„å°ˆæ³¨ä»£ç†ï¼Œä½ å¯ä»¥æå‡ä»»å‹™çš„æ•ˆç‡èˆ‡æ•ˆèƒ½ã€‚

### å³æ™‚å­¸ç¿’

å…ˆé€²çš„æ¡†æ¶æä¾›å³æ™‚æƒ…å¢ƒç†è§£èˆ‡é©æ‡‰èƒ½åŠ›ã€‚

**åœ˜éšŠå¦‚ä½•ä½¿ç”¨é€™äº›**: åœ˜éšŠå¯ä»¥å¯¦ä½œå›é¥‹è¿´è·¯ï¼Œè®“ä»£ç†å¾äº’å‹•ä¸­å­¸ç¿’ä¸¦å‹•æ…‹èª¿æ•´å…¶è¡Œç‚ºï¼Œé€²è€ŒæŒçºŒæ”¹é€²èˆ‡ç²¾é€²å…¶èƒ½åŠ›ã€‚

**å¯¦ä½œæ–¹å¼**: ä»£ç†å¯ä»¥åˆ†æä½¿ç”¨è€…å›é¥‹ã€ç’°å¢ƒè³‡æ–™èˆ‡ä»»å‹™çµæœï¼Œä»¥æ›´æ–°å…¶çŸ¥è­˜åº«ã€èª¿æ•´æ±ºç­–æ¼”ç®—æ³•ä¸¦éš¨æ™‚é–“æå‡æ•ˆèƒ½ã€‚é€™ç¨®åè¦†çš„å­¸ç¿’æµç¨‹ä½¿ä»£ç†èƒ½é©æ‡‰è®ŠåŒ–çš„æ¢ä»¶èˆ‡ä½¿ç”¨è€…åå¥½ï¼Œå¢å¼·æ•´é«”ç³»çµ±æ•ˆèƒ½ã€‚

## AutoGenã€Semantic Kernel èˆ‡ Azure AI Agent Service é€™äº›æ¡†æ¶æœ‰ä½•ä¸åŒï¼Ÿ

æœ‰å¾ˆå¤šæ¯”è¼ƒæ–¹å¼ï¼Œä½†æˆ‘å€‘å…ˆå¾è¨­è¨ˆã€èƒ½åŠ›èˆ‡ç›®æ¨™ä½¿ç”¨æ¡ˆä¾‹çš„å·®ç•°ä¾†çœ‹å¹¾å€‹è¦é»ï¼š

## AutoGen

AutoGen æ˜¯ç”± Microsoft Research çš„ AI Frontiers Lab æ‰€é–‹ç™¼çš„é–‹æºæ¡†æ¶ã€‚å®ƒå°ˆæ³¨æ–¼äº‹ä»¶é©…å‹•ã€åˆ†æ•£å¼çš„ã€Œä»£ç†å¼ã€æ‡‰ç”¨ï¼Œæ”¯æ´å¤šå€‹ LLM èˆ‡ SLMã€å·¥å…·èˆ‡é€²éšçš„å¤šä»£ç†è¨­è¨ˆæ¨¡å¼ã€‚

AutoGen çš„æ ¸å¿ƒæ¦‚å¿µæ˜¯ä»£ç†ï¼ˆagentsï¼‰ï¼Œä»£ç†æ˜¯èƒ½æ„ŸçŸ¥å…¶ç’°å¢ƒã€åšæ±ºç­–ä¸¦æ¡å–è¡Œå‹•ä»¥é”æˆç‰¹å®šç›®æ¨™çš„è‡ªä¸»å¯¦é«”ã€‚ä»£ç†é€ééåŒæ­¥è¨Šæ¯é€²è¡Œæºé€šï¼Œå…è¨±å®ƒå€‘ç¨ç«‹ä¸”ä¸¦è¡Œåœ°å·¥ä½œï¼Œæå‡ç³»çµ±çš„å¯æ“´å……æ€§èˆ‡å›æ‡‰æ€§ã€‚

<a href="https://en.wikipedia.org/wiki/Actor_model" target="_blank">ä»£ç†åŸºæ–¼ actor modelï¼ˆæ¼”å“¡æ¨¡å‹ï¼‰</a>ã€‚æ ¹æ“š Wikipediaï¼Œæ¼”å“¡æ˜¯ _ä¸¦è¡Œè¨ˆç®—çš„åŸºæœ¬å»ºæ§‹å¡Šã€‚åœ¨æ”¶åˆ°è¨Šæ¯å¾Œï¼Œæ¼”å“¡å¯ä»¥ï¼šåšå‡ºæœ¬åœ°æ±ºç­–ã€å»ºç«‹æ›´å¤šæ¼”å“¡ã€å‚³é€æ›´å¤šè¨Šæ¯ï¼Œä¸¦æ±ºå®šå¦‚ä½•å›æ‡‰ä¸‹ä¸€å€‹æ”¶åˆ°çš„è¨Šæ¯_ã€‚

**ä½¿ç”¨æ¡ˆä¾‹**ï¼šè‡ªå‹•åŒ–ç¨‹å¼ç¢¼ç”Ÿæˆã€è³‡æ–™åˆ†æä»»å‹™ï¼Œèˆ‡ç‚ºè¦åŠƒèˆ‡ç ”ç©¶åŠŸèƒ½æ§‹å»ºè‡ªè¨‚ä»£ç†ã€‚

ä»¥ä¸‹æ˜¯ AutoGen çš„ä¸€äº›é‡è¦æ ¸å¿ƒæ¦‚å¿µï¼š

- **Agentsï¼ˆä»£ç†ï¼‰**ã€‚ä»£ç†æ˜¯ä¸€ç¨®è»Ÿé«”å¯¦é«”ï¼Œæœƒï¼š
  - **é€éè¨Šæ¯é€²è¡Œæºé€š**ï¼Œé€™äº›è¨Šæ¯å¯ä»¥æ˜¯åŒæ­¥æˆ–éåŒæ­¥çš„ã€‚
  - **ç¶­è­·è‡ªå·±çš„ç‹€æ…‹**ï¼Œè©²ç‹€æ…‹å¯è¢«å…¥ç«™è¨Šæ¯ä¿®æ”¹ã€‚
  - **åŸ·è¡Œå‹•ä½œ**ä»¥å›æ‡‰æ”¶åˆ°çš„è¨Šæ¯æˆ–ç‹€æ…‹è®Šæ›´ã€‚é€™äº›å‹•ä½œå¯èƒ½æœƒä¿®æ”¹ä»£ç†çš„ç‹€æ…‹ä¸¦ç”¢ç”Ÿå¤–éƒ¨æ•ˆæœï¼Œä¾‹å¦‚æ›´æ–°è¨Šæ¯è¨˜éŒ„ã€å‚³é€æ–°è¨Šæ¯ã€åŸ·è¡Œç¨‹å¼ç¢¼æˆ–å‘¼å« APIã€‚
    
  ä¸‹é¢æœ‰ä¸€å€‹ç°¡çŸ­çš„ç¨‹å¼ç¢¼ç‰‡æ®µï¼Œå±•ç¤ºå¦‚ä½•å»ºç«‹å…·å‚™èŠå¤©åŠŸèƒ½çš„è‡ªè¨‚ä»£ç†ï¼š

    ```python
    from autogen_agentchat.agents import AssistantAgent
    from autogen_agentchat.messages import TextMessage
    from autogen_ext.models.openai import OpenAIChatCompletionClient


    class MyAgent(RoutedAgent):
        def __init__(self, name: str) -> None:
            super().__init__(name)
            model_client = OpenAIChatCompletionClient(model="gpt-4o")
            self._delegate = AssistantAgent(name, model_client=model_client)
    
        @message_handler
        async def handle_my_message_type(self, message: MyMessageType, ctx: MessageContext) -> None:
            print(f"{self.id.type} received message: {message.content}")
            response = await self._delegate.on_messages(
                [TextMessage(content=message.content, source="user")], ctx.cancellation_token
            )
            print(f"{self.id.type} responded: {response.chat_message.content}")
    ```
    
    åœ¨å‰é¢çš„ç¨‹å¼ç¢¼ä¸­ï¼Œ`MyAgent` å·²è¢«å»ºç«‹ä¸¦ç¹¼æ‰¿è‡ª `RoutedAgent`ã€‚å®ƒæœ‰ä¸€å€‹è¨Šæ¯è™•ç†å™¨æœƒå°å‡ºè¨Šæ¯å…§å®¹ï¼Œç„¶å¾Œä½¿ç”¨ `AssistantAgent` delegate ç™¼é€å›æ‡‰ã€‚ç‰¹åˆ¥è¦æ³¨æ„æˆ‘å€‘å¦‚ä½•å°‡ `self._delegate` æŒ‡æ´¾ç‚º `AssistantAgent` çš„å¯¦ä¾‹ï¼Œè©²å¯¦ä¾‹æ˜¯ä¸€å€‹å¯è™•ç†èŠå¤©è£œå®Œçš„é å»ºä»£ç†ã€‚


    æ¥è‘—è®“ AutoGen çŸ¥é“é€™å€‹ä»£ç†é¡å‹ä¸¦å•Ÿå‹•ç¨‹å¼ï¼š

    ```python
    
    # main.py
    runtime = SingleThreadedAgentRuntime()
    await MyAgent.register(runtime, "my_agent", lambda: MyAgent())

    runtime.start()  # åœ¨èƒŒæ™¯ä¸­é–‹å§‹è™•ç†è¨Šæ¯ã€‚
    await runtime.send_message(MyMessageType("Hello, World!"), AgentId("my_agent", "default"))
    ```

    åœ¨å…ˆå‰çš„ç¨‹å¼ç¢¼ä¸­ï¼Œä»£ç†å·²å‘åŸ·è¡Œç’°å¢ƒè¨»å†Šï¼Œç„¶å¾Œå‘è©²ä»£ç†ç™¼é€ä¸€å€‹è¨Šæ¯ï¼Œçµæœç”¢ç”Ÿä»¥ä¸‹è¼¸å‡ºï¼š

    ```text
    # Output from the console:
    my_agent received message: Hello, World!
    my_assistant received message: Hello, World!
    my_assistant responded: Hello! How can I assist you today?
    ```

- **å¤šä»£ç†**ã€‚AutoGen æ”¯æ´å»ºç«‹å¤šå€‹ä»£ç†å…±åŒå”ä½œä»¥å®Œæˆè¤‡é›œä»»å‹™ã€‚ä»£ç†å¯ä»¥äº’ç›¸æºé€šã€åˆ†äº«è³‡è¨Šä¸¦å”èª¿å…¶å‹•ä½œä»¥æ›´æœ‰æ•ˆåœ°è§£æ±ºå•é¡Œã€‚è¦å»ºç«‹å¤šä»£ç†ç³»çµ±ï¼Œä½ å¯ä»¥å®šç¾©å…·æœ‰å°ˆé–€åŠŸèƒ½èˆ‡è§’è‰²çš„ä¸åŒä»£ç†é¡å‹ï¼Œä¾‹å¦‚è³‡æ–™æª¢ç´¢ã€åˆ†æã€æ±ºç­–èˆ‡ä½¿ç”¨è€…äº’å‹•ã€‚è®“æˆ‘å€‘çœ‹çœ‹é€™é¡å»ºç«‹æ–¹å¼é•·ä»€éº¼æ¨£å­ï¼Œä»¥ä¾¿å°å…¶æœ‰ä¸€å€‹æ¦‚å¿µï¼š

    ```python
    editor_description = "Editor for planning and reviewing the content."

    # å®£å‘Šä¸€å€‹ä»£ç†äººçš„ç¯„ä¾‹
    editor_agent_type = await EditorAgent.register(
    runtime,
    editor_topic_type,  # ä½¿ç”¨ä¸»é¡Œé¡å‹ä½œç‚ºä»£ç†äººé¡å‹ã€‚
    lambda: EditorAgent(
        description=editor_description,
        group_chat_topic_type=group_chat_topic_type,
        model_client=OpenAIChatCompletionClient(
            model="gpt-4o-2024-08-06",
            # api_key="YOUR_API_KEY",
        ),
        ),
    )

    # å…¶é¤˜å®£å‘Šç‚ºç°¡æ½”èµ·è¦‹ç•¥å¯«

    # ç¾¤çµ„èŠå¤©
    group_chat_manager_type = await GroupChatManager.register(
    runtime,
    "group_chat_manager",
    lambda: GroupChatManager(
        participant_topic_types=[writer_topic_type, illustrator_topic_type, editor_topic_type, user_topic_type],
        model_client=OpenAIChatCompletionClient(
            model="gpt-4o-2024-08-06",
            # api_key="YOUR_API_KEY",
        ),
        participant_descriptions=[
            writer_description, 
            illustrator_description, 
            editor_description, 
            user_description
        ],
        ),
    )
    ```

    åœ¨å…ˆå‰çš„ç¨‹å¼ç¢¼ä¸­ï¼Œæˆ‘å€‘æœ‰ä¸€å€‹å·²åœ¨åŸ·è¡Œç’°å¢ƒä¸­è¨»å†Šçš„ `GroupChatManager`ã€‚æ­¤ç®¡ç†è€…è² è²¬å”èª¿ä¸åŒé¡å‹ä»£ç†ä¹‹é–“çš„äº’å‹•ï¼Œä¾‹å¦‚æ’°ç¨¿è€…ã€æ’ç•«å®¶ã€ç·¨è¼¯èˆ‡ä½¿ç”¨è€…ã€‚

- **Agent Runtimeï¼ˆä»£ç†åŸ·è¡Œç’°å¢ƒï¼‰**ã€‚è©²æ¡†æ¶æä¾›åŸ·è¡Œæ™‚ç’°å¢ƒï¼Œå•Ÿç”¨ä»£ç†ä¹‹é–“çš„é€šè¨Šã€ç®¡ç†å…¶èº«ä»½èˆ‡ç”Ÿå‘½é€±æœŸï¼Œä¸¦å¼·åˆ¶å®‰å…¨èˆ‡éš±ç§é‚Šç•Œã€‚é€™æ„å‘³è‘—ä½ å¯ä»¥åœ¨å—æ§ä¸”å®‰å…¨çš„ç’°å¢ƒä¸­åŸ·è¡Œä»£ç†ï¼Œç¢ºä¿å®ƒå€‘èƒ½å®‰å…¨ä¸”æœ‰æ•ˆåœ°äº’å‹•ã€‚æœ‰å…©ç¨®å€¼å¾—é—œæ³¨çš„åŸ·è¡Œç’°å¢ƒï¼š
  - **ç¨ç«‹åŸ·è¡Œç’°å¢ƒï¼ˆStand-alone runtimeï¼‰**ã€‚é€™æ˜¯å–®ä¸€ç¨‹åºæ‡‰ç”¨çš„è‰¯å¥½é¸æ“‡ï¼Œæ‰€æœ‰ä»£ç†éƒ½åœ¨ç›¸åŒçš„ç¨‹å¼èªè¨€ä¸­å¯¦ä½œä¸¦åœ¨ç›¸åŒçš„ç¨‹åºä¸­åŸ·è¡Œã€‚ä»¥ä¸‹æ˜¯ä¸€å€‹é‹ä½œç¤ºæ„ï¼š
  
    <a href="https://microsoft.github.io/autogen/stable/_images/architecture-standalone.svg" target="_blank">Stand-alone runtime</a>   
Application stack

    *agents communicate via messages through the runtime, and the runtime manages the lifecycle of agents*

  - **åˆ†æ•£å¼ä»£ç†åŸ·è¡Œç’°å¢ƒï¼ˆDistributed agent runtimeï¼‰**ï¼Œé©ç”¨æ–¼å¤šç¨‹åºæ‡‰ç”¨ï¼Œå…¶ä¸­ä»£ç†å¯èƒ½ä»¥ä¸åŒç¨‹å¼èªè¨€å¯¦ä½œä¸¦åœ¨ä¸åŒæ©Ÿå™¨ä¸ŠåŸ·è¡Œã€‚ä»¥ä¸‹æ˜¯ä¸€å€‹é‹ä½œç¤ºæ„ï¼š
  
    <a href="https://microsoft.github.io/autogen/stable/_images/architecture-distributed.svg" target="_blank">Distributed runtime</a>

## Semantic Kernel + Agent Framework

Semantic Kernel æ˜¯ä¸€å€‹ä¼æ¥­ç´šçš„ AI ç·¨æ’ SDKã€‚å®ƒåŒ…å« AI èˆ‡è¨˜æ†¶é«”é€£æ¥å™¨ï¼Œä»¥åŠä¸€å€‹ä»£ç†æ¡†æ¶ã€‚

æˆ‘å€‘å…ˆä¾†ä»‹ç´¹ä¸€äº›æ ¸å¿ƒå…ƒä»¶ï¼š

- **AI Connectorsï¼ˆAI é€£æ¥å™¨ï¼‰**ï¼šé€™æ˜¯åœ¨ Python èˆ‡ C# ä¸­èˆ‡å¤–éƒ¨ AI æœå‹™å’Œè³‡æ–™ä¾†æºä»‹æ¥çš„ä»‹é¢ã€‚

  ```python
  # èªç¾©æ ¸å¿ƒ Python
  from semantic_kernel.connectors.ai.open_ai import AzureChatCompletion
  from semantic_kernel.kernel import Kernel

  kernel = Kernel()
  kernel.add_service(
    AzureChatCompletion(
        deployment_name="your-deployment-name",
        api_key="your-api-key",
        endpoint="your-endpoint",
    )
  )
  ```  

    ```csharp
    // Semantic Kernel C#
    using Microsoft.SemanticKernel;

    // Create kernel
    var builder = Kernel.CreateBuilder();
    
    // Add a chat completion service:
    builder.Services.AddAzureOpenAIChatCompletion(
        "your-resource-name",
        "your-endpoint",
        "your-resource-key",
        "deployment-model");
    var kernel = builder.Build();
    ```

    é€™è£¡æœ‰ä¸€å€‹ç°¡å–®ç¯„ä¾‹ï¼Œç¤ºç¯„å¦‚ä½•å»ºç«‹ä¸€å€‹ kernel ä¸¦æ–°å¢ä¸€å€‹èŠå¤©è£œå®Œæœå‹™ã€‚Semantic Kernel èˆ‡å¤–éƒ¨ AI æœå‹™å»ºç«‹é€£æ¥ï¼Œåœ¨æ­¤ä¾‹ä¸­ç‚º Azure OpenAI Chat Completionã€‚

- **Pluginsï¼ˆå¤–æ›ï¼‰**ï¼šé€™äº›å°è£äº†æ‡‰ç”¨ç¨‹å¼å¯ä»¥ä½¿ç”¨çš„å‡½å¼ã€‚æ—¢æœ‰ç¾æˆçš„å¤–æ›ï¼Œä¹Ÿå¯ä»¥å»ºç«‹è‡ªè¨‚å¤–æ›ã€‚ç›¸é—œæ¦‚å¿µæ˜¯ã€Œæç¤ºå‡½å¼ã€ã€‚ä½ ä¸æ˜¯ä»¥è‡ªç„¶èªè¨€æç¤ºå»å‘¼å«å‡½å¼ï¼Œè€Œæ˜¯å°‡æŸäº›å‡½å¼å»£æ’­çµ¦æ¨¡å‹ã€‚æ ¹æ“šç•¶å‰èŠå¤©ä¸Šä¸‹æ–‡ï¼Œæ¨¡å‹å¯èƒ½æœƒé¸æ“‡å‘¼å«å…¶ä¸­ä¸€å€‹å‡½å¼ä¾†å®Œæˆè«‹æ±‚æˆ–æŸ¥è©¢ã€‚ä»¥ä¸‹æ˜¯ä¸€å€‹ç¯„ä¾‹ï¼š

  ```python
  from semantic_kernel.connectors.ai.open_ai.services.azure_chat_completion import AzureChatCompletion


  async def main():
      from semantic_kernel.functions import KernelFunctionFromPrompt
      from semantic_kernel.kernel import Kernel

      kernel = Kernel()
      kernel.add_service(AzureChatCompletion())

      user_input = input("User Input:> ")

      kernel_function = KernelFunctionFromPrompt(
          function_name="SummarizeText",
          prompt="""
          Summarize the provided unstructured text in a sentence that is easy to understand.
          Text to summarize: {{$user_input}}
          """,
      )

      response = await kernel_function.invoke(kernel=kernel, user_input=user_input)
      print(f"Model Response: {response}")

      """
      Sample Console Output:

      User Input:> I like dogs
      Model Response: The text expresses a preference for dogs.
      """


  if __name__ == "__main__":
    import asyncio
    asyncio.run(main())
  ```

    ```csharp
    var userInput = Console.ReadLine();

    // Define semantic function inline.
    string skPrompt = @"Summarize the provided unstructured text in a sentence that is easy to understand.
                        Text to summarize: {{$userInput}}";
    
    // create the function from the prompt
    KernelFunction summarizeFunc = kernel.CreateFunctionFromPrompt(
        promptTemplate: skPrompt,
        functionName: "SummarizeText"
    );

    //then import into the current kernel
    kernel.ImportPluginFromFunctions("SemanticFunctions", [summarizeFunc]);

    ```

    åœ¨é€™è£¡ï¼Œä½ å…ˆæœ‰ä¸€å€‹æ¨¡æ¿æç¤º `skPrompt`ï¼Œå®ƒä¿ç•™è®“ä½¿ç”¨è€…è¼¸å…¥æ–‡å­—çš„ç©ºé–“ `$userInput`ã€‚æ¥è‘—ä½ å»ºç«‹ kernel å‡½å¼ `SummarizeText`ï¼Œç„¶å¾Œä»¥å¤–æ›åç¨± `SemanticFunctions` å°‡å®ƒåŒ¯å…¥åˆ° kernelã€‚è«‹æ³¨æ„å‡½å¼çš„åç¨±ï¼Œé€™æœ‰åŠ©æ–¼ Semantic Kernel ç†è§£è©²å‡½å¼çš„ç”¨é€”ä»¥åŠä½•æ™‚æ‡‰è©²è¢«å‘¼å«ã€‚

- **Native functionï¼ˆåŸç”Ÿå‡½å¼ï¼‰**ï¼šæ¡†æ¶ä¹Ÿæœ‰å¯ä»¥ç›´æ¥è¢«å‘¼å«ä»¥åŸ·è¡Œä»»å‹™çš„åŸç”Ÿå‡½å¼ã€‚ä»¥ä¸‹æ˜¯ä¸€å€‹å¾æª”æ¡ˆæª¢ç´¢å…§å®¹çš„ç¯„ä¾‹ï¼š

    ```csharp
    public class NativeFunctions {

        [SKFunction, Description("Retrieve content from local file")]
        public async Task<string> RetrieveLocalFile(string fileName, int maxSize = 5000)
        {
            string content = await File.ReadAllTextAsync(fileName);
            if (content.Length <= maxSize) return content;
            return content.Substring(0, maxSize);
        }
    }
    
    //Import native function
    string plugInName = "NativeFunction";
    string functionName = "RetrieveLocalFile";

   //To add the functions to a kernel use the following function
    kernel.ImportPluginFromType<NativeFunctions>();

    ```

- **Memoryï¼ˆè¨˜æ†¶é«”ï¼‰**ï¼šç‚º AI æ‡‰ç”¨æŠ½è±¡åŒ–ä¸¦ç°¡åŒ–æƒ…å¢ƒç®¡ç†ã€‚è¨˜æ†¶é«”çš„æ¦‚å¿µæ˜¯æŒ‡é€™äº›è³‡è¨Šæ˜¯æ¨¡å‹æ‡‰è©²çŸ¥é“çš„å…§å®¹ã€‚ä½ å¯ä»¥å°‡é€™äº›è³‡è¨Šå„²å­˜åœ¨å‘é‡è³‡æ–™åº«ä¸­ï¼Œè©²è³‡æ–™åº«é€šå¸¸æ˜¯è¨˜æ†¶é«”ä¸­çš„è³‡æ–™åº«æˆ–å‘é‡è³‡æ–™åº«æˆ–é¡ä¼¼çš„ç³»çµ±ã€‚ä»¥ä¸‹æ˜¯ä¸€å€‹éå¸¸ç°¡åŒ–çš„æƒ…å¢ƒç¯„ä¾‹ï¼Œå°‡ã€Œäº‹å¯¦ã€åŠ å…¥åˆ°è¨˜æ†¶é«”ä¸­ï¼š

    ```csharp
    var facts = new Dictionary<string,string>();
    facts.Add(
        "Azure Machine Learning; https://learn.microsoft.com/azure/machine-learning/",
        @"Azure Machine Learning is a cloud service for accelerating and
        managing the machine learning project lifecycle. Machine learning professionals,
        data scientists, and engineers can use it in their day-to-day workflows"
    );
    
    facts.Add(
        "Azure SQL Service; https://learn.microsoft.com/azure/azure-sql/",
        @"Azure SQL is a family of managed, secure, and intelligent products
        that use the SQL Server database engine in the Azure cloud."
    );
    
    string memoryCollectionName = "SummarizedAzureDocs";
    
    foreach (var fact in facts) {
        await memoryBuilder.SaveReferenceAsync(
            collection: memoryCollectionName,
            description: fact.Key.Split(";")[1].Trim(),
            text: fact.Value,
            externalId: fact.Key.Split(";")[2].Trim(),
            externalSourceName: "Azure Documentation"
        );
    }
    ```

    é€™äº›äº‹å¯¦æ¥è‘—æœƒå„²å­˜åœ¨è¨˜æ†¶é›†åˆ `SummarizedAzureDocs` ä¸­ã€‚é€™æ˜¯ä¸€å€‹éå¸¸ç°¡åŒ–çš„ç¯„ä¾‹ï¼Œä½†ä½ å¯ä»¥çœ‹åˆ°å¦‚ä½•å°‡è³‡è¨Šå„²å­˜åœ¨è¨˜æ†¶ä¸­ä¾› LLM ä½¿ç”¨ã€‚

So that's the basics of the Semantic Kernel framework, what about the Agent Framework?

## Azure AI Agent Service

Azure AI Agent Service is a more recent addition, introduced at Microsoft Ignite 2024. It allows for the development and deployment of AI agents with more flexible models, such as directly calling open-source LLMs like Llama 3, Mistral, and Cohere.

Azure AI Agent Service provides stronger enterprise security mechanisms and data storage methods, making it suitable for enterprise applications. 

It works out-of-the-box with multi-agent orchestration frameworks like AutoGen and Semantic Kernel.

This service is currently in Public Preview and supports Python and C# for building agents.

Using Semantic Kernel Python, we can create an Azure AI Agent with a user-defined plugin:

```python
import asyncio
from typing import Annotated

from azure.identity.aio import DefaultAzureCredential

from semantic_kernel.agents import AzureAIAgent, AzureAIAgentSettings, AzureAIAgentThread
from semantic_kernel.contents import ChatMessageContent
from semantic_kernel.contents import AuthorRole
from semantic_kernel.functions import kernel_function


# å®šç¾©ä¸€å€‹ç¯„ä¾‹æ’ä»¶ä½œç‚ºç¤ºç¯„
class MenuPlugin:
    """A sample Menu Plugin used for the concept sample."""

    @kernel_function(description="Provides a list of specials from the menu.")
    def get_specials(self) -> Annotated[str, "Returns the specials from the menu."]:
        return """
        Special Soup: Clam Chowder
        Special Salad: Cobb Salad
        Special Drink: Chai Tea
        """

    @kernel_function(description="Provides the price of the requested menu item.")
    def get_item_price(
        self, menu_item: Annotated[str, "The name of the menu item."]
    ) -> Annotated[str, "Returns the price of the menu item."]:
        return "$9.99"


async def main() -> None:
    ai_agent_settings = AzureAIAgentSettings.create()

    async with (
        DefaultAzureCredential() as creds,
        AzureAIAgent.create_client(
            credential=creds,
            conn_str=ai_agent_settings.project_connection_string.get_secret_value(),
        ) as client,
    ):
        # å»ºç«‹ä»£ç†å®šç¾©
        agent_definition = await client.agents.create_agent(
            model=ai_agent_settings.model_deployment_name,
            name="Host",
            instructions="Answer questions about the menu.",
        )

        # ä½¿ç”¨å·²å®šç¾©çš„ç”¨æˆ¶ç«¯å’Œä»£ç†å®šç¾©ä¾†å»ºç«‹ AzureAI ä»£ç†
        agent = AzureAIAgent(
            client=client,
            definition=agent_definition,
            plugins=[MenuPlugin()],
        )

        # å»ºç«‹ä¸€å€‹å°è©±ä¸²ä»¥ä¿å­˜å°è©±å…§å®¹
        # å¦‚æœæœªæä¾›å°è©±ä¸²ï¼Œ
        # å°‡å»ºç«‹ä¸€å€‹æ–°çš„å°è©±ä¸²ä¸¦éš¨åˆå§‹å›æ‡‰è¿”å›
        thread: AzureAIAgentThread | None = None

        user_inputs = [
            "Hello",
            "What is the special soup?",
            "How much does that cost?",
            "Thank you",
        ]

        try:
            for user_input in user_inputs:
                print(f"# User: '{user_input}'")
                # èª¿ç”¨æŒ‡å®šå°è©±ä¸²çš„ä»£ç†
                response = await agent.get_response(
                    messages=user_input,
                    thread_id=thread,
                )
                print(f"# {response.name}: {response.content}")
                thread = response.thread
        finally:
            await thread.delete() if thread else None
            await client.agents.delete_agent(agent.id)


if __name__ == "__main__":
    asyncio.run(main())
```

### Core concepts

Azure AI Agent Service has the following core concepts:

- **Agent**. Azure AI Agent Service integrates with Microsoft Foundry. Within AI Foundry, an AI Agent acts as a "smart" microservice that can be used to answer questions (RAG), perform actions, or completely automate workflows. It achieves this by combining the power of generative AI models with tools that allow it to access and interact with real-world data sources. Here's an example of an agent:

    ```python
    agent = project_client.agents.create_agent(
        model="gpt-4o-mini",
        name="my-agent",
        instructions="You are helpful agent",
        tools=code_interpreter.definitions,
        tool_resources=code_interpreter.resources,
    )
    ```

    In this example, an agent is created with the model `gpt-4o-mini`, a name `my-agent`, and instructions `You are helpful agent`. The agent is equipped with tools and resources to perform code interpretation tasks.

- **Thread and messages**. The thread is another important concept. It represents a conversation or interaction between an agent and a user. Threads can be used to track the progress of a conversation, store context information, and manage the state of the interaction. Here's an example of a thread:

    ```python
    thread = project_client.agents.create_thread()
    message = project_client.agents.create_message(
        thread_id=thread.id,
        role="user",
        content="Could you please create a bar chart for the operating profit using the following data and provide the file to me? Company A: $1.2 million, Company B: $2.5 million, Company C: $3.0 million, Company D: $1.8 million",
    )
    
    # Ask the agent to perform work on the thread
    run = project_client.agents.create_and_process_run(thread_id=thread.id, agent_id=agent.id)
    
    # Fetch and log all messages to see the agent's response
    messages = project_client.agents.list_messages(thread_id=thread.id)
    print(f"Messages: {messages}")
    ```

    In the previous code, a thread is created. Thereafter, a message is sent to the thread. By calling `create_and_process_run`, the agent is asked to perform work on the thread. Finally, the messages are fetched and logged to see the agent's response. The messages indicate the progress of the conversation between the user and the agent. It's also important to understand that the messages can be of different types such as text, image, or file, that is the agents work has resulted in for example an image or a text response for example. As a developer, you can then use this information to further process the response or present it to the user.

- **Integrates with other AI frameworks**. Azure AI Agent service can interact with other frameworks like AutoGen and Semantic Kernel, which means you can build part of your app in one of these frameworks and for example using the Agent service as an orchestrator or you can build everything in the Agent service.

**Use Cases**: Azure AI Agent Service is designed for enterprise applications that require secure, scalable, and flexible AI agent deployment.

## What's the difference between these frameworks?
 
It does sound like there is a lot of overlap between these frameworks, but there are some key differences in terms of their design, capabilities, and target use cases:
 
- **AutoGen**: Is an experimentation framework focused on leading-edge research on multi-agent systems. It is the best place to experiment and prototype sophisticated multi-agent systems.
- **Semantic Kernel**: Is a production-ready agent library for building enterprise agentic applications. Focuses on event-driven, distributed agentic applications, enabling multiple LLMs and SLMs, tools, and single/multi-agent design patterns.
- **Azure AI Agent Service**: Is a platform and deployment service in Azure Foundry for agents. It offers building connectivity to services support by Azure Found like Azure OpenAI, Azure AI Search, Bing Search and code execution.
 
Still not sure which one to choose?

### Use Cases
 
Let's see if we can help you by going through some common use cases:
 
> Q: I'm experimenting, learning and building proof-of-concept agent applications, and I want to be able to build and experiment quickly
>

>A: AutoGen would be a good choice for this scenario, as it focuses on event-driven, distributed agentic applications and supports advanced multi-agent design patterns.

> Q: What makes AutoGen a better choice than Semantic Kernel and Azure AI Agent Service for this use case?
>
> A: AutoGen is specifically designed for event-driven, distributed agentic applications, making it well-suited for automating code generation and data analysis tasks. It provides the necessary tools and capabilities to build complex multi-agent systems efficiently.

>Q: Sounds like Azure AI Agent Service could work here too, it has tools for code generation and more?

>
> A: Yes, Azure AI Agent Service is a platform service for agents and add built-in capabilities for multiple models, Azure AI Search, Bing Search and Azure Functions. It makes it easy to build your agents in the Foundry Portal and deploy them at scale.
 
> Q: I'm still confused just give me one option
>
> A: A great choice is to build your application in Semantic Kernel first and then use Azure AI Agent Service to deploy your agent. This approach allows you to easily persist your agents while leveraging the power to build multi-agent systems in Semantic Kernel. Additionally, Semantic Kernel has a connector in AutoGen, making it easy to use both frameworks together.
 
Let's summarize the key differences in a table:

| Framework | Focus | Core Concepts | Use Cases |
| --- | --- | --- | --- |
| AutoGen | Event-driven, distributed agentic applications | Agents, Personas, Functions, Data | Code generation, data analysis tasks |
| Semantic Kernel | Understanding and generating human-like text content | Agents, Modular Components, Collaboration | Natural language understanding, content generation |
| Azure AI Agent Service | Flexible models, enterprise security, Code generation, Tool calling | Modularity, Collaboration, Process Orchestration | Secure, scalable, and flexible AI agent deployment |

What's the ideal use case for each of these frameworks?

## Can I integrate my existing Azure ecosystem tools directly, or do I need standalone solutions?

The answer is yes, you can integrate your existing Azure ecosystem tools directly with Azure AI Agent Service especially, this because it has been built to work seamlessly with other Azure services. You could for example integrate Bing, Azure AI Search, and Azure Functions. There's also deep integration with Microsoft Foundry.

For AutoGen and Semantic Kernel, you can also integrate with Azure services, but it may require you to call the Azure services from your code. Another way to integrate is to use the Azure SDKs to interact with Azure services from your agents. Additionally, like was mentioned, you can use Azure AI Agent Service as an orchestrator for your agents built in AutoGen or Semantic Kernel which would give easy access to the Azure ecosystem.

## Sample Codes

- Python: [Agent Framework](./code_samples/02-python-agent-framework.ipynb)
- .NET: [Agent Framework](./code_samples/02-dotnet-agent-framework.md)

## Got More Questions about AI Agent Frameworks?

Join the [Microsoft Foundry Discord](https://aka.ms/ai-agents/discord) to meet with other learners, attend office hours and get your AI Agents questions answered.

## References

- <a href="https://techcommunity.microsoft.com/blog/azure-ai-services-blog/introducing-azure-ai-agent-service/4298357" target="_blank">Azure Agent Service</a>
- <a href="https://devblogs.microsoft.com/semantic-kernel/microsofts-agentic-ai-frameworks-autogen-and-semantic-kernel/" target="_blank">Semantic Kernel and AutoGen</a>
- <a href="https://learn.microsoft.com/semantic-kernel/frameworks/agent/?pivots=programming-language-python" target="_blank">Semantic Kernel Python Agent Framework</a>
- <a href="https://learn.microsoft.com/semantic-kernel/frameworks/agent/?pivots=programming-language-csharp" target="_blank">Semantic Kernel .Net Agent Framework</a>
- <a href="https://learn.microsoft.com/azure/ai-services/agents/overview" target="_blank">Azure AI Agent service</a>
- <a href="https://techcommunity.microsoft.com/blog/educatordeveloperblog/using-azure-ai-agent-service-with-autogen--semantic-kernel-to-build-a-multi-agen/4363121" target="_blank">Using Azure AI Agent Service with AutoGen / Semantic Kernel to build a multi-agent's solution</a>

## Previous Lesson

[Introduction to AI Agents and Agent Use Cases](../01-intro-to-ai-agents/README.md)

## Next Lesson

[Understanding Agentic Design Patterns](../03-agentic-design-patterns/README.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
å…è²¬è²æ˜ï¼š
æœ¬æ–‡ä»¶ä¿‚ä½¿ç”¨ AI ç¿»è­¯æœå‹™ [Co-op Translator](https://github.com/Azure/co-op-translator) é€²è¡Œç¿»è­¯ã€‚é›–ç„¶æˆ‘å€‘åŠ›æ±‚æº–ç¢ºï¼Œä½†è«‹æ³¨æ„ï¼Œè‡ªå‹•ç¿»è­¯å¯èƒ½åŒ…å«éŒ¯èª¤æˆ–ä¸ç²¾ç¢ºä¹‹è™•ã€‚åŸå§‹èªè¨€ä¹‹åŸæ–‡æ‡‰è¢«è¦–ç‚ºå…·æ¬Šå¨æ€§çš„ç‰ˆæœ¬ã€‚è‹¥æ¶‰åŠé‡è¦è³‡è¨Šï¼Œå»ºè­°æ¡ç”¨å°ˆæ¥­äººå·¥ç¿»è­¯ã€‚å°å› ä½¿ç”¨æœ¬ç¿»è­¯è€Œç”¢ç”Ÿä¹‹ä»»ä½•èª¤è§£æˆ–èª¤é‡‹ï¼Œæ¦‚ä¸è² è²¬ã€‚
<!-- CO-OP TRANSLATOR DISCLAIMER END -->